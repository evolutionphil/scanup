{"dependencies":[{"name":"../core/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":76,"index":76}}],"key":"uYibmgiuaz/CrXy37RQIsJGcmz0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return PDFEmbeddedFile;\n    }\n  });\n  var _coreIndexJs = require(_dependencyMap[0], \"../core/index.js\");\n  /**\n   * Represents a file that has been embedded in a [[PDFDocument]].\n   */\n  class PDFEmbeddedFile {\n    constructor(ref, doc, embedder) {\n      this.alreadyEmbedded = false;\n      this.ref = ref;\n      this.doc = doc;\n      this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all embeddable files get embedded.\n     *\n     * Embed this embeddable file in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    async embed() {\n      if (!this.alreadyEmbedded) {\n        const ref = await this.embedder.embedIntoContext(this.doc.context, this.ref);\n        if (!this.doc.catalog.has(_coreIndexJs.PDFName.of('Names'))) {\n          this.doc.catalog.set(_coreIndexJs.PDFName.of('Names'), this.doc.context.obj({}));\n        }\n        const Names = this.doc.catalog.lookup(_coreIndexJs.PDFName.of('Names'), _coreIndexJs.PDFDict);\n        if (!Names.has(_coreIndexJs.PDFName.of('EmbeddedFiles'))) {\n          Names.set(_coreIndexJs.PDFName.of('EmbeddedFiles'), this.doc.context.obj({}));\n        }\n        const EmbeddedFiles = Names.lookup(_coreIndexJs.PDFName.of('EmbeddedFiles'), _coreIndexJs.PDFDict);\n        if (!EmbeddedFiles.has(_coreIndexJs.PDFName.of('Names'))) {\n          EmbeddedFiles.set(_coreIndexJs.PDFName.of('Names'), this.doc.context.obj([]));\n        }\n        const EFNames = EmbeddedFiles.lookup(_coreIndexJs.PDFName.of('Names'), _coreIndexJs.PDFArray);\n        EFNames.push(_coreIndexJs.PDFHexString.fromText(this.embedder.fileName));\n        EFNames.push(ref);\n        /**\n         * The AF-Tag is needed to achieve PDF-A3 compliance for embedded files\n         *\n         * The following document outlines the uses cases of the associated files (AF) tag.\n         * See:\n         * https://www.pdfa.org/wp-content/uploads/2018/10/PDF20_AN002-AF.pdf\n         */\n        if (!this.doc.catalog.has(_coreIndexJs.PDFName.of('AF'))) {\n          this.doc.catalog.set(_coreIndexJs.PDFName.of('AF'), this.doc.context.obj([]));\n        }\n        const AF = this.doc.catalog.lookup(_coreIndexJs.PDFName.of('AF'), _coreIndexJs.PDFArray);\n        AF.push(ref);\n        this.alreadyEmbedded = true;\n      }\n    }\n  }\n  /**\n   * > **NOTE:** You probably don't want to call this method directly. Instead,\n   * > consider using the [[PDFDocument.attach]] method, which will create\n   * instances of [[PDFEmbeddedFile]] for you.\n   *\n   * Create an instance of [[PDFEmbeddedFile]] from an existing ref and embedder\n   *\n   * @param ref The unique reference for this file.\n   * @param doc The document to which the file will belong.\n   * @param embedder The embedder that will be used to embed the file.\n   */\n  PDFEmbeddedFile.of = (ref, doc, embedder) => new PDFEmbeddedFile(ref, doc, embedder);\n});","lineCount":78,"map":[[7,2,5,15,"Object"],[7,8,5,15],[7,9,5,15,"defineProperty"],[7,23,5,15],[7,24,5,15,"exports"],[7,31,5,15],[8,4,5,15,"enumerable"],[8,14,5,15],[9,4,5,15,"get"],[9,7,5,15],[9,18,5,15,"get"],[9,19,5,15],[10,6,5,15],[10,13,5,15,"PDFEmbeddedFile"],[10,28,5,15],[11,4,5,15],[12,2,5,15],[13,2,1,0],[13,6,1,0,"_coreIndexJs"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,2,0],[15,0,3,0],[16,0,4,0],[17,2,5,15],[17,8,5,21,"PDFEmbeddedFile"],[17,23,5,36],[17,24,5,37],[18,4,6,4,"constructor"],[18,15,6,15,"constructor"],[18,16,6,16,"ref"],[18,19,6,19],[18,21,6,21,"doc"],[18,24,6,24],[18,26,6,26,"embedder"],[18,34,6,34],[18,36,6,36],[19,6,7,8],[19,10,7,12],[19,11,7,13,"alreadyEmbedded"],[19,26,7,28],[19,29,7,31],[19,34,7,36],[20,6,8,8],[20,10,8,12],[20,11,8,13,"ref"],[20,14,8,16],[20,17,8,19,"ref"],[20,20,8,22],[21,6,9,8],[21,10,9,12],[21,11,9,13,"doc"],[21,14,9,16],[21,17,9,19,"doc"],[21,20,9,22],[22,6,10,8],[22,10,10,12],[22,11,10,13,"embedder"],[22,19,10,21],[22,22,10,24,"embedder"],[22,30,10,32],[23,4,11,4],[24,4,12,4],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,4,21,4],[33,10,21,10,"embed"],[33,15,21,15,"embed"],[33,16,21,15],[33,18,21,18],[34,6,22,8],[34,10,22,12],[34,11,22,13],[34,15,22,17],[34,16,22,18,"alreadyEmbedded"],[34,31,22,33],[34,33,22,35],[35,8,23,12],[35,14,23,18,"ref"],[35,17,23,21],[35,20,23,24],[35,26,23,30],[35,30,23,34],[35,31,23,35,"embedder"],[35,39,23,43],[35,40,23,44,"embedIntoContext"],[35,56,23,60],[35,57,23,61],[35,61,23,65],[35,62,23,66,"doc"],[35,65,23,69],[35,66,23,70,"context"],[35,73,23,77],[35,75,23,79],[35,79,23,83],[35,80,23,84,"ref"],[35,83,23,87],[35,84,23,88],[36,8,24,12],[36,12,24,16],[36,13,24,17],[36,17,24,21],[36,18,24,22,"doc"],[36,21,24,25],[36,22,24,26,"catalog"],[36,29,24,33],[36,30,24,34,"has"],[36,33,24,37],[36,34,24,38,"PDFName"],[36,46,24,45],[36,47,24,45,"PDFName"],[36,54,24,45],[36,55,24,46,"of"],[36,57,24,48],[36,58,24,49],[36,65,24,56],[36,66,24,57],[36,67,24,58],[36,69,24,60],[37,10,25,16],[37,14,25,20],[37,15,25,21,"doc"],[37,18,25,24],[37,19,25,25,"catalog"],[37,26,25,32],[37,27,25,33,"set"],[37,30,25,36],[37,31,25,37,"PDFName"],[37,43,25,44],[37,44,25,44,"PDFName"],[37,51,25,44],[37,52,25,45,"of"],[37,54,25,47],[37,55,25,48],[37,62,25,55],[37,63,25,56],[37,65,25,58],[37,69,25,62],[37,70,25,63,"doc"],[37,73,25,66],[37,74,25,67,"context"],[37,81,25,74],[37,82,25,75,"obj"],[37,85,25,78],[37,86,25,79],[37,87,25,80],[37,88,25,81],[37,89,25,82],[37,90,25,83],[38,8,26,12],[39,8,27,12],[39,14,27,18,"Names"],[39,19,27,23],[39,22,27,26],[39,26,27,30],[39,27,27,31,"doc"],[39,30,27,34],[39,31,27,35,"catalog"],[39,38,27,42],[39,39,27,43,"lookup"],[39,45,27,49],[39,46,27,50,"PDFName"],[39,58,27,57],[39,59,27,57,"PDFName"],[39,66,27,57],[39,67,27,58,"of"],[39,69,27,60],[39,70,27,61],[39,77,27,68],[39,78,27,69],[39,80,27,71,"PDFDict"],[39,92,27,78],[39,93,27,78,"PDFDict"],[39,100,27,78],[39,101,27,79],[40,8,28,12],[40,12,28,16],[40,13,28,17,"Names"],[40,18,28,22],[40,19,28,23,"has"],[40,22,28,26],[40,23,28,27,"PDFName"],[40,35,28,34],[40,36,28,34,"PDFName"],[40,43,28,34],[40,44,28,35,"of"],[40,46,28,37],[40,47,28,38],[40,62,28,53],[40,63,28,54],[40,64,28,55],[40,66,28,57],[41,10,29,16,"Names"],[41,15,29,21],[41,16,29,22,"set"],[41,19,29,25],[41,20,29,26,"PDFName"],[41,32,29,33],[41,33,29,33,"PDFName"],[41,40,29,33],[41,41,29,34,"of"],[41,43,29,36],[41,44,29,37],[41,59,29,52],[41,60,29,53],[41,62,29,55],[41,66,29,59],[41,67,29,60,"doc"],[41,70,29,63],[41,71,29,64,"context"],[41,78,29,71],[41,79,29,72,"obj"],[41,82,29,75],[41,83,29,76],[41,84,29,77],[41,85,29,78],[41,86,29,79],[41,87,29,80],[42,8,30,12],[43,8,31,12],[43,14,31,18,"EmbeddedFiles"],[43,27,31,31],[43,30,31,34,"Names"],[43,35,31,39],[43,36,31,40,"lookup"],[43,42,31,46],[43,43,31,47,"PDFName"],[43,55,31,54],[43,56,31,54,"PDFName"],[43,63,31,54],[43,64,31,55,"of"],[43,66,31,57],[43,67,31,58],[43,82,31,73],[43,83,31,74],[43,85,31,76,"PDFDict"],[43,97,31,83],[43,98,31,83,"PDFDict"],[43,105,31,83],[43,106,31,84],[44,8,32,12],[44,12,32,16],[44,13,32,17,"EmbeddedFiles"],[44,26,32,30],[44,27,32,31,"has"],[44,30,32,34],[44,31,32,35,"PDFName"],[44,43,32,42],[44,44,32,42,"PDFName"],[44,51,32,42],[44,52,32,43,"of"],[44,54,32,45],[44,55,32,46],[44,62,32,53],[44,63,32,54],[44,64,32,55],[44,66,32,57],[45,10,33,16,"EmbeddedFiles"],[45,23,33,29],[45,24,33,30,"set"],[45,27,33,33],[45,28,33,34,"PDFName"],[45,40,33,41],[45,41,33,41,"PDFName"],[45,48,33,41],[45,49,33,42,"of"],[45,51,33,44],[45,52,33,45],[45,59,33,52],[45,60,33,53],[45,62,33,55],[45,66,33,59],[45,67,33,60,"doc"],[45,70,33,63],[45,71,33,64,"context"],[45,78,33,71],[45,79,33,72,"obj"],[45,82,33,75],[45,83,33,76],[45,85,33,78],[45,86,33,79],[45,87,33,80],[46,8,34,12],[47,8,35,12],[47,14,35,18,"EFNames"],[47,21,35,25],[47,24,35,28,"EmbeddedFiles"],[47,37,35,41],[47,38,35,42,"lookup"],[47,44,35,48],[47,45,35,49,"PDFName"],[47,57,35,56],[47,58,35,56,"PDFName"],[47,65,35,56],[47,66,35,57,"of"],[47,68,35,59],[47,69,35,60],[47,76,35,67],[47,77,35,68],[47,79,35,70,"PDFArray"],[47,91,35,78],[47,92,35,78,"PDFArray"],[47,100,35,78],[47,101,35,79],[48,8,36,12,"EFNames"],[48,15,36,19],[48,16,36,20,"push"],[48,20,36,24],[48,21,36,25,"PDFHexString"],[48,33,36,37],[48,34,36,37,"PDFHexString"],[48,46,36,37],[48,47,36,38,"fromText"],[48,55,36,46],[48,56,36,47],[48,60,36,51],[48,61,36,52,"embedder"],[48,69,36,60],[48,70,36,61,"fileName"],[48,78,36,69],[48,79,36,70],[48,80,36,71],[49,8,37,12,"EFNames"],[49,15,37,19],[49,16,37,20,"push"],[49,20,37,24],[49,21,37,25,"ref"],[49,24,37,28],[49,25,37,29],[50,8,38,12],[51,0,39,0],[52,0,40,0],[53,0,41,0],[54,0,42,0],[55,0,43,0],[56,0,44,0],[57,8,45,12],[57,12,45,16],[57,13,45,17],[57,17,45,21],[57,18,45,22,"doc"],[57,21,45,25],[57,22,45,26,"catalog"],[57,29,45,33],[57,30,45,34,"has"],[57,33,45,37],[57,34,45,38,"PDFName"],[57,46,45,45],[57,47,45,45,"PDFName"],[57,54,45,45],[57,55,45,46,"of"],[57,57,45,48],[57,58,45,49],[57,62,45,53],[57,63,45,54],[57,64,45,55],[57,66,45,57],[58,10,46,16],[58,14,46,20],[58,15,46,21,"doc"],[58,18,46,24],[58,19,46,25,"catalog"],[58,26,46,32],[58,27,46,33,"set"],[58,30,46,36],[58,31,46,37,"PDFName"],[58,43,46,44],[58,44,46,44,"PDFName"],[58,51,46,44],[58,52,46,45,"of"],[58,54,46,47],[58,55,46,48],[58,59,46,52],[58,60,46,53],[58,62,46,55],[58,66,46,59],[58,67,46,60,"doc"],[58,70,46,63],[58,71,46,64,"context"],[58,78,46,71],[58,79,46,72,"obj"],[58,82,46,75],[58,83,46,76],[58,85,46,78],[58,86,46,79],[58,87,46,80],[59,8,47,12],[60,8,48,12],[60,14,48,18,"AF"],[60,16,48,20],[60,19,48,23],[60,23,48,27],[60,24,48,28,"doc"],[60,27,48,31],[60,28,48,32,"catalog"],[60,35,48,39],[60,36,48,40,"lookup"],[60,42,48,46],[60,43,48,47,"PDFName"],[60,55,48,54],[60,56,48,54,"PDFName"],[60,63,48,54],[60,64,48,55,"of"],[60,66,48,57],[60,67,48,58],[60,71,48,62],[60,72,48,63],[60,74,48,65,"PDFArray"],[60,86,48,73],[60,87,48,73,"PDFArray"],[60,95,48,73],[60,96,48,74],[61,8,49,12,"AF"],[61,10,49,14],[61,11,49,15,"push"],[61,15,49,19],[61,16,49,20,"ref"],[61,19,49,23],[61,20,49,24],[62,8,50,12],[62,12,50,16],[62,13,50,17,"alreadyEmbedded"],[62,28,50,32],[62,31,50,35],[62,35,50,39],[63,6,51,8],[64,4,52,4],[65,2,53,0],[66,2,54,0],[67,0,55,0],[68,0,56,0],[69,0,57,0],[70,0,58,0],[71,0,59,0],[72,0,60,0],[73,0,61,0],[74,0,62,0],[75,0,63,0],[76,0,64,0],[77,2,65,0,"PDFEmbeddedFile"],[77,17,65,15],[77,18,65,16,"of"],[77,20,65,18],[77,23,65,21],[77,24,65,22,"ref"],[77,27,65,25],[77,29,65,27,"doc"],[77,32,65,30],[77,34,65,32,"embedder"],[77,42,65,40],[77,47,65,45],[77,51,65,49,"PDFEmbeddedFile"],[77,66,65,64],[77,67,65,65,"ref"],[77,70,65,68],[77,72,65,70,"doc"],[77,75,65,73],[77,77,65,75,"embedder"],[77,85,65,83],[77,86,65,84],[78,0,65,85],[78,3]],"functionMap":{"names":["<global>","PDFEmbeddedFile","constructor","embed","of"],"mappings":"AAA;eCI;ICC;KDK;IEU;KF+B;CDC;qBIY,+DJ"},"hasCjsExports":false},"type":"js/module"}]}