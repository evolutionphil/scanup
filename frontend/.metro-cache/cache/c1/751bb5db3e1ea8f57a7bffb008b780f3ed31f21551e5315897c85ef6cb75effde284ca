{"dependencies":[{"name":"@pdf-lib/standard-fonts","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":70,"index":70}}],"key":"lC8Me21xtqg2NZO1cY7jWtphvKQ=","exportNames":["*"],"imports":1}},{"name":"../objects/PDFHexString.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":71},"end":{"line":2,"column":54,"index":125}}],"key":"6YgZriOXHpqHcpt3Yy3oAwRvFRA=","exportNames":["*"],"imports":1}},{"name":"../../utils/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":64,"index":190}}],"key":"AUCnYNcCot7PlCuuOg5nVchJREc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _pdfLibStandardFonts = require(_dependencyMap[0], \"@pdf-lib/standard-fonts\");\n  var _objectsPDFHexStringJs = require(_dependencyMap[1], \"../objects/PDFHexString.js\");\n  var PDFHexString = _interopDefault(_objectsPDFHexStringJs);\n  var _utilsIndexJs = require(_dependencyMap[2], \"../../utils/index.js\");\n  /**\n   * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n   * this class borrows from:\n   *   https://github.com/foliojs/pdfkit/blob/f91bdd61c164a72ea06be1a43dc0a412afc3925f/lib/font/afm.coffee\n   */\n  class StandardFontEmbedder {\n    constructor(fontName, customName) {\n      // prettier-ignore\n      this.encoding = fontName === _pdfLibStandardFonts.FontNames.ZapfDingbats ? _pdfLibStandardFonts.Encodings.ZapfDingbats : fontName === _pdfLibStandardFonts.FontNames.Symbol ? _pdfLibStandardFonts.Encodings.Symbol : _pdfLibStandardFonts.Encodings.WinAnsi;\n      this.font = _pdfLibStandardFonts.Font.load(fontName);\n      this.fontName = this.font.FontName;\n      this.customName = customName;\n    }\n    /**\n     * Encode the JavaScript string into this font. (JavaScript encodes strings in\n     * Unicode, but standard fonts use either WinAnsi, ZapfDingbats, or Symbol\n     * encodings)\n     */\n    encodeText(text) {\n      const glyphs = this.encodeTextAsGlyphs(text);\n      const hexCodes = new Array(glyphs.length);\n      for (let idx = 0, len = glyphs.length; idx < len; idx++) {\n        hexCodes[idx] = (0, _utilsIndexJs.toHexString)(glyphs[idx].code);\n      }\n      return PDFHexString.default.of(hexCodes.join(''));\n    }\n    widthOfTextAtSize(text, size) {\n      const glyphs = this.encodeTextAsGlyphs(text);\n      let totalWidth = 0;\n      for (let idx = 0, len = glyphs.length; idx < len; idx++) {\n        const left = glyphs[idx].name;\n        const right = (glyphs[idx + 1] || {}).name;\n        const kernAmount = this.font.getXAxisKerningForPair(left, right) || 0;\n        totalWidth += this.widthOfGlyph(left) + kernAmount;\n      }\n      const scale = size / 1000;\n      return totalWidth * scale;\n    }\n    heightOfFontAtSize(size, options = {}) {\n      const {\n        descender = true\n      } = options;\n      const {\n        Ascender,\n        Descender,\n        FontBBox\n      } = this.font;\n      const yTop = Ascender || FontBBox[3];\n      const yBottom = Descender || FontBBox[1];\n      let height = yTop - yBottom;\n      if (!descender) height += Descender || 0;\n      return height / 1000 * size;\n    }\n    sizeOfFontAtHeight(height) {\n      const {\n        Ascender,\n        Descender,\n        FontBBox\n      } = this.font;\n      const yTop = Ascender || FontBBox[3];\n      const yBottom = Descender || FontBBox[1];\n      return 1000 * height / (yTop - yBottom);\n    }\n    embedIntoContext(context, ref) {\n      const fontDict = context.obj({\n        Type: 'Font',\n        Subtype: 'Type1',\n        BaseFont: this.customName || this.fontName,\n        Encoding: this.encoding === _pdfLibStandardFonts.Encodings.WinAnsi ? 'WinAnsiEncoding' : undefined\n      });\n      if (ref) {\n        context.assign(ref, fontDict);\n        return ref;\n      } else {\n        return context.register(fontDict);\n      }\n    }\n    widthOfGlyph(glyphName) {\n      // Default to 250 if font doesn't specify a width\n      return this.font.getWidthOfGlyph(glyphName) || 250;\n    }\n    encodeTextAsGlyphs(text) {\n      const codePoints = Array.from(text);\n      const glyphs = new Array(codePoints.length);\n      for (let idx = 0, len = codePoints.length; idx < len; idx++) {\n        const codePoint = (0, _utilsIndexJs.toCodePoint)(codePoints[idx]);\n        glyphs[idx] = this.encoding.encodeUnicodeCodePoint(codePoint);\n      }\n      return glyphs;\n    }\n  }\n  StandardFontEmbedder.for = (fontName, customName) => new StandardFontEmbedder(fontName, customName);\n  var _default = StandardFontEmbedder;\n});","lineCount":115,"map":[[12,2,90,0,"Object"],[12,8,90,0],[12,9,90,0,"defineProperty"],[12,23,90,0],[12,24,90,0,"exports"],[12,31,90,0],[13,4,90,0,"enumerable"],[13,14,90,0],[14,4,90,0,"get"],[14,7,90,0],[14,18,90,0,"get"],[14,19,90,0],[15,6,90,0],[15,13,90,0,"_default"],[15,21,90,0],[16,4,90,0],[17,2,90,0],[18,2,1,0],[18,6,1,0,"_pdfLibStandardFonts"],[18,26,1,0],[18,29,1,0,"require"],[18,36,1,0],[18,37,1,0,"_dependencyMap"],[18,51,1,0],[19,2,2,0],[19,6,2,0,"_objectsPDFHexStringJs"],[19,28,2,0],[19,31,2,0,"require"],[19,38,2,0],[19,39,2,0,"_dependencyMap"],[19,53,2,0],[20,2,2,0],[20,6,2,0,"PDFHexString"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_objectsPDFHexStringJs"],[20,59,2,0],[21,2,3,0],[21,6,3,0,"_utilsIndexJs"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,2,9,0],[27,8,9,6,"StandardFontEmbedder"],[27,28,9,26],[27,29,9,27],[28,4,10,4,"constructor"],[28,15,10,15,"constructor"],[28,16,10,16,"fontName"],[28,24,10,24],[28,26,10,26,"customName"],[28,36,10,36],[28,38,10,38],[29,6,11,8],[30,6,12,8],[30,10,12,12],[30,11,12,13,"encoding"],[30,19,12,21],[30,22,12,25,"fontName"],[30,30,12,33],[30,35,12,38,"FontNames"],[30,55,12,47],[30,56,12,47,"FontNames"],[30,65,12,47],[30,66,12,48,"ZapfDingbats"],[30,78,12,60],[30,81,12,63,"Encodings"],[30,101,12,72],[30,102,12,72,"Encodings"],[30,111,12,72],[30,112,12,73,"ZapfDingbats"],[30,124,12,85],[30,127,13,14,"fontName"],[30,135,13,22],[30,140,13,27,"FontNames"],[30,160,13,36],[30,161,13,36,"FontNames"],[30,170,13,36],[30,171,13,37,"Symbol"],[30,177,13,43],[30,180,13,46,"Encodings"],[30,200,13,55],[30,201,13,55,"Encodings"],[30,210,13,55],[30,211,13,56,"Symbol"],[30,217,13,62],[30,220,14,18,"Encodings"],[30,240,14,27],[30,241,14,27,"Encodings"],[30,250,14,27],[30,251,14,28,"WinAnsi"],[30,258,14,36],[31,6,15,8],[31,10,15,12],[31,11,15,13,"font"],[31,15,15,17],[31,18,15,20,"Font"],[31,38,15,24],[31,39,15,24,"Font"],[31,43,15,24],[31,44,15,25,"load"],[31,48,15,29],[31,49,15,30,"fontName"],[31,57,15,38],[31,58,15,39],[32,6,16,8],[32,10,16,12],[32,11,16,13,"fontName"],[32,19,16,21],[32,22,16,24],[32,26,16,28],[32,27,16,29,"font"],[32,31,16,33],[32,32,16,34,"FontName"],[32,40,16,42],[33,6,17,8],[33,10,17,12],[33,11,17,13,"customName"],[33,21,17,23],[33,24,17,26,"customName"],[33,34,17,36],[34,4,18,4],[35,4,19,4],[36,0,20,0],[37,0,21,0],[38,0,22,0],[39,0,23,0],[40,4,24,4,"encodeText"],[40,14,24,14,"encodeText"],[40,15,24,15,"text"],[40,19,24,19],[40,21,24,21],[41,6,25,8],[41,12,25,14,"glyphs"],[41,18,25,20],[41,21,25,23],[41,25,25,27],[41,26,25,28,"encodeTextAsGlyphs"],[41,44,25,46],[41,45,25,47,"text"],[41,49,25,51],[41,50,25,52],[42,6,26,8],[42,12,26,14,"hexCodes"],[42,20,26,22],[42,23,26,25],[42,27,26,29,"Array"],[42,32,26,34],[42,33,26,35,"glyphs"],[42,39,26,41],[42,40,26,42,"length"],[42,46,26,48],[42,47,26,49],[43,6,27,8],[43,11,27,13],[43,15,27,17,"idx"],[43,18,27,20],[43,21,27,23],[43,22,27,24],[43,24,27,26,"len"],[43,27,27,29],[43,30,27,32,"glyphs"],[43,36,27,38],[43,37,27,39,"length"],[43,43,27,45],[43,45,27,47,"idx"],[43,48,27,50],[43,51,27,53,"len"],[43,54,27,56],[43,56,27,58,"idx"],[43,59,27,61],[43,61,27,63],[43,63,27,65],[44,8,28,12,"hexCodes"],[44,16,28,20],[44,17,28,21,"idx"],[44,20,28,24],[44,21,28,25],[44,24,28,28],[44,28,28,28,"toHexString"],[44,41,28,39],[44,42,28,39,"toHexString"],[44,53,28,39],[44,55,28,40,"glyphs"],[44,61,28,46],[44,62,28,47,"idx"],[44,65,28,50],[44,66,28,51],[44,67,28,52,"code"],[44,71,28,56],[44,72,28,57],[45,6,29,8],[46,6,30,8],[46,13,30,15,"PDFHexString"],[46,25,30,27],[46,26,30,27,"default"],[46,33,30,27],[46,34,30,28,"of"],[46,36,30,30],[46,37,30,31,"hexCodes"],[46,45,30,39],[46,46,30,40,"join"],[46,50,30,44],[46,51,30,45],[46,53,30,47],[46,54,30,48],[46,55,30,49],[47,4,31,4],[48,4,32,4,"widthOfTextAtSize"],[48,21,32,21,"widthOfTextAtSize"],[48,22,32,22,"text"],[48,26,32,26],[48,28,32,28,"size"],[48,32,32,32],[48,34,32,34],[49,6,33,8],[49,12,33,14,"glyphs"],[49,18,33,20],[49,21,33,23],[49,25,33,27],[49,26,33,28,"encodeTextAsGlyphs"],[49,44,33,46],[49,45,33,47,"text"],[49,49,33,51],[49,50,33,52],[50,6,34,8],[50,10,34,12,"totalWidth"],[50,20,34,22],[50,23,34,25],[50,24,34,26],[51,6,35,8],[51,11,35,13],[51,15,35,17,"idx"],[51,18,35,20],[51,21,35,23],[51,22,35,24],[51,24,35,26,"len"],[51,27,35,29],[51,30,35,32,"glyphs"],[51,36,35,38],[51,37,35,39,"length"],[51,43,35,45],[51,45,35,47,"idx"],[51,48,35,50],[51,51,35,53,"len"],[51,54,35,56],[51,56,35,58,"idx"],[51,59,35,61],[51,61,35,63],[51,63,35,65],[52,8,36,12],[52,14,36,18,"left"],[52,18,36,22],[52,21,36,25,"glyphs"],[52,27,36,31],[52,28,36,32,"idx"],[52,31,36,35],[52,32,36,36],[52,33,36,37,"name"],[52,37,36,41],[53,8,37,12],[53,14,37,18,"right"],[53,19,37,23],[53,22,37,26],[53,23,37,27,"glyphs"],[53,29,37,33],[53,30,37,34,"idx"],[53,33,37,37],[53,36,37,40],[53,37,37,41],[53,38,37,42],[53,42,37,46],[53,43,37,47],[53,44,37,48],[53,46,37,50,"name"],[53,50,37,54],[54,8,38,12],[54,14,38,18,"kernAmount"],[54,24,38,28],[54,27,38,31],[54,31,38,35],[54,32,38,36,"font"],[54,36,38,40],[54,37,38,41,"getXAxisKerningForPair"],[54,59,38,63],[54,60,38,64,"left"],[54,64,38,68],[54,66,38,70,"right"],[54,71,38,75],[54,72,38,76],[54,76,38,80],[54,77,38,81],[55,8,39,12,"totalWidth"],[55,18,39,22],[55,22,39,26],[55,26,39,30],[55,27,39,31,"widthOfGlyph"],[55,39,39,43],[55,40,39,44,"left"],[55,44,39,48],[55,45,39,49],[55,48,39,52,"kernAmount"],[55,58,39,62],[56,6,40,8],[57,6,41,8],[57,12,41,14,"scale"],[57,17,41,19],[57,20,41,22,"size"],[57,24,41,26],[57,27,41,29],[57,31,41,33],[58,6,42,8],[58,13,42,15,"totalWidth"],[58,23,42,25],[58,26,42,28,"scale"],[58,31,42,33],[59,4,43,4],[60,4,44,4,"heightOfFontAtSize"],[60,22,44,22,"heightOfFontAtSize"],[60,23,44,23,"size"],[60,27,44,27],[60,29,44,29,"options"],[60,36,44,36],[60,39,44,39],[60,40,44,40],[60,41,44,41],[60,43,44,43],[61,6,45,8],[61,12,45,14],[62,8,45,16,"descender"],[62,17,45,25],[62,20,45,28],[63,6,45,33],[63,7,45,34],[63,10,45,37,"options"],[63,17,45,44],[64,6,46,8],[64,12,46,14],[65,8,46,16,"Ascender"],[65,16,46,24],[66,8,46,26,"Descender"],[66,17,46,35],[67,8,46,37,"FontBBox"],[68,6,46,46],[68,7,46,47],[68,10,46,50],[68,14,46,54],[68,15,46,55,"font"],[68,19,46,59],[69,6,47,8],[69,12,47,14,"yTop"],[69,16,47,18],[69,19,47,21,"Ascender"],[69,27,47,29],[69,31,47,33,"FontBBox"],[69,39,47,41],[69,40,47,42],[69,41,47,43],[69,42,47,44],[70,6,48,8],[70,12,48,14,"yBottom"],[70,19,48,21],[70,22,48,24,"Descender"],[70,31,48,33],[70,35,48,37,"FontBBox"],[70,43,48,45],[70,44,48,46],[70,45,48,47],[70,46,48,48],[71,6,49,8],[71,10,49,12,"height"],[71,16,49,18],[71,19,49,21,"yTop"],[71,23,49,25],[71,26,49,28,"yBottom"],[71,33,49,35],[72,6,50,8],[72,10,50,12],[72,11,50,13,"descender"],[72,20,50,22],[72,22,51,12,"height"],[72,28,51,18],[72,32,51,22,"Descender"],[72,41,51,31],[72,45,51,35],[72,46,51,36],[73,6,52,8],[73,13,52,16,"height"],[73,19,52,22],[73,22,52,25],[73,26,52,29],[73,29,52,33,"size"],[73,33,52,37],[74,4,53,4],[75,4,54,4,"sizeOfFontAtHeight"],[75,22,54,22,"sizeOfFontAtHeight"],[75,23,54,23,"height"],[75,29,54,29],[75,31,54,31],[76,6,55,8],[76,12,55,14],[77,8,55,16,"Ascender"],[77,16,55,24],[78,8,55,26,"Descender"],[78,17,55,35],[79,8,55,37,"FontBBox"],[80,6,55,46],[80,7,55,47],[80,10,55,50],[80,14,55,54],[80,15,55,55,"font"],[80,19,55,59],[81,6,56,8],[81,12,56,14,"yTop"],[81,16,56,18],[81,19,56,21,"Ascender"],[81,27,56,29],[81,31,56,33,"FontBBox"],[81,39,56,41],[81,40,56,42],[81,41,56,43],[81,42,56,44],[82,6,57,8],[82,12,57,14,"yBottom"],[82,19,57,21],[82,22,57,24,"Descender"],[82,31,57,33],[82,35,57,37,"FontBBox"],[82,43,57,45],[82,44,57,46],[82,45,57,47],[82,46,57,48],[83,6,58,8],[83,13,58,16],[83,17,58,20],[83,20,58,23,"height"],[83,26,58,29],[83,30,58,34,"yTop"],[83,34,58,38],[83,37,58,41,"yBottom"],[83,44,58,48],[83,45,58,49],[84,4,59,4],[85,4,60,4,"embedIntoContext"],[85,20,60,20,"embedIntoContext"],[85,21,60,21,"context"],[85,28,60,28],[85,30,60,30,"ref"],[85,33,60,33],[85,35,60,35],[86,6,61,8],[86,12,61,14,"fontDict"],[86,20,61,22],[86,23,61,25,"context"],[86,30,61,32],[86,31,61,33,"obj"],[86,34,61,36],[86,35,61,37],[87,8,62,12,"Type"],[87,12,62,16],[87,14,62,18],[87,20,62,24],[88,8,63,12,"Subtype"],[88,15,63,19],[88,17,63,21],[88,24,63,28],[89,8,64,12,"BaseFont"],[89,16,64,20],[89,18,64,22],[89,22,64,26],[89,23,64,27,"customName"],[89,33,64,37],[89,37,64,41],[89,41,64,45],[89,42,64,46,"fontName"],[89,50,64,54],[90,8,65,12,"Encoding"],[90,16,65,20],[90,18,65,22],[90,22,65,26],[90,23,65,27,"encoding"],[90,31,65,35],[90,36,65,40,"Encodings"],[90,56,65,49],[90,57,65,49,"Encodings"],[90,66,65,49],[90,67,65,50,"WinAnsi"],[90,74,65,57],[90,77,65,60],[90,94,65,77],[90,97,65,80,"undefined"],[91,6,66,8],[91,7,66,9],[91,8,66,10],[92,6,67,8],[92,10,67,12,"ref"],[92,13,67,15],[92,15,67,17],[93,8,68,12,"context"],[93,15,68,19],[93,16,68,20,"assign"],[93,22,68,26],[93,23,68,27,"ref"],[93,26,68,30],[93,28,68,32,"fontDict"],[93,36,68,40],[93,37,68,41],[94,8,69,12],[94,15,69,19,"ref"],[94,18,69,22],[95,6,70,8],[95,7,70,9],[95,13,71,13],[96,8,72,12],[96,15,72,19,"context"],[96,22,72,26],[96,23,72,27,"register"],[96,31,72,35],[96,32,72,36,"fontDict"],[96,40,72,44],[96,41,72,45],[97,6,73,8],[98,4,74,4],[99,4,75,4,"widthOfGlyph"],[99,16,75,16,"widthOfGlyph"],[99,17,75,17,"glyphName"],[99,26,75,26],[99,28,75,28],[100,6,76,8],[101,6,77,8],[101,13,77,15],[101,17,77,19],[101,18,77,20,"font"],[101,22,77,24],[101,23,77,25,"getWidthOfGlyph"],[101,38,77,40],[101,39,77,41,"glyphName"],[101,48,77,50],[101,49,77,51],[101,53,77,55],[101,56,77,58],[102,4,78,4],[103,4,79,4,"encodeTextAsGlyphs"],[103,22,79,22,"encodeTextAsGlyphs"],[103,23,79,23,"text"],[103,27,79,27],[103,29,79,29],[104,6,80,8],[104,12,80,14,"codePoints"],[104,22,80,24],[104,25,80,27,"Array"],[104,30,80,32],[104,31,80,33,"from"],[104,35,80,37],[104,36,80,38,"text"],[104,40,80,42],[104,41,80,43],[105,6,81,8],[105,12,81,14,"glyphs"],[105,18,81,20],[105,21,81,23],[105,25,81,27,"Array"],[105,30,81,32],[105,31,81,33,"codePoints"],[105,41,81,43],[105,42,81,44,"length"],[105,48,81,50],[105,49,81,51],[106,6,82,8],[106,11,82,13],[106,15,82,17,"idx"],[106,18,82,20],[106,21,82,23],[106,22,82,24],[106,24,82,26,"len"],[106,27,82,29],[106,30,82,32,"codePoints"],[106,40,82,42],[106,41,82,43,"length"],[106,47,82,49],[106,49,82,51,"idx"],[106,52,82,54],[106,55,82,57,"len"],[106,58,82,60],[106,60,82,62,"idx"],[106,63,82,65],[106,65,82,67],[106,67,82,69],[107,8,83,12],[107,14,83,18,"codePoint"],[107,23,83,27],[107,26,83,30],[107,30,83,30,"toCodePoint"],[107,43,83,41],[107,44,83,41,"toCodePoint"],[107,55,83,41],[107,57,83,42,"codePoints"],[107,67,83,52],[107,68,83,53,"idx"],[107,71,83,56],[107,72,83,57],[107,73,83,58],[108,8,84,12,"glyphs"],[108,14,84,18],[108,15,84,19,"idx"],[108,18,84,22],[108,19,84,23],[108,22,84,26],[108,26,84,30],[108,27,84,31,"encoding"],[108,35,84,39],[108,36,84,40,"encodeUnicodeCodePoint"],[108,58,84,62],[108,59,84,63,"codePoint"],[108,68,84,72],[108,69,84,73],[109,6,85,8],[110,6,86,8],[110,13,86,15,"glyphs"],[110,19,86,21],[111,4,87,4],[112,2,88,0],[113,2,89,0,"StandardFontEmbedder"],[113,22,89,20],[113,23,89,21,"for"],[113,26,89,24],[113,29,89,27],[113,30,89,28,"fontName"],[113,38,89,36],[113,40,89,38,"customName"],[113,50,89,48],[113,55,89,53],[113,59,89,57,"StandardFontEmbedder"],[113,79,89,77],[113,80,89,78,"fontName"],[113,88,89,86],[113,90,89,88,"customName"],[113,100,89,98],[113,101,89,99],[114,2,90,0],[114,6,90,0,"_default"],[114,14,90,0],[114,17,90,15,"StandardFontEmbedder"],[114,37,90,35],[115,0,90,36],[115,3]],"functionMap":{"names":["<global>","StandardFontEmbedder","constructor","encodeText","widthOfTextAtSize","heightOfFontAtSize","sizeOfFontAtHeight","embedIntoContext","widthOfGlyph","encodeTextAsGlyphs","_for"],"mappings":"AAA;ACQ;ICC;KDQ;IEM;KFO;IGC;KHW;IIC;KJS;IKC;KLK;IMC;KNc;IOC;KPG;IQC;KRQ;CDC;2BUC,wEV"},"hasCjsExports":false},"type":"js/module"}]}