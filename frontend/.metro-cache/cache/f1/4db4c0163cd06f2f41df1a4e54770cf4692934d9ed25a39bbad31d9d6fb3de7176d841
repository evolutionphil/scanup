{"dependencies":[{"name":"./DecodeStream.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"C/oJ0k7XQ3jAGDeWWv3yHXara3I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _DecodeStreamJs = require(_dependencyMap[0], \"./DecodeStream.js\");\n  var DecodeStream = _interopDefault(_DecodeStreamJs);\n  const chunkSize = 512;\n  class DecryptStream extends DecodeStream.default {\n    constructor(stream, decrypt, maybeLength) {\n      super(maybeLength);\n      this.stream = stream;\n      this.decrypt = decrypt;\n      this.nextChunk = null;\n      this.initialized = false;\n    }\n    readBlock() {\n      let chunk;\n      if (this.initialized) {\n        chunk = this.nextChunk;\n      } else {\n        chunk = this.stream.getBytes(chunkSize);\n        this.initialized = true;\n      }\n      if (!chunk || chunk.length === 0) {\n        this.eof = true;\n        return;\n      }\n      this.nextChunk = this.stream.getBytes(chunkSize);\n      const hasMoreData = this.nextChunk && this.nextChunk.length > 0;\n      const decrypt = this.decrypt;\n      chunk = decrypt(chunk, !hasMoreData);\n      const bufferLength = this.bufferLength,\n        newLength = bufferLength + chunk.length,\n        buffer = this.ensureBuffer(newLength);\n      buffer.set(chunk, bufferLength);\n      this.bufferLength = newLength;\n    }\n  }\n  var _default = DecryptStream;\n});","lineCount":53,"map":[[12,2,33,0,"Object"],[12,8,33,0],[12,9,33,0,"defineProperty"],[12,23,33,0],[12,24,33,0,"exports"],[12,31,33,0],[13,4,33,0,"enumerable"],[13,14,33,0],[14,4,33,0,"get"],[14,7,33,0],[14,18,33,0,"get"],[14,19,33,0],[15,6,33,0],[15,13,33,0,"_default"],[15,21,33,0],[16,4,33,0],[17,2,33,0],[18,2,1,0],[18,6,1,0,"_DecodeStreamJs"],[18,21,1,0],[18,24,1,0,"require"],[18,31,1,0],[18,32,1,0,"_dependencyMap"],[18,46,1,0],[19,2,1,0],[19,6,1,0,"DecodeStream"],[19,18,1,0],[19,21,1,0,"_interopDefault"],[19,36,1,0],[19,37,1,0,"_DecodeStreamJs"],[19,52,1,0],[20,2,2,0],[20,8,2,6,"chunkSize"],[20,17,2,15],[20,20,2,18],[20,23,2,21],[21,2,3,0],[21,8,3,6,"DecryptStream"],[21,21,3,19],[21,30,3,28,"DecodeStream"],[21,42,3,40],[21,43,3,40,"default"],[21,50,3,40],[21,51,3,41],[22,4,4,4,"constructor"],[22,15,4,15,"constructor"],[22,16,4,16,"stream"],[22,22,4,22],[22,24,4,24,"decrypt"],[22,31,4,31],[22,33,4,33,"maybeLength"],[22,44,4,44],[22,46,4,46],[23,6,5,8],[23,11,5,13],[23,12,5,14,"maybeLength"],[23,23,5,25],[23,24,5,26],[24,6,6,8],[24,10,6,12],[24,11,6,13,"stream"],[24,17,6,19],[24,20,6,22,"stream"],[24,26,6,28],[25,6,7,8],[25,10,7,12],[25,11,7,13,"decrypt"],[25,18,7,20],[25,21,7,23,"decrypt"],[25,28,7,30],[26,6,8,8],[26,10,8,12],[26,11,8,13,"nextChunk"],[26,20,8,22],[26,23,8,25],[26,27,8,29],[27,6,9,8],[27,10,9,12],[27,11,9,13,"initialized"],[27,22,9,24],[27,25,9,27],[27,30,9,32],[28,4,10,4],[29,4,11,4,"readBlock"],[29,13,11,13,"readBlock"],[29,14,11,13],[29,16,11,16],[30,6,12,8],[30,10,12,12,"chunk"],[30,15,12,17],[31,6,13,8],[31,10,13,12],[31,14,13,16],[31,15,13,17,"initialized"],[31,26,13,28],[31,28,13,30],[32,8,14,12,"chunk"],[32,13,14,17],[32,16,14,20],[32,20,14,24],[32,21,14,25,"nextChunk"],[32,30,14,34],[33,6,15,8],[33,7,15,9],[33,13,16,13],[34,8,17,12,"chunk"],[34,13,17,17],[34,16,17,20],[34,20,17,24],[34,21,17,25,"stream"],[34,27,17,31],[34,28,17,32,"getBytes"],[34,36,17,40],[34,37,17,41,"chunkSize"],[34,46,17,50],[34,47,17,51],[35,8,18,12],[35,12,18,16],[35,13,18,17,"initialized"],[35,24,18,28],[35,27,18,31],[35,31,18,35],[36,6,19,8],[37,6,20,8],[37,10,20,12],[37,11,20,13,"chunk"],[37,16,20,18],[37,20,20,22,"chunk"],[37,25,20,27],[37,26,20,28,"length"],[37,32,20,34],[37,37,20,39],[37,38,20,40],[37,40,20,42],[38,8,21,12],[38,12,21,16],[38,13,21,17,"eof"],[38,16,21,20],[38,19,21,23],[38,23,21,27],[39,8,22,12],[40,6,23,8],[41,6,24,8],[41,10,24,12],[41,11,24,13,"nextChunk"],[41,20,24,22],[41,23,24,25],[41,27,24,29],[41,28,24,30,"stream"],[41,34,24,36],[41,35,24,37,"getBytes"],[41,43,24,45],[41,44,24,46,"chunkSize"],[41,53,24,55],[41,54,24,56],[42,6,25,8],[42,12,25,14,"hasMoreData"],[42,23,25,25],[42,26,25,28],[42,30,25,32],[42,31,25,33,"nextChunk"],[42,40,25,42],[42,44,25,46],[42,48,25,50],[42,49,25,51,"nextChunk"],[42,58,25,60],[42,59,25,61,"length"],[42,65,25,67],[42,68,25,70],[42,69,25,71],[43,6,26,8],[43,12,26,14,"decrypt"],[43,19,26,21],[43,22,26,24],[43,26,26,28],[43,27,26,29,"decrypt"],[43,34,26,36],[44,6,27,8,"chunk"],[44,11,27,13],[44,14,27,16,"decrypt"],[44,21,27,23],[44,22,27,24,"chunk"],[44,27,27,29],[44,29,27,31],[44,30,27,32,"hasMoreData"],[44,41,27,43],[44,42,27,44],[45,6,28,8],[45,12,28,14,"bufferLength"],[45,24,28,26],[45,27,28,29],[45,31,28,33],[45,32,28,34,"bufferLength"],[45,44,28,46],[46,8,28,48,"newLength"],[46,17,28,57],[46,20,28,60,"bufferLength"],[46,32,28,72],[46,35,28,75,"chunk"],[46,40,28,80],[46,41,28,81,"length"],[46,47,28,87],[47,8,28,89,"buffer"],[47,14,28,95],[47,17,28,98],[47,21,28,102],[47,22,28,103,"ensureBuffer"],[47,34,28,115],[47,35,28,116,"newLength"],[47,44,28,125],[47,45,28,126],[48,6,29,8,"buffer"],[48,12,29,14],[48,13,29,15,"set"],[48,16,29,18],[48,17,29,19,"chunk"],[48,22,29,24],[48,24,29,26,"bufferLength"],[48,36,29,38],[48,37,29,39],[49,6,30,8],[49,10,30,12],[49,11,30,13,"bufferLength"],[49,23,30,25],[49,26,30,28,"newLength"],[49,35,30,37],[50,4,31,4],[51,2,32,0],[52,2,33,0],[52,6,33,0,"_default"],[52,14,33,0],[52,17,33,15,"DecryptStream"],[52,30,33,28],[53,0,33,29],[53,3]],"functionMap":{"names":["<global>","DecryptStream","constructor","readBlock"],"mappings":"AAA;ACE;ICC;KDM;IEC;KFoB;CDC"},"hasCjsExports":false},"type":"js/module"}]}