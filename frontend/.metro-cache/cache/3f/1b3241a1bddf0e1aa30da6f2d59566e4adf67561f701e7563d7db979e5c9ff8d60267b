{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  /* -*- Mode: js; js-indent-level: 2; -*- */\n  /*\n   * Copyright 2011 Mozilla Foundation and contributors\n   * Licensed under the New BSD license. See LICENSE or:\n   * http://opensource.org/licenses/BSD-3-Clause\n   */\n\n  // It turns out that some (most?) JavaScript engines don't self-host\n  // `Array.prototype.sort`. This makes sense because C++ will likely remain\n  // faster than JS when doing raw CPU-intensive sorting. However, when using a\n  // custom comparator function, calling back and forth between the VM's C++ and\n  // JIT'd JS is rather slow *and* loses JIT type information, resulting in\n  // worse generated code for the comparator function than would be optimal. In\n  // fact, when sorting with a comparator, these costs outweigh the benefits of\n  // sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n  // a ~3500ms mean speed-up in `bench/bench.html`.\n\n  /**\n   * Swap the elements indexed by `x` and `y` in the array `ary`.\n   *\n   * @param {Array} ary\n   *        The array.\n   * @param {Number} x\n   *        The index of the first item.\n   * @param {Number} y\n   *        The index of the second item.\n   */\n  function swap(ary, x, y) {\n    var temp = ary[x];\n    ary[x] = ary[y];\n    ary[y] = temp;\n  }\n\n  /**\n   * Returns a random integer within the range `low .. high` inclusive.\n   *\n   * @param {Number} low\n   *        The lower bound on the range.\n   * @param {Number} high\n   *        The upper bound on the range.\n   */\n  function randomIntInRange(low, high) {\n    return Math.round(low + Math.random() * (high - low));\n  }\n\n  /**\n   * The Quick Sort algorithm.\n   *\n   * @param {Array} ary\n   *        An array to sort.\n   * @param {function} comparator\n   *        Function to use to compare two items.\n   * @param {Number} p\n   *        Start index of the array\n   * @param {Number} r\n   *        End index of the array\n   */\n  function doQuickSort(ary, comparator, p, r) {\n    // If our lower bound is less than our upper bound, we (1) partition the\n    // array into two pieces and (2) recurse on each half. If it is not, this is\n    // the empty array and our base case.\n\n    if (p < r) {\n      // (1) Partitioning.\n      //\n      // The partitioning chooses a pivot between `p` and `r` and moves all\n      // elements that are less than or equal to the pivot to the before it, and\n      // all the elements that are greater than it after it. The effect is that\n      // once partition is done, the pivot is in the exact place it will be when\n      // the array is put in sorted order, and it will not need to be moved\n      // again. This runs in O(n) time.\n\n      // Always choose a random pivot so that an input array which is reverse\n      // sorted does not cause O(n^2) running time.\n      var pivotIndex = randomIntInRange(p, r);\n      var i = p - 1;\n      swap(ary, pivotIndex, r);\n      var pivot = ary[r];\n\n      // Immediately after `j` is incremented in this loop, the following hold\n      // true:\n      //\n      //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n      //\n      //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n      for (var j = p; j < r; j++) {\n        if (comparator(ary[j], pivot) <= 0) {\n          i += 1;\n          swap(ary, i, j);\n        }\n      }\n      swap(ary, i + 1, j);\n      var q = i + 1;\n\n      // (2) Recurse on each half.\n\n      doQuickSort(ary, comparator, p, q - 1);\n      doQuickSort(ary, comparator, q + 1, r);\n    }\n  }\n\n  /**\n   * Sort the given array in-place with the given comparator function.\n   *\n   * @param {Array} ary\n   *        An array to sort.\n   * @param {function} comparator\n   *        Function to use to compare two items.\n   */\n  exports.quickSort = function (ary, comparator) {\n    doQuickSort(ary, comparator, 0, ary.length - 1);\n  };\n});","lineCount":114,"map":[[2,2,1,0],[3,2,2,0],[4,0,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[9,2,8,0],[10,2,9,0],[11,2,10,0],[12,2,11,0],[13,2,12,0],[14,2,13,0],[15,2,14,0],[16,2,15,0],[17,2,16,0],[19,2,18,0],[20,0,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,0,24,0],[26,0,25,0],[27,0,26,0],[28,0,27,0],[29,2,28,0],[29,11,28,9,"swap"],[29,15,28,13,"swap"],[29,16,28,14,"ary"],[29,19,28,17],[29,21,28,19,"x"],[29,22,28,20],[29,24,28,22,"y"],[29,25,28,23],[29,27,28,25],[30,4,29,2],[30,8,29,6,"temp"],[30,12,29,10],[30,15,29,13,"ary"],[30,18,29,16],[30,19,29,17,"x"],[30,20,29,18],[30,21,29,19],[31,4,30,2,"ary"],[31,7,30,5],[31,8,30,6,"x"],[31,9,30,7],[31,10,30,8],[31,13,30,11,"ary"],[31,16,30,14],[31,17,30,15,"y"],[31,18,30,16],[31,19,30,17],[32,4,31,2,"ary"],[32,7,31,5],[32,8,31,6,"y"],[32,9,31,7],[32,10,31,8],[32,13,31,11,"temp"],[32,17,31,15],[33,2,32,0],[35,2,34,0],[36,0,35,0],[37,0,36,0],[38,0,37,0],[39,0,38,0],[40,0,39,0],[41,0,40,0],[42,0,41,0],[43,2,42,0],[43,11,42,9,"randomIntInRange"],[43,27,42,25,"randomIntInRange"],[43,28,42,26,"low"],[43,31,42,29],[43,33,42,31,"high"],[43,37,42,35],[43,39,42,37],[44,4,43,2],[44,11,43,9,"Math"],[44,15,43,13],[44,16,43,14,"round"],[44,21,43,19],[44,22,43,20,"low"],[44,25,43,23],[44,28,43,27,"Math"],[44,32,43,31],[44,33,43,32,"random"],[44,39,43,38],[44,40,43,39],[44,41,43,40],[44,45,43,44,"high"],[44,49,43,48],[44,52,43,51,"low"],[44,55,43,54],[44,56,43,56],[44,57,43,57],[45,2,44,0],[47,2,46,0],[48,0,47,0],[49,0,48,0],[50,0,49,0],[51,0,50,0],[52,0,51,0],[53,0,52,0],[54,0,53,0],[55,0,54,0],[56,0,55,0],[57,0,56,0],[58,0,57,0],[59,2,58,0],[59,11,58,9,"doQuickSort"],[59,22,58,20,"doQuickSort"],[59,23,58,21,"ary"],[59,26,58,24],[59,28,58,26,"comparator"],[59,38,58,36],[59,40,58,38,"p"],[59,41,58,39],[59,43,58,41,"r"],[59,44,58,42],[59,46,58,44],[60,4,59,2],[61,4,60,2],[62,4,61,2],[64,4,63,2],[64,8,63,6,"p"],[64,9,63,7],[64,12,63,10,"r"],[64,13,63,11],[64,15,63,13],[65,6,64,4],[66,6,65,4],[67,6,66,4],[68,6,67,4],[69,6,68,4],[70,6,69,4],[71,6,70,4],[72,6,71,4],[74,6,73,4],[75,6,74,4],[76,6,75,4],[76,10,75,8,"pivotIndex"],[76,20,75,18],[76,23,75,21,"randomIntInRange"],[76,39,75,37],[76,40,75,38,"p"],[76,41,75,39],[76,43,75,41,"r"],[76,44,75,42],[76,45,75,43],[77,6,76,4],[77,10,76,8,"i"],[77,11,76,9],[77,14,76,12,"p"],[77,15,76,13],[77,18,76,16],[77,19,76,17],[78,6,78,4,"swap"],[78,10,78,8],[78,11,78,9,"ary"],[78,14,78,12],[78,16,78,14,"pivotIndex"],[78,26,78,24],[78,28,78,26,"r"],[78,29,78,27],[78,30,78,28],[79,6,79,4],[79,10,79,8,"pivot"],[79,15,79,13],[79,18,79,16,"ary"],[79,21,79,19],[79,22,79,20,"r"],[79,23,79,21],[79,24,79,22],[81,6,81,4],[82,6,82,4],[83,6,83,4],[84,6,84,4],[85,6,85,4],[86,6,86,4],[87,6,87,4],[87,11,87,9],[87,15,87,13,"j"],[87,16,87,14],[87,19,87,17,"p"],[87,20,87,18],[87,22,87,20,"j"],[87,23,87,21],[87,26,87,24,"r"],[87,27,87,25],[87,29,87,27,"j"],[87,30,87,28],[87,32,87,30],[87,34,87,32],[88,8,88,6],[88,12,88,10,"comparator"],[88,22,88,20],[88,23,88,21,"ary"],[88,26,88,24],[88,27,88,25,"j"],[88,28,88,26],[88,29,88,27],[88,31,88,29,"pivot"],[88,36,88,34],[88,37,88,35],[88,41,88,39],[88,42,88,40],[88,44,88,42],[89,10,89,8,"i"],[89,11,89,9],[89,15,89,13],[89,16,89,14],[90,10,90,8,"swap"],[90,14,90,12],[90,15,90,13,"ary"],[90,18,90,16],[90,20,90,18,"i"],[90,21,90,19],[90,23,90,21,"j"],[90,24,90,22],[90,25,90,23],[91,8,91,6],[92,6,92,4],[93,6,94,4,"swap"],[93,10,94,8],[93,11,94,9,"ary"],[93,14,94,12],[93,16,94,14,"i"],[93,17,94,15],[93,20,94,18],[93,21,94,19],[93,23,94,21,"j"],[93,24,94,22],[93,25,94,23],[94,6,95,4],[94,10,95,8,"q"],[94,11,95,9],[94,14,95,12,"i"],[94,15,95,13],[94,18,95,16],[94,19,95,17],[96,6,97,4],[98,6,99,4,"doQuickSort"],[98,17,99,15],[98,18,99,16,"ary"],[98,21,99,19],[98,23,99,21,"comparator"],[98,33,99,31],[98,35,99,33,"p"],[98,36,99,34],[98,38,99,36,"q"],[98,39,99,37],[98,42,99,40],[98,43,99,41],[98,44,99,42],[99,6,100,4,"doQuickSort"],[99,17,100,15],[99,18,100,16,"ary"],[99,21,100,19],[99,23,100,21,"comparator"],[99,33,100,31],[99,35,100,33,"q"],[99,36,100,34],[99,39,100,37],[99,40,100,38],[99,42,100,40,"r"],[99,43,100,41],[99,44,100,42],[100,4,101,2],[101,2,102,0],[103,2,104,0],[104,0,105,0],[105,0,106,0],[106,0,107,0],[107,0,108,0],[108,0,109,0],[109,0,110,0],[110,0,111,0],[111,2,112,0,"exports"],[111,9,112,7],[111,10,112,8,"quickSort"],[111,19,112,17],[111,22,112,20],[111,32,112,30,"ary"],[111,35,112,33],[111,37,112,35,"comparator"],[111,47,112,45],[111,49,112,47],[112,4,113,2,"doQuickSort"],[112,15,113,13],[112,16,113,14,"ary"],[112,19,113,17],[112,21,113,19,"comparator"],[112,31,113,29],[112,33,113,31],[112,34,113,32],[112,36,113,34,"ary"],[112,39,113,37],[112,40,113,38,"length"],[112,46,113,44],[112,49,113,47],[112,50,113,48],[112,51,113,49],[113,2,114,0],[113,3,114,1],[114,0,114,2],[114,3]],"functionMap":{"names":["<global>","swap","randomIntInRange","doQuickSort","exports.quickSort"],"mappings":"AAA;AC2B;CDI;AEU;CFE;AGc;CH4C;oBIU;CJE"},"hasCjsExports":true},"type":"js/module"}]}