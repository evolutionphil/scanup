{"dependencies":[{"name":"./PDFDocument.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"rL88CHLSvTrm6q277pIG25+D/8c=","exportNames":["*"],"imports":1}},{"name":"../core/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":44},"end":{"line":2,"column":69,"index":113}}],"key":"uYibmgiuaz/CrXy37RQIsJGcmz0=","exportNames":["*"],"imports":1}},{"name":"../utils/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":114},"end":{"line":3,"column":45,"index":159}}],"key":"yx9DX+1vet++JoKlU5V/nikNahM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return PDFImage;\n    }\n  });\n  var _PDFDocumentJs = require(_dependencyMap[0], \"./PDFDocument.js\");\n  var PDFDocument = _interopDefault(_PDFDocumentJs);\n  var _coreIndexJs = require(_dependencyMap[1], \"../core/index.js\");\n  var _utilsIndexJs = require(_dependencyMap[2], \"../utils/index.js\");\n  /**\n   * Represents an image that has been embedded in a [[PDFDocument]].\n   */\n  class PDFImage {\n    constructor(ref, doc, embedder) {\n      (0, _utilsIndexJs.assertIs)(ref, 'ref', [[_coreIndexJs.PDFRef, 'PDFRef']]);\n      (0, _utilsIndexJs.assertIs)(doc, 'doc', [[PDFDocument.default, 'PDFDocument']]);\n      (0, _utilsIndexJs.assertIs)(embedder, 'embedder', [[_coreIndexJs.JpegEmbedder, 'JpegEmbedder'], [_coreIndexJs.PngEmbedder, 'PngEmbedder']]);\n      this.ref = ref;\n      this.doc = doc;\n      this.width = embedder.width;\n      this.height = embedder.height;\n      this.embedder = embedder;\n    }\n    /**\n     * Compute the width and height of this image after being scaled by the\n     * given `factor`. For example:\n     * ```js\n     * image.width  // => 500\n     * image.height // => 250\n     *\n     * const scaled = image.scale(0.5)\n     * scaled.width  // => 250\n     * scaled.height // => 125\n     * ```\n     * This operation is often useful before drawing an image with\n     * [[PDFPage.drawImage]] to compute the `width` and `height` options.\n     * @param factor The factor by which this image should be scaled.\n     * @returns The width and height of the image after being scaled.\n     */\n    scale(factor) {\n      (0, _utilsIndexJs.assertIs)(factor, 'factor', ['number']);\n      return {\n        width: this.width * factor,\n        height: this.height * factor\n      };\n    }\n    /**\n     * Get the width and height of this image after scaling it as large as\n     * possible while maintaining its aspect ratio and not exceeding the\n     * specified `width` and `height`. For example:\n     * ```\n     * image.width  // => 500\n     * image.height // => 250\n     *\n     * const scaled = image.scaleToFit(750, 1000)\n     * scaled.width  // => 750\n     * scaled.height // => 375\n     * ```\n     * The `width` and `height` parameters can also be thought of as the width\n     * and height of a box that the scaled image must fit within.\n     * @param width The bounding box's width.\n     * @param height The bounding box's height.\n     * @returns The width and height of the image after being scaled.\n     */\n    scaleToFit(width, height) {\n      (0, _utilsIndexJs.assertIs)(width, 'width', ['number']);\n      (0, _utilsIndexJs.assertIs)(height, 'height', ['number']);\n      const imgWidthScale = width / this.width;\n      const imgHeightScale = height / this.height;\n      const scale = Math.min(imgWidthScale, imgHeightScale);\n      return this.scale(scale);\n    }\n    /**\n     * Get the width and height of this image. For example:\n     * ```js\n     * const { width, height } = image.size()\n     * ```\n     * @returns The width and height of the image.\n     */\n    size() {\n      return this.scale(1);\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all images get embedded.\n     *\n     * Embed this image in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    async embed() {\n      if (!this.embedder) return;\n      // The image should only be embedded once. If there's a pending embed\n      // operation then wait on it. Otherwise we need to start the embed.\n      if (!this.embedTask) {\n        const {\n          doc,\n          ref\n        } = this;\n        this.embedTask = this.embedder.embedIntoContext(doc.context, ref);\n      }\n      await this.embedTask;\n      // We clear `this.embedder` so that the indirectly referenced image data\n      // can be garbage collected, thus avoiding a memory leak.\n      // See https://github.com/Hopding/pdf-lib/pull/1032/files.\n      this.embedder = undefined;\n    }\n  }\n  /**\n   * > **NOTE:** You probably don't want to call this method directly. Instead,\n   * > consider using the [[PDFDocument.embedPng]] and [[PDFDocument.embedJpg]]\n   * > methods, which will create instances of [[PDFImage]] for you.\n   *\n   * Create an instance of [[PDFImage]] from an existing ref and embedder\n   *\n   * @param ref The unique reference for this image.\n   * @param doc The document to which the image will belong.\n   * @param embedder The embedder that will be used to embed the image.\n   */\n  PDFImage.of = (ref, doc, embedder) => new PDFImage(ref, doc, embedder);\n});","lineCount":134,"map":[[12,2,7,15,"Object"],[12,8,7,15],[12,9,7,15,"defineProperty"],[12,23,7,15],[12,24,7,15,"exports"],[12,31,7,15],[13,4,7,15,"enumerable"],[13,14,7,15],[14,4,7,15,"get"],[14,7,7,15],[14,18,7,15,"get"],[14,19,7,15],[15,6,7,15],[15,13,7,15,"PDFImage"],[15,21,7,15],[16,4,7,15],[17,2,7,15],[18,2,1,0],[18,6,1,0,"_PDFDocumentJs"],[18,20,1,0],[18,23,1,0,"require"],[18,30,1,0],[18,31,1,0,"_dependencyMap"],[18,45,1,0],[19,2,1,0],[19,6,1,0,"PDFDocument"],[19,17,1,0],[19,20,1,0,"_interopDefault"],[19,35,1,0],[19,36,1,0,"_PDFDocumentJs"],[19,50,1,0],[20,2,2,0],[20,6,2,0,"_coreIndexJs"],[20,18,2,0],[20,21,2,0,"require"],[20,28,2,0],[20,29,2,0,"_dependencyMap"],[20,43,2,0],[21,2,3,0],[21,6,3,0,"_utilsIndexJs"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,4,0],[23,0,5,0],[24,0,6,0],[25,2,7,15],[25,8,7,21,"PDFImage"],[25,16,7,29],[25,17,7,30],[26,4,8,4,"constructor"],[26,15,8,15,"constructor"],[26,16,8,16,"ref"],[26,19,8,19],[26,21,8,21,"doc"],[26,24,8,24],[26,26,8,26,"embedder"],[26,34,8,34],[26,36,8,36],[27,6,9,8],[27,10,9,8,"assertIs"],[27,23,9,16],[27,24,9,16,"assertIs"],[27,32,9,16],[27,34,9,17,"ref"],[27,37,9,20],[27,39,9,22],[27,44,9,27],[27,46,9,29],[27,47,9,30],[27,48,9,31,"PDFRef"],[27,60,9,37],[27,61,9,37,"PDFRef"],[27,67,9,37],[27,69,9,39],[27,77,9,47],[27,78,9,48],[27,79,9,49],[27,80,9,50],[28,6,10,8],[28,10,10,8,"assertIs"],[28,23,10,16],[28,24,10,16,"assertIs"],[28,32,10,16],[28,34,10,17,"doc"],[28,37,10,20],[28,39,10,22],[28,44,10,27],[28,46,10,29],[28,47,10,30],[28,48,10,31,"PDFDocument"],[28,59,10,42],[28,60,10,42,"default"],[28,67,10,42],[28,69,10,44],[28,82,10,57],[28,83,10,58],[28,84,10,59],[28,85,10,60],[29,6,11,8],[29,10,11,8,"assertIs"],[29,23,11,16],[29,24,11,16,"assertIs"],[29,32,11,16],[29,34,11,17,"embedder"],[29,42,11,25],[29,44,11,27],[29,54,11,37],[29,56,11,39],[29,57,12,12],[29,58,12,13,"JpegEmbedder"],[29,70,12,25],[29,71,12,25,"JpegEmbedder"],[29,83,12,25],[29,85,12,27],[29,99,12,41],[29,100,12,42],[29,102,13,12],[29,103,13,13,"PngEmbedder"],[29,115,13,24],[29,116,13,24,"PngEmbedder"],[29,127,13,24],[29,129,13,26],[29,142,13,39],[29,143,13,40],[29,144,14,9],[29,145,14,10],[30,6,15,8],[30,10,15,12],[30,11,15,13,"ref"],[30,14,15,16],[30,17,15,19,"ref"],[30,20,15,22],[31,6,16,8],[31,10,16,12],[31,11,16,13,"doc"],[31,14,16,16],[31,17,16,19,"doc"],[31,20,16,22],[32,6,17,8],[32,10,17,12],[32,11,17,13,"width"],[32,16,17,18],[32,19,17,21,"embedder"],[32,27,17,29],[32,28,17,30,"width"],[32,33,17,35],[33,6,18,8],[33,10,18,12],[33,11,18,13,"height"],[33,17,18,19],[33,20,18,22,"embedder"],[33,28,18,30],[33,29,18,31,"height"],[33,35,18,37],[34,6,19,8],[34,10,19,12],[34,11,19,13,"embedder"],[34,19,19,21],[34,22,19,24,"embedder"],[34,30,19,32],[35,4,20,4],[36,4,21,4],[37,0,22,0],[38,0,23,0],[39,0,24,0],[40,0,25,0],[41,0,26,0],[42,0,27,0],[43,0,28,0],[44,0,29,0],[45,0,30,0],[46,0,31,0],[47,0,32,0],[48,0,33,0],[49,0,34,0],[50,0,35,0],[51,0,36,0],[52,4,37,4,"scale"],[52,9,37,9,"scale"],[52,10,37,10,"factor"],[52,16,37,16],[52,18,37,18],[53,6,38,8],[53,10,38,8,"assertIs"],[53,23,38,16],[53,24,38,16,"assertIs"],[53,32,38,16],[53,34,38,17,"factor"],[53,40,38,23],[53,42,38,25],[53,50,38,33],[53,52,38,35],[53,53,38,36],[53,61,38,44],[53,62,38,45],[53,63,38,46],[54,6,39,8],[54,13,39,15],[55,8,39,17,"width"],[55,13,39,22],[55,15,39,24],[55,19,39,28],[55,20,39,29,"width"],[55,25,39,34],[55,28,39,37,"factor"],[55,34,39,43],[56,8,39,45,"height"],[56,14,39,51],[56,16,39,53],[56,20,39,57],[56,21,39,58,"height"],[56,27,39,64],[56,30,39,67,"factor"],[57,6,39,74],[57,7,39,75],[58,4,40,4],[59,4,41,4],[60,0,42,0],[61,0,43,0],[62,0,44,0],[63,0,45,0],[64,0,46,0],[65,0,47,0],[66,0,48,0],[67,0,49,0],[68,0,50,0],[69,0,51,0],[70,0,52,0],[71,0,53,0],[72,0,54,0],[73,0,55,0],[74,0,56,0],[75,0,57,0],[76,0,58,0],[77,4,59,4,"scaleToFit"],[77,14,59,14,"scaleToFit"],[77,15,59,15,"width"],[77,20,59,20],[77,22,59,22,"height"],[77,28,59,28],[77,30,59,30],[78,6,60,8],[78,10,60,8,"assertIs"],[78,23,60,16],[78,24,60,16,"assertIs"],[78,32,60,16],[78,34,60,17,"width"],[78,39,60,22],[78,41,60,24],[78,48,60,31],[78,50,60,33],[78,51,60,34],[78,59,60,42],[78,60,60,43],[78,61,60,44],[79,6,61,8],[79,10,61,8,"assertIs"],[79,23,61,16],[79,24,61,16,"assertIs"],[79,32,61,16],[79,34,61,17,"height"],[79,40,61,23],[79,42,61,25],[79,50,61,33],[79,52,61,35],[79,53,61,36],[79,61,61,44],[79,62,61,45],[79,63,61,46],[80,6,62,8],[80,12,62,14,"imgWidthScale"],[80,25,62,27],[80,28,62,30,"width"],[80,33,62,35],[80,36,62,38],[80,40,62,42],[80,41,62,43,"width"],[80,46,62,48],[81,6,63,8],[81,12,63,14,"imgHeightScale"],[81,26,63,28],[81,29,63,31,"height"],[81,35,63,37],[81,38,63,40],[81,42,63,44],[81,43,63,45,"height"],[81,49,63,51],[82,6,64,8],[82,12,64,14,"scale"],[82,17,64,19],[82,20,64,22,"Math"],[82,24,64,26],[82,25,64,27,"min"],[82,28,64,30],[82,29,64,31,"imgWidthScale"],[82,42,64,44],[82,44,64,46,"imgHeightScale"],[82,58,64,60],[82,59,64,61],[83,6,65,8],[83,13,65,15],[83,17,65,19],[83,18,65,20,"scale"],[83,23,65,25],[83,24,65,26,"scale"],[83,29,65,31],[83,30,65,32],[84,4,66,4],[85,4,67,4],[86,0,68,0],[87,0,69,0],[88,0,70,0],[89,0,71,0],[90,0,72,0],[91,0,73,0],[92,4,74,4,"size"],[92,8,74,8,"size"],[92,9,74,8],[92,11,74,11],[93,6,75,8],[93,13,75,15],[93,17,75,19],[93,18,75,20,"scale"],[93,23,75,25],[93,24,75,26],[93,25,75,27],[93,26,75,28],[94,4,76,4],[95,4,77,4],[96,0,78,0],[97,0,79,0],[98,0,80,0],[99,0,81,0],[100,0,82,0],[101,0,83,0],[102,0,84,0],[103,0,85,0],[104,4,86,4],[104,10,86,10,"embed"],[104,15,86,15,"embed"],[104,16,86,15],[104,18,86,18],[105,6,87,8],[105,10,87,12],[105,11,87,13],[105,15,87,17],[105,16,87,18,"embedder"],[105,24,87,26],[105,26,88,12],[106,6,89,8],[107,6,90,8],[108,6,91,8],[108,10,91,12],[108,11,91,13],[108,15,91,17],[108,16,91,18,"embedTask"],[108,25,91,27],[108,27,91,29],[109,8,92,12],[109,14,92,18],[110,10,92,20,"doc"],[110,13,92,23],[111,10,92,25,"ref"],[112,8,92,29],[112,9,92,30],[112,12,92,33],[112,16,92,37],[113,8,93,12],[113,12,93,16],[113,13,93,17,"embedTask"],[113,22,93,26],[113,25,93,29],[113,29,93,33],[113,30,93,34,"embedder"],[113,38,93,42],[113,39,93,43,"embedIntoContext"],[113,55,93,59],[113,56,93,60,"doc"],[113,59,93,63],[113,60,93,64,"context"],[113,67,93,71],[113,69,93,73,"ref"],[113,72,93,76],[113,73,93,77],[114,6,94,8],[115,6,95,8],[115,12,95,14],[115,16,95,18],[115,17,95,19,"embedTask"],[115,26,95,28],[116,6,96,8],[117,6,97,8],[118,6,98,8],[119,6,99,8],[119,10,99,12],[119,11,99,13,"embedder"],[119,19,99,21],[119,22,99,24,"undefined"],[119,31,99,33],[120,4,100,4],[121,2,101,0],[122,2,102,0],[123,0,103,0],[124,0,104,0],[125,0,105,0],[126,0,106,0],[127,0,107,0],[128,0,108,0],[129,0,109,0],[130,0,110,0],[131,0,111,0],[132,0,112,0],[133,2,113,0,"PDFImage"],[133,10,113,8],[133,11,113,9,"of"],[133,13,113,11],[133,16,113,14],[133,17,113,15,"ref"],[133,20,113,18],[133,22,113,20,"doc"],[133,25,113,23],[133,27,113,25,"embedder"],[133,35,113,33],[133,40,113,38],[133,44,113,42,"PDFImage"],[133,52,113,50],[133,53,113,51,"ref"],[133,56,113,54],[133,58,113,56,"doc"],[133,61,113,59],[133,63,113,61,"embedder"],[133,71,113,69],[133,72,113,70],[134,0,113,71],[134,3]],"functionMap":{"names":["<global>","PDFImage","constructor","scale","scaleToFit","size","embed","of"],"mappings":"AAA;eCM;ICC;KDY;IEiB;KFG;IGmB;KHO;IIQ;KJE;IKU;KLc;CDC;cOY,wDP"},"hasCjsExports":false},"type":"js/module"}]}