{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":101},"end":{"line":7,"column":57,"index":158}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/offlineQueue","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":159},"end":{"line":8,"column":90,"index":249}}],"key":"IhHqWUUJvv2yi8MrRQE9iVq2rtM=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":250},"end":{"line":9,"column":54,"index":304}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.useOfflineQueue = useOfflineQueue;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesOfflineQueue = require(_dependencyMap[1], \"../services/offlineQueue\");\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[2], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  /**\n   * useOfflineQueue Hook\n   * \n   * React hook for using the offline queue service in components\n   */\n\n  function useOfflineQueue() {\n    const [pendingCount, setPendingCount] = (0, _react.useState)(0);\n    const [isOnline, setIsOnline] = (0, _react.useState)(true);\n    const [pendingDocIds, setPendingDocIds] = (0, _react.useState)([]);\n\n    // Listen for queue changes\n    (0, _react.useEffect)(() => {\n      const updateState = () => {\n        setPendingCount(_servicesOfflineQueue.offlineQueue.getPendingCount());\n        setPendingDocIds(_servicesOfflineQueue.offlineQueue.getPendingDocumentIds());\n      };\n\n      // Initial state\n      updateState();\n\n      // Subscribe to changes\n      const unsubscribe = _servicesOfflineQueue.offlineQueue.subscribe(updateState);\n      return () => {\n        unsubscribe();\n      };\n    }, []);\n\n    // Listen for network changes\n    (0, _react.useEffect)(() => {\n      const unsubscribe = NetInfo.default.addEventListener(state => {\n        setIsOnline(state.isConnected === true && state.isInternetReachable === true);\n      });\n\n      // Initial check\n      NetInfo.default.fetch().then(state => {\n        setIsOnline(state.isConnected === true && state.isInternetReachable === true);\n      });\n      return () => {\n        unsubscribe();\n      };\n    }, []);\n\n    // Add signature operation\n    const queueSignature = (0, _react.useCallback)(async (documentId, pageIndex, imageBase64, signatureBase64, position, scale, token) => {\n      const operationId = await _servicesOfflineQueue.offlineQueue.addOperation('apply_signature', documentId, pageIndex, {\n        imageBase64,\n        signatureBase64,\n        position,\n        scale,\n        token\n      });\n\n      // Add visual overlay for immediate preview\n      await _servicesOfflineQueue.offlineQueue.addOverlay(documentId, pageIndex, 'signature', {\n        signatureBase64,\n        position,\n        scale\n      }, operationId);\n      return operationId;\n    }, []);\n\n    // Add annotation operation\n    const queueAnnotation = (0, _react.useCallback)(async (documentId, pageIndex, imageBase64, annotations, token) => {\n      const operationId = await _servicesOfflineQueue.offlineQueue.addOperation('apply_annotation', documentId, pageIndex, {\n        imageBase64,\n        annotations,\n        token\n      });\n\n      // Add visual overlay for immediate preview\n      await _servicesOfflineQueue.offlineQueue.addOverlay(documentId, pageIndex, 'annotation', {\n        annotations\n      }, operationId);\n      return operationId;\n    }, []);\n\n    // Add filter operation\n    const queueFilter = (0, _react.useCallback)(async (documentId, pageIndex, imageBase64, filterType, adjustments, token) => {\n      return _servicesOfflineQueue.offlineQueue.addOperation('apply_filter', documentId, pageIndex, {\n        imageBase64,\n        filterType,\n        adjustments,\n        token\n      });\n    }, []);\n\n    // Get overlays for a specific document page\n    const getPageOverlays = (0, _react.useCallback)((documentId, pageIndex) => {\n      return _servicesOfflineQueue.offlineQueue.getOverlaysForPage(documentId, pageIndex);\n    }, []);\n\n    // Check if document has pending operations\n    const hasPending = (0, _react.useCallback)(documentId => {\n      return _servicesOfflineQueue.offlineQueue.hasPendingOperations(documentId);\n    }, []);\n\n    // Force process queue\n    const processQueue = (0, _react.useCallback)(async () => {\n      await _servicesOfflineQueue.offlineQueue.processQueue();\n    }, []);\n    return {\n      pendingCount,\n      pendingDocIds,\n      isOnline,\n      queueSignature,\n      queueAnnotation,\n      queueFilter,\n      getPageOverlays,\n      hasPending,\n      processQueue\n    };\n  }\n  var _default = useOfflineQueue;\n});","lineCount":137,"map":[[12,2,172,0,"Object"],[12,8,172,0],[12,9,172,0,"defineProperty"],[12,23,172,0],[12,24,172,0,"exports"],[12,31,172,0],[13,4,172,0,"enumerable"],[13,14,172,0],[14,4,172,0,"get"],[14,7,172,0],[14,18,172,0,"get"],[14,19,172,0],[15,6,172,0],[15,13,172,0,"_default"],[15,21,172,0],[16,4,172,0],[17,2,172,0],[18,2,11,0,"exports"],[18,9,11,0],[18,10,11,0,"useOfflineQueue"],[18,25,11,0],[18,28,11,0,"useOfflineQueue"],[18,43,11,0],[19,2,7,0],[19,6,7,0,"_react"],[19,12,7,0],[19,15,7,0,"require"],[19,22,7,0],[19,23,7,0,"_dependencyMap"],[19,37,7,0],[20,2,8,0],[20,6,8,0,"_servicesOfflineQueue"],[20,27,8,0],[20,30,8,0,"require"],[20,37,8,0],[20,38,8,0,"_dependencyMap"],[20,52,8,0],[21,2,9,0],[21,6,9,0,"_reactNativeCommunityNetinfo"],[21,34,9,0],[21,37,9,0,"require"],[21,44,9,0],[21,45,9,0,"_dependencyMap"],[21,59,9,0],[22,2,9,0],[22,6,9,0,"NetInfo"],[22,13,9,0],[22,16,9,0,"_interopDefault"],[22,31,9,0],[22,32,9,0,"_reactNativeCommunityNetinfo"],[22,60,9,0],[23,2,1,0],[24,0,2,0],[25,0,3,0],[26,0,4,0],[27,0,5,0],[29,2,11,7],[29,11,11,16,"useOfflineQueue"],[29,26,11,31,"useOfflineQueue"],[29,27,11,31],[29,29,11,34],[30,4,12,2],[30,10,12,8],[30,11,12,9,"pendingCount"],[30,23,12,21],[30,25,12,23,"setPendingCount"],[30,40,12,38],[30,41,12,39],[30,44,12,42],[30,48,12,42,"useState"],[30,54,12,50],[30,55,12,50,"useState"],[30,63,12,50],[30,65,12,51],[30,66,12,52],[30,67,12,53],[31,4,13,2],[31,10,13,8],[31,11,13,9,"isOnline"],[31,19,13,17],[31,21,13,19,"setIsOnline"],[31,32,13,30],[31,33,13,31],[31,36,13,34],[31,40,13,34,"useState"],[31,46,13,42],[31,47,13,42,"useState"],[31,55,13,42],[31,57,13,43],[31,61,13,47],[31,62,13,48],[32,4,14,2],[32,10,14,8],[32,11,14,9,"pendingDocIds"],[32,24,14,22],[32,26,14,24,"setPendingDocIds"],[32,42,14,40],[32,43,14,41],[32,46,14,44],[32,50,14,44,"useState"],[32,56,14,52],[32,57,14,52,"useState"],[32,65,14,52],[32,67,14,63],[32,69,14,65],[32,70,14,66],[34,4,16,2],[35,4,17,2],[35,8,17,2,"useEffect"],[35,14,17,11],[35,15,17,11,"useEffect"],[35,24,17,11],[35,26,17,12],[35,32,17,18],[36,6,18,4],[36,12,18,10,"updateState"],[36,23,18,21],[36,26,18,24,"updateState"],[36,27,18,24],[36,32,18,30],[37,8,19,6,"setPendingCount"],[37,23,19,21],[37,24,19,22,"offlineQueue"],[37,45,19,34],[37,46,19,34,"offlineQueue"],[37,58,19,34],[37,59,19,35,"getPendingCount"],[37,74,19,50],[37,75,19,51],[37,76,19,52],[37,77,19,53],[38,8,20,6,"setPendingDocIds"],[38,24,20,22],[38,25,20,23,"offlineQueue"],[38,46,20,35],[38,47,20,35,"offlineQueue"],[38,59,20,35],[38,60,20,36,"getPendingDocumentIds"],[38,81,20,57],[38,82,20,58],[38,83,20,59],[38,84,20,60],[39,6,21,4],[39,7,21,5],[41,6,23,4],[42,6,24,4,"updateState"],[42,17,24,15],[42,18,24,16],[42,19,24,17],[44,6,26,4],[45,6,27,4],[45,12,27,10,"unsubscribe"],[45,23,27,21],[45,26,27,24,"offlineQueue"],[45,47,27,36],[45,48,27,36,"offlineQueue"],[45,60,27,36],[45,61,27,37,"subscribe"],[45,70,27,46],[45,71,27,47,"updateState"],[45,82,27,58],[45,83,27,59],[46,6,29,4],[46,13,29,11],[46,19,29,17],[47,8,30,6,"unsubscribe"],[47,19,30,17],[47,20,30,18],[47,21,30,19],[48,6,31,4],[48,7,31,5],[49,4,32,2],[49,5,32,3],[49,7,32,5],[49,9,32,7],[49,10,32,8],[51,4,34,2],[52,4,35,2],[52,8,35,2,"useEffect"],[52,14,35,11],[52,15,35,11,"useEffect"],[52,24,35,11],[52,26,35,12],[52,32,35,18],[53,6,36,4],[53,12,36,10,"unsubscribe"],[53,23,36,21],[53,26,36,24,"NetInfo"],[53,33,36,31],[53,34,36,31,"default"],[53,41,36,31],[53,42,36,32,"addEventListener"],[53,58,36,48],[53,59,36,49,"state"],[53,64,36,54],[53,68,36,58],[54,8,37,6,"setIsOnline"],[54,19,37,17],[54,20,37,18,"state"],[54,25,37,23],[54,26,37,24,"isConnected"],[54,37,37,35],[54,42,37,40],[54,46,37,44],[54,50,37,48,"state"],[54,55,37,53],[54,56,37,54,"isInternetReachable"],[54,75,37,73],[54,80,37,78],[54,84,37,82],[54,85,37,83],[55,6,38,4],[55,7,38,5],[55,8,38,6],[57,6,40,4],[58,6,41,4,"NetInfo"],[58,13,41,11],[58,14,41,11,"default"],[58,21,41,11],[58,22,41,12,"fetch"],[58,27,41,17],[58,28,41,18],[58,29,41,19],[58,30,41,20,"then"],[58,34,41,24],[58,35,41,25,"state"],[58,40,41,30],[58,44,41,34],[59,8,42,6,"setIsOnline"],[59,19,42,17],[59,20,42,18,"state"],[59,25,42,23],[59,26,42,24,"isConnected"],[59,37,42,35],[59,42,42,40],[59,46,42,44],[59,50,42,48,"state"],[59,55,42,53],[59,56,42,54,"isInternetReachable"],[59,75,42,73],[59,80,42,78],[59,84,42,82],[59,85,42,83],[60,6,43,4],[60,7,43,5],[60,8,43,6],[61,6,45,4],[61,13,45,11],[61,19,45,17],[62,8,46,6,"unsubscribe"],[62,19,46,17],[62,20,46,18],[62,21,46,19],[63,6,47,4],[63,7,47,5],[64,4,48,2],[64,5,48,3],[64,7,48,5],[64,9,48,7],[64,10,48,8],[66,4,50,2],[67,4,51,2],[67,10,51,8,"queueSignature"],[67,24,51,22],[67,27,51,25],[67,31,51,25,"useCallback"],[67,37,51,36],[67,38,51,36,"useCallback"],[67,49,51,36],[67,51,51,37],[67,58,52,4,"documentId"],[67,68,52,22],[67,70,53,4,"pageIndex"],[67,79,53,21],[67,81,54,4,"imageBase64"],[67,92,54,23],[67,94,55,4,"signatureBase64"],[67,109,55,27],[67,111,56,4,"position"],[67,119,56,38],[67,121,57,4,"scale"],[67,126,57,17],[67,128,58,4,"token"],[67,133,58,24],[67,138,59,24],[68,6,60,4],[68,12,60,10,"operationId"],[68,23,60,21],[68,26,60,24],[68,32,60,30,"offlineQueue"],[68,53,60,42],[68,54,60,42,"offlineQueue"],[68,66,60,42],[68,67,60,43,"addOperation"],[68,79,60,55],[68,80,61,6],[68,97,61,23],[68,99,62,6,"documentId"],[68,109,62,16],[68,111,63,6,"pageIndex"],[68,120,63,15],[68,122,64,6],[69,8,65,8,"imageBase64"],[69,19,65,19],[70,8,66,8,"signatureBase64"],[70,23,66,23],[71,8,67,8,"position"],[71,16,67,16],[72,8,68,8,"scale"],[72,13,68,13],[73,8,69,8,"token"],[74,6,70,6],[74,7,71,4],[74,8,71,5],[76,6,73,4],[77,6,74,4],[77,12,74,10,"offlineQueue"],[77,33,74,22],[77,34,74,22,"offlineQueue"],[77,46,74,22],[77,47,74,23,"addOverlay"],[77,57,74,33],[77,58,75,6,"documentId"],[77,68,75,16],[77,70,76,6,"pageIndex"],[77,79,76,15],[77,81,77,6],[77,92,77,17],[77,94,78,6],[78,8,79,8,"signatureBase64"],[78,23,79,23],[79,8,80,8,"position"],[79,16,80,16],[80,8,81,8,"scale"],[81,6,82,6],[81,7,82,7],[81,9,83,6,"operationId"],[81,20,84,4],[81,21,84,5],[82,6,86,4],[82,13,86,11,"operationId"],[82,24,86,22],[83,4,87,2],[83,5,87,3],[83,7,87,5],[83,9,87,7],[83,10,87,8],[85,4,89,2],[86,4,90,2],[86,10,90,8,"queueAnnotation"],[86,25,90,23],[86,28,90,26],[86,32,90,26,"useCallback"],[86,38,90,37],[86,39,90,37,"useCallback"],[86,50,90,37],[86,52,90,38],[86,59,91,4,"documentId"],[86,69,91,22],[86,71,92,4,"pageIndex"],[86,80,92,21],[86,82,93,4,"imageBase64"],[86,93,93,23],[86,95,94,4,"annotations"],[86,106,94,22],[86,108,95,4,"token"],[86,113,95,24],[86,118,96,24],[87,6,97,4],[87,12,97,10,"operationId"],[87,23,97,21],[87,26,97,24],[87,32,97,30,"offlineQueue"],[87,53,97,42],[87,54,97,42,"offlineQueue"],[87,66,97,42],[87,67,97,43,"addOperation"],[87,79,97,55],[87,80,98,6],[87,98,98,24],[87,100,99,6,"documentId"],[87,110,99,16],[87,112,100,6,"pageIndex"],[87,121,100,15],[87,123,101,6],[88,8,102,8,"imageBase64"],[88,19,102,19],[89,8,103,8,"annotations"],[89,19,103,19],[90,8,104,8,"token"],[91,6,105,6],[91,7,106,4],[91,8,106,5],[93,6,108,4],[94,6,109,4],[94,12,109,10,"offlineQueue"],[94,33,109,22],[94,34,109,22,"offlineQueue"],[94,46,109,22],[94,47,109,23,"addOverlay"],[94,57,109,33],[94,58,110,6,"documentId"],[94,68,110,16],[94,70,111,6,"pageIndex"],[94,79,111,15],[94,81,112,6],[94,93,112,18],[94,95,113,6],[95,8,114,8,"annotations"],[96,6,115,6],[96,7,115,7],[96,9,116,6,"operationId"],[96,20,117,4],[96,21,117,5],[97,6,119,4],[97,13,119,11,"operationId"],[97,24,119,22],[98,4,120,2],[98,5,120,3],[98,7,120,5],[98,9,120,7],[98,10,120,8],[100,4,122,2],[101,4,123,2],[101,10,123,8,"queueFilter"],[101,21,123,19],[101,24,123,22],[101,28,123,22,"useCallback"],[101,34,123,33],[101,35,123,33,"useCallback"],[101,46,123,33],[101,48,123,34],[101,55,124,4,"documentId"],[101,65,124,22],[101,67,125,4,"pageIndex"],[101,76,125,21],[101,78,126,4,"imageBase64"],[101,89,126,23],[101,91,127,4,"filterType"],[101,101,127,22],[101,103,128,4,"adjustments"],[101,114,128,77],[101,116,129,4,"token"],[101,121,129,24],[101,126,130,24],[102,6,131,4],[102,13,131,11,"offlineQueue"],[102,34,131,23],[102,35,131,23,"offlineQueue"],[102,47,131,23],[102,48,131,24,"addOperation"],[102,60,131,36],[102,61,132,6],[102,75,132,20],[102,77,133,6,"documentId"],[102,87,133,16],[102,89,134,6,"pageIndex"],[102,98,134,15],[102,100,135,6],[103,8,136,8,"imageBase64"],[103,19,136,19],[104,8,137,8,"filterType"],[104,18,137,18],[105,8,138,8,"adjustments"],[105,19,138,19],[106,8,139,8,"token"],[107,6,140,6],[107,7,141,4],[107,8,141,5],[108,4,142,2],[108,5,142,3],[108,7,142,5],[108,9,142,7],[108,10,142,8],[110,4,144,2],[111,4,145,2],[111,10,145,8,"getPageOverlays"],[111,25,145,23],[111,28,145,26],[111,32,145,26,"useCallback"],[111,38,145,37],[111,39,145,37,"useCallback"],[111,50,145,37],[111,52,145,38],[111,53,145,39,"documentId"],[111,63,145,57],[111,65,145,59,"pageIndex"],[111,74,145,76],[111,79,145,99],[112,6,146,4],[112,13,146,11,"offlineQueue"],[112,34,146,23],[112,35,146,23,"offlineQueue"],[112,47,146,23],[112,48,146,24,"getOverlaysForPage"],[112,66,146,42],[112,67,146,43,"documentId"],[112,77,146,53],[112,79,146,55,"pageIndex"],[112,88,146,64],[112,89,146,65],[113,4,147,2],[113,5,147,3],[113,7,147,5],[113,9,147,7],[113,10,147,8],[115,4,149,2],[116,4,150,2],[116,10,150,8,"hasPending"],[116,20,150,18],[116,23,150,21],[116,27,150,21,"useCallback"],[116,33,150,32],[116,34,150,32,"useCallback"],[116,45,150,32],[116,47,150,34,"documentId"],[116,57,150,52],[116,61,150,66],[117,6,151,4],[117,13,151,11,"offlineQueue"],[117,34,151,23],[117,35,151,23,"offlineQueue"],[117,47,151,23],[117,48,151,24,"hasPendingOperations"],[117,68,151,44],[117,69,151,45,"documentId"],[117,79,151,55],[117,80,151,56],[118,4,152,2],[118,5,152,3],[118,7,152,5],[118,9,152,7],[118,10,152,8],[120,4,154,2],[121,4,155,2],[121,10,155,8,"processQueue"],[121,22,155,20],[121,25,155,23],[121,29,155,23,"useCallback"],[121,35,155,34],[121,36,155,34,"useCallback"],[121,47,155,34],[121,49,155,35],[121,61,155,47],[122,6,156,4],[122,12,156,10,"offlineQueue"],[122,33,156,22],[122,34,156,22,"offlineQueue"],[122,46,156,22],[122,47,156,23,"processQueue"],[122,59,156,35],[122,60,156,36],[122,61,156,37],[123,4,157,2],[123,5,157,3],[123,7,157,5],[123,9,157,7],[123,10,157,8],[124,4,159,2],[124,11,159,9],[125,6,160,4,"pendingCount"],[125,18,160,16],[126,6,161,4,"pendingDocIds"],[126,19,161,17],[127,6,162,4,"isOnline"],[127,14,162,12],[128,6,163,4,"queueSignature"],[128,20,163,18],[129,6,164,4,"queueAnnotation"],[129,21,164,19],[130,6,165,4,"queueFilter"],[130,17,165,15],[131,6,166,4,"getPageOverlays"],[131,21,166,19],[132,6,167,4,"hasPending"],[132,16,167,14],[133,6,168,4,"processQueue"],[134,4,169,2],[134,5,169,3],[135,2,170,0],[136,2,172,0],[136,6,172,0,"_default"],[136,14,172,0],[136,17,172,15,"useOfflineQueue"],[136,32,172,30],[137,0,172,31],[137,3]],"functionMap":{"names":["<global>","useOfflineQueue","useEffect$argument_0","updateState","<anonymous>","NetInfo.addEventListener$argument_0","NetInfo.fetch.then$argument_0","queueSignature","queueAnnotation","queueFilter","getPageOverlays","hasPending","processQueue"],"mappings":"AAA;OCU;YCM;wBCC;KDG;WEQ;KFE;GDC;YCG;iDGC;KHE;yBIG;KJE;WEE;KFE;GDC;qCMG;GNoC;sCOG;GP8B;kCQG;GRmB;sCSG;GTE;iCUG;GVE;mCWG;GXE;CDa"},"hasCjsExports":false},"type":"js/module"}]}