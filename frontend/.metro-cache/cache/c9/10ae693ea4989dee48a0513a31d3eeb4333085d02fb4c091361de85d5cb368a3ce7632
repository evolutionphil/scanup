{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  /* -*- Mode: js; js-indent-level: 2; -*- */\n  /*\n   * Copyright 2011 Mozilla Foundation and contributors\n   * Licensed under the New BSD license. See LICENSE or:\n   * http://opensource.org/licenses/BSD-3-Clause\n   */\n\n  exports.GREATEST_LOWER_BOUND = 1;\n  exports.LEAST_UPPER_BOUND = 2;\n\n  /**\n   * Recursive implementation of binary search.\n   *\n   * @param aLow Indices here and lower do not contain the needle.\n   * @param aHigh Indices here and higher do not contain the needle.\n   * @param aNeedle The element being searched for.\n   * @param aHaystack The non-empty array being searched.\n   * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n   * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n   *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n   *     closest element that is smaller than or greater than the one we are\n   *     searching for, respectively, if the exact element cannot be found.\n   */\n  function recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n    // This function terminates when one of the following is true:\n    //\n    //   1. We find the exact element we are looking for.\n    //\n    //   2. We did not find the exact element, but we can return the index of\n    //      the next-closest element.\n    //\n    //   3. We did not find the exact element, and there is no next-closest\n    //      element than the one we are searching for, so we return -1.\n    var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n    var cmp = aCompare(aNeedle, aHaystack[mid], true);\n    if (cmp === 0) {\n      // Found the element we are looking for.\n      return mid;\n    } else if (cmp > 0) {\n      // Our needle is greater than aHaystack[mid].\n      if (aHigh - mid > 1) {\n        // The element is in the upper half.\n        return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n      }\n\n      // The exact needle element was not found in this haystack. Determine if\n      // we are in termination case (3) or (2) and return the appropriate thing.\n      if (aBias == exports.LEAST_UPPER_BOUND) {\n        return aHigh < aHaystack.length ? aHigh : -1;\n      } else {\n        return mid;\n      }\n    } else {\n      // Our needle is less than aHaystack[mid].\n      if (mid - aLow > 1) {\n        // The element is in the lower half.\n        return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n      }\n\n      // we are in termination case (3) or (2) and return the appropriate thing.\n      if (aBias == exports.LEAST_UPPER_BOUND) {\n        return mid;\n      } else {\n        return aLow < 0 ? -1 : aLow;\n      }\n    }\n  }\n\n  /**\n   * This is an implementation of binary search which will always try and return\n   * the index of the closest element if there is no exact hit. This is because\n   * mappings between original and generated line/col pairs are single points,\n   * and there is an implicit region between each of them, so a miss just means\n   * that you aren't on the very start of a region.\n   *\n   * @param aNeedle The element you are looking for.\n   * @param aHaystack The array that is being searched.\n   * @param aCompare A function which takes the needle and an element in the\n   *     array and returns -1, 0, or 1 depending on whether the needle is less\n   *     than, equal to, or greater than the element, respectively.\n   * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n   *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n   *     closest element that is smaller than or greater than the one we are\n   *     searching for, respectively, if the exact element cannot be found.\n   *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n   */\n  exports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n    if (aHaystack.length === 0) {\n      return -1;\n    }\n    var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack, aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n    if (index < 0) {\n      return -1;\n    }\n\n    // We have found either the exact element, or the next-closest element than\n    // the one we are searching for. However, there may be more than one such\n    // element. Make sure we always return the smallest of these.\n    while (index - 1 >= 0) {\n      if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n        break;\n      }\n      --index;\n    }\n    return index;\n  };\n});","lineCount":108,"map":[[2,2,1,0],[3,2,2,0],[4,0,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"GREATEST_LOWER_BOUND"],[9,30,8,28],[9,33,8,31],[9,34,8,32],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"LEAST_UPPER_BOUND"],[10,27,9,25],[10,30,9,28],[10,31,9,29],[12,2,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,0,17,0],[19,0,18,0],[20,0,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,2,24,0],[25,11,24,9,"recursiveSearch"],[25,26,24,24,"recursiveSearch"],[25,27,24,25,"aLow"],[25,31,24,29],[25,33,24,31,"aHigh"],[25,38,24,36],[25,40,24,38,"aNeedle"],[25,47,24,45],[25,49,24,47,"aHaystack"],[25,58,24,56],[25,60,24,58,"aCompare"],[25,68,24,66],[25,70,24,68,"aBias"],[25,75,24,73],[25,77,24,75],[26,4,25,2],[27,4,26,2],[28,4,27,2],[29,4,28,2],[30,4,29,2],[31,4,30,2],[32,4,31,2],[33,4,32,2],[34,4,33,2],[35,4,34,2],[35,8,34,6,"mid"],[35,11,34,9],[35,14,34,12,"Math"],[35,18,34,16],[35,19,34,17,"floor"],[35,24,34,22],[35,25,34,23],[35,26,34,24,"aHigh"],[35,31,34,29],[35,34,34,32,"aLow"],[35,38,34,36],[35,42,34,40],[35,43,34,41],[35,44,34,42],[35,47,34,45,"aLow"],[35,51,34,49],[36,4,35,2],[36,8,35,6,"cmp"],[36,11,35,9],[36,14,35,12,"aCompare"],[36,22,35,20],[36,23,35,21,"aNeedle"],[36,30,35,28],[36,32,35,30,"aHaystack"],[36,41,35,39],[36,42,35,40,"mid"],[36,45,35,43],[36,46,35,44],[36,48,35,46],[36,52,35,50],[36,53,35,51],[37,4,36,2],[37,8,36,6,"cmp"],[37,11,36,9],[37,16,36,14],[37,17,36,15],[37,19,36,17],[38,6,37,4],[39,6,38,4],[39,13,38,11,"mid"],[39,16,38,14],[40,4,39,2],[40,5,39,3],[40,11,40,7],[40,15,40,11,"cmp"],[40,18,40,14],[40,21,40,17],[40,22,40,18],[40,24,40,20],[41,6,41,4],[42,6,42,4],[42,10,42,8,"aHigh"],[42,15,42,13],[42,18,42,16,"mid"],[42,21,42,19],[42,24,42,22],[42,25,42,23],[42,27,42,25],[43,8,43,6],[44,8,44,6],[44,15,44,13,"recursiveSearch"],[44,30,44,28],[44,31,44,29,"mid"],[44,34,44,32],[44,36,44,34,"aHigh"],[44,41,44,39],[44,43,44,41,"aNeedle"],[44,50,44,48],[44,52,44,50,"aHaystack"],[44,61,44,59],[44,63,44,61,"aCompare"],[44,71,44,69],[44,73,44,71,"aBias"],[44,78,44,76],[44,79,44,77],[45,6,45,4],[47,6,47,4],[48,6,48,4],[49,6,49,4],[49,10,49,8,"aBias"],[49,15,49,13],[49,19,49,17,"exports"],[49,26,49,24],[49,27,49,25,"LEAST_UPPER_BOUND"],[49,44,49,42],[49,46,49,44],[50,8,50,6],[50,15,50,13,"aHigh"],[50,20,50,18],[50,23,50,21,"aHaystack"],[50,32,50,30],[50,33,50,31,"length"],[50,39,50,37],[50,42,50,40,"aHigh"],[50,47,50,45],[50,50,50,48],[50,51,50,49],[50,52,50,50],[51,6,51,4],[51,7,51,5],[51,13,51,11],[52,8,52,6],[52,15,52,13,"mid"],[52,18,52,16],[53,6,53,4],[54,4,54,2],[54,5,54,3],[54,11,55,7],[55,6,56,4],[56,6,57,4],[56,10,57,8,"mid"],[56,13,57,11],[56,16,57,14,"aLow"],[56,20,57,18],[56,23,57,21],[56,24,57,22],[56,26,57,24],[57,8,58,6],[58,8,59,6],[58,15,59,13,"recursiveSearch"],[58,30,59,28],[58,31,59,29,"aLow"],[58,35,59,33],[58,37,59,35,"mid"],[58,40,59,38],[58,42,59,40,"aNeedle"],[58,49,59,47],[58,51,59,49,"aHaystack"],[58,60,59,58],[58,62,59,60,"aCompare"],[58,70,59,68],[58,72,59,70,"aBias"],[58,77,59,75],[58,78,59,76],[59,6,60,4],[61,6,62,4],[62,6,63,4],[62,10,63,8,"aBias"],[62,15,63,13],[62,19,63,17,"exports"],[62,26,63,24],[62,27,63,25,"LEAST_UPPER_BOUND"],[62,44,63,42],[62,46,63,44],[63,8,64,6],[63,15,64,13,"mid"],[63,18,64,16],[64,6,65,4],[64,7,65,5],[64,13,65,11],[65,8,66,6],[65,15,66,13,"aLow"],[65,19,66,17],[65,22,66,20],[65,23,66,21],[65,26,66,24],[65,27,66,25],[65,28,66,26],[65,31,66,29,"aLow"],[65,35,66,33],[66,6,67,4],[67,4,68,2],[68,2,69,0],[70,2,71,0],[71,0,72,0],[72,0,73,0],[73,0,74,0],[74,0,75,0],[75,0,76,0],[76,0,77,0],[77,0,78,0],[78,0,79,0],[79,0,80,0],[80,0,81,0],[81,0,82,0],[82,0,83,0],[83,0,84,0],[84,0,85,0],[85,0,86,0],[86,0,87,0],[87,0,88,0],[88,2,89,0,"exports"],[88,9,89,7],[88,10,89,8,"search"],[88,16,89,14],[88,19,89,17],[88,28,89,26,"search"],[88,34,89,32,"search"],[88,35,89,33,"aNeedle"],[88,42,89,40],[88,44,89,42,"aHaystack"],[88,53,89,51],[88,55,89,53,"aCompare"],[88,63,89,61],[88,65,89,63,"aBias"],[88,70,89,68],[88,72,89,70],[89,4,90,2],[89,8,90,6,"aHaystack"],[89,17,90,15],[89,18,90,16,"length"],[89,24,90,22],[89,29,90,27],[89,30,90,28],[89,32,90,30],[90,6,91,4],[90,13,91,11],[90,14,91,12],[90,15,91,13],[91,4,92,2],[92,4,94,2],[92,8,94,6,"index"],[92,13,94,11],[92,16,94,14,"recursiveSearch"],[92,31,94,29],[92,32,94,30],[92,33,94,31],[92,34,94,32],[92,36,94,34,"aHaystack"],[92,45,94,43],[92,46,94,44,"length"],[92,52,94,50],[92,54,94,52,"aNeedle"],[92,61,94,59],[92,63,94,61,"aHaystack"],[92,72,94,70],[92,74,95,30,"aCompare"],[92,82,95,38],[92,84,95,40,"aBias"],[92,89,95,45],[92,93,95,49,"exports"],[92,100,95,56],[92,101,95,57,"GREATEST_LOWER_BOUND"],[92,121,95,77],[92,122,95,78],[93,4,96,2],[93,8,96,6,"index"],[93,13,96,11],[93,16,96,14],[93,17,96,15],[93,19,96,17],[94,6,97,4],[94,13,97,11],[94,14,97,12],[94,15,97,13],[95,4,98,2],[97,4,100,2],[98,4,101,2],[99,4,102,2],[100,4,103,2],[100,11,103,9,"index"],[100,16,103,14],[100,19,103,17],[100,20,103,18],[100,24,103,22],[100,25,103,23],[100,27,103,25],[101,6,104,4],[101,10,104,8,"aCompare"],[101,18,104,16],[101,19,104,17,"aHaystack"],[101,28,104,26],[101,29,104,27,"index"],[101,34,104,32],[101,35,104,33],[101,37,104,35,"aHaystack"],[101,46,104,44],[101,47,104,45,"index"],[101,52,104,50],[101,55,104,53],[101,56,104,54],[101,57,104,55],[101,59,104,57],[101,63,104,61],[101,64,104,62],[101,69,104,67],[101,70,104,68],[101,72,104,70],[102,8,105,6],[103,6,106,4],[104,6,107,4],[104,8,107,6,"index"],[104,13,107,11],[105,4,108,2],[106,4,110,2],[106,11,110,9,"index"],[106,16,110,14],[107,2,111,0],[107,3,111,1],[108,0,111,2],[108,3]],"functionMap":{"names":["<global>","recursiveSearch","search"],"mappings":"AAA;ACuB;CD6C;iBEoB;CFsB"},"hasCjsExports":true},"type":"js/module"}]}