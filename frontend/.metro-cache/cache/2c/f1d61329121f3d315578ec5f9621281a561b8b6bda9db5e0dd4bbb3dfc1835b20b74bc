{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":49,"index":83}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":125},"end":{"line":4,"column":69,"index":194}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"useAuthStore\",{enumerable:!0,get:function(){return h}});var t=r(_d[0]);!(function(t){if(t&&t.__esModule)return t;var e={};t&&Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),e.default=t})(r(_d[1]));r(_d[2]);var e,s=r(_d[3]),n=(e=s)&&e.__esModule?e:{default:e};const o=\"https://scanup-admin-1.preview.emergentagent.com\",u=async t=>n.default.getItem(t),c=async(t,e)=>{await n.default.setItem(t,e)},d=async t=>{await n.default.removeItem(t)},l={user_id:'guest',email:'guest@local',name:'Guest',subscription_type:'free',is_premium:!1,ocr_remaining_today:3,scans_remaining_today:10,scans_remaining_month:100},h=(0,t.create)((t,e)=>({user:null,token:null,isLoading:!0,isAuthenticated:!1,isGuest:!1,login:async(e,s)=>{const n=await fetch(`${o}/api/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:e,password:s})});if(!n.ok){const t=await n.json();throw new Error(t.detail||'Login failed')}const u=await n.json();await c('token',u.token),await c('user',JSON.stringify(u.user)),t({user:u.user,token:u.token,isAuthenticated:!0,isGuest:!1})},register:async(e,s,n)=>{const u=await fetch(`${o}/api/auth/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:e,password:s,name:n})});if(!u.ok){const t=await u.json();throw new Error(t.detail||'Registration failed')}const d=await u.json();await c('token',d.token),await c('user',JSON.stringify(d.user)),t({user:d.user,token:d.token,isAuthenticated:!0,isGuest:!1})},googleLogin:async e=>{const s=await fetch(`${o}/api/auth/google/callback`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({session_id:e})});if(!s.ok){const t=await s.json();throw new Error(t.detail||'Google login failed')}const n=await s.json();await c('token',n.token),await c('user',JSON.stringify(n.user)),t({user:n.user,token:n.token,isAuthenticated:!0,isGuest:!1})},logout:async()=>{const s=e().token,n=e().isGuest;if(t({user:null,token:null,isAuthenticated:!1,isGuest:!1,isLoading:!1}),await d('token'),await d('user'),await d('isGuest'),s&&!n)try{fetch(`${o}/api/auth/logout`,{method:'POST',headers:{Authorization:`Bearer ${s}`}}).catch(()=>{})}catch(t){}},loadStoredAuth:async()=>{try{if('true'===await u('isGuest'))return void t({user:l,isAuthenticated:!0,isGuest:!0,isLoading:!1});const s=await u('token'),n=await u('user');if(s&&n){const o=JSON.parse(n);t({user:o,token:s,isAuthenticated:!0,isLoading:!1}),e().refreshUser()}else t({isLoading:!1})}catch(e){console.log('Error loading auth:',e),t({isLoading:!1})}},updateUser:e=>{t({user:e}),c('user',JSON.stringify(e))},refreshUser:async()=>{const s=e().token;if(s&&!e().isGuest)try{const n=await fetch(`${o}/api/auth/me`,{headers:{Authorization:`Bearer ${s}`}});if(n.ok){const e=await n.json();t({user:e}),await c('user',JSON.stringify(e))}else 401===n.status&&await e().logout()}catch(t){console.log('Error refreshing user:',t)}},continueAsGuest:()=>{t({user:l,isAuthenticated:!0,isGuest:!0,isLoading:!1}),c('isGuest','true')},startTrial:async()=>{const s=e().token;if(!s||e().isGuest)return;const n=await fetch(`${o}/api/users/start-trial`,{method:'POST',headers:{Authorization:`Bearer ${s}`}});if(!n.ok){const t=await n.json();throw new Error(t.detail||'Failed to start trial')}const u=await n.json();t({user:u}),await c('user',JSON.stringify(u))}}))});","lineCount":1,"map":[[1,93,73,0,"Object"],[1,100,73,0,"defineProperty"],[1,115,73,0,"_e"],[1,118,73,0],[1,134,73,0,"enumerable"],[1,146,73,0],[1,148,73,0,"get"],[1,152,73,0],[1,170,73,0,"useAuthStore"],[1,171,73,0],[1,175,1,0],[1,179,1,0,"_zustand"],[1,181,1,0,"r"],[1,183,1,0,"_d"],[1,186,1,0],[1,192],[1,416,2,0,"_interopNamespace"],[1,417,2,0,"r"],[1,419,2,0,"_d"],[1,422,2,0],[1,427,2,49,"r"],[1,429,2,49,"_d"],[1,432,2,49],[1,436,4,0],[1,440],[1,442,4,0,"_reactNativeAsyncStorageAsyncStorage"],[1,444,4,0,"r"],[1,446,4,0,"_d"],[1,449,4,0],[1,453,4,0,"AsyncStorage"],[1,456],[1,458,4,0,"_reactNativeAsyncStorageAsyncStorage"],[1,462],[1,489,6,0],[1,495,6,6,"BACKEND_URL"],[1,497,6,17],[1,548,39,6,"getStorage"],[1,550,39,19,"async"],[1,559,41,11,"AsyncStorage"],[1,561,41,23,"default"],[1,569,41,24,"getItem"],[1,577,41,32,"key"],[1,580,46,6,"setStorage"],[1,582,46,19,"async"],[1,588,46,26,"key"],[1,590,46,39,"value"],[1,601,48,10,"AsyncStorage"],[1,603,48,22,"default"],[1,611,48,23,"setItem"],[1,619,48,31,"key"],[1,621,48,36,"value"],[1,625,54,6,"removeStorage"],[1,627,54,22,"async"],[1,643,56,10,"AsyncStorage"],[1,645,56,22,"default"],[1,653,56,23,"removeItem"],[1,664,56,34,"key"],[1,668,62,6,"guestUser"],[1,670,62,24],[1,671,63,2,"user_id"],[1,679,63,11],[1,687,64,2,"email"],[1,693,64,9],[1,707,65,2,"name"],[1,712,65,8],[1,720,66,2,"subscription_type"],[1,738,66,21],[1,745,67,2,"is_premium"],[1,757,67,14],[1,759,68,2,"ocr_remaining_today"],[1,779,68,23],[1,781,69,2,"scans_remaining_today"],[1,803,69,25],[1,806,70,2,"scans_remaining_month"],[1,828,70,25],[1,833,73,13,"useAuthStore"],[1,836,73,28],[1,838,73,28,"create"],[1,840,73,34,"create"],[1,848,73,46],[1,849,73,47,"set"],[1,851,73,52,"get"],[1,856,73,55],[1,857,74,2,"user"],[1,862,74,8],[1,867,75,2,"token"],[1,873,75,9],[1,878,76,2,"isLoading"],[1,889,76,13],[1,891,77,2,"isAuthenticated"],[1,908,77,19],[1,910,78,2,"isGuest"],[1,919,78,11],[1,921,80,2,"login"],[1,927,80,9,"async"],[1,933,80,16,"email"],[1,935,80,31,"password"],[1,940,81,4],[1,946,81,10,"response"],[1,954,81,27,"fetch"],[1,960,81,33],[1,963,81,36,"BACKEND_URL"],[1,982,81,66],[1,983,82,6,"method"],[1,990,82,14],[1,997,83,6,"headers"],[1,1005,83,15],[1,1006,83,17],[1,1021,83,33],[1,1041,84,6,"body"],[1,1046,84,12,"JSON"],[1,1051,84,17,"stringify"],[1,1061,84,27],[1,1062,84,29,"email"],[1,1070,84,36,"password"],[1,1085,87,4],[1,1089,87,9,"response"],[1,1091,87,18,"ok"],[1,1094,87,22],[1,1095,88,6],[1,1101,88,12,"error"],[1,1109,88,26,"response"],[1,1111,88,35,"json"],[1,1118,89,6],[1,1124,89,12],[1,1128,89,16,"Error"],[1,1134,89,22,"error"],[1,1136,89,28,"detail"],[1,1144,89,38],[1,1159,90,4],[1,1160,92,4],[1,1166,92,10,"data"],[1,1174,92,23,"response"],[1,1176,92,32,"json"],[1,1189,93,10,"setStorage"],[1,1191,93,21],[1,1199,93,30,"data"],[1,1201,93,35,"token"],[1,1214,94,10,"setStorage"],[1,1216,94,21],[1,1223,94,29,"JSON"],[1,1228,94,34,"stringify"],[1,1238,94,44,"data"],[1,1240,94,49,"user"],[1,1247,95,4,"set"],[1,1249,95,8],[1,1250,95,10,"user"],[1,1255,95,16,"data"],[1,1257,95,21,"user"],[1,1262,95,27,"token"],[1,1268,95,34,"data"],[1,1270,95,39,"token"],[1,1276,95,46,"isAuthenticated"],[1,1293,95,63],[1,1295,95,69,"isGuest"],[1,1304,95,78],[1,1309,98,2,"register"],[1,1318,98,12,"async"],[1,1324,98,19,"email"],[1,1326,98,34,"password"],[1,1328,98,52,"name"],[1,1333,99,4],[1,1339,99,10,"response"],[1,1347,99,27,"fetch"],[1,1353,99,33],[1,1356,99,36,"BACKEND_URL"],[1,1378,99,69],[1,1379,100,6,"method"],[1,1386,100,14],[1,1393,101,6,"headers"],[1,1401,101,15],[1,1402,101,17],[1,1417,101,33],[1,1437,102,6,"body"],[1,1442,102,12,"JSON"],[1,1447,102,17,"stringify"],[1,1457,102,27],[1,1458,102,29,"email"],[1,1466,102,36,"password"],[1,1477,102,46,"name"],[1,1488,105,4],[1,1492,105,9,"response"],[1,1494,105,18,"ok"],[1,1497,105,22],[1,1498,106,6],[1,1504,106,12,"error"],[1,1512,106,26,"response"],[1,1514,106,35,"json"],[1,1521,107,6],[1,1527,107,12],[1,1531,107,16,"Error"],[1,1537,107,22,"error"],[1,1539,107,28,"detail"],[1,1547,107,38],[1,1569,108,4],[1,1570,110,4],[1,1576,110,10,"data"],[1,1584,110,23,"response"],[1,1586,110,32,"json"],[1,1599,111,10,"setStorage"],[1,1601,111,21],[1,1609,111,30,"data"],[1,1611,111,35,"token"],[1,1624,112,10,"setStorage"],[1,1626,112,21],[1,1633,112,29,"JSON"],[1,1638,112,34,"stringify"],[1,1648,112,44,"data"],[1,1650,112,49,"user"],[1,1657,113,4,"set"],[1,1659,113,8],[1,1660,113,10,"user"],[1,1665,113,16,"data"],[1,1667,113,21,"user"],[1,1672,113,27,"token"],[1,1678,113,34,"data"],[1,1680,113,39,"token"],[1,1686,113,46,"isAuthenticated"],[1,1703,113,63],[1,1705,113,69,"isGuest"],[1,1714,113,78],[1,1719,116,2,"googleLogin"],[1,1731,116,15,"async"],[1,1741,117,4],[1,1747,117,10,"response"],[1,1755,117,27,"fetch"],[1,1761,117,33],[1,1764,117,36,"BACKEND_URL"],[1,1793,117,76],[1,1794,118,6,"method"],[1,1801,118,14],[1,1808,119,6,"headers"],[1,1816,119,15],[1,1817,119,17],[1,1832,119,33],[1,1852,120,6,"body"],[1,1857,120,12,"JSON"],[1,1862,120,17,"stringify"],[1,1872,120,27],[1,1873,120,29,"session_id"],[1,1884,120,41,"sessionId"],[1,1890,123,4],[1,1894,123,9,"response"],[1,1896,123,18,"ok"],[1,1899,123,22],[1,1900,124,6],[1,1906,124,12,"error"],[1,1914,124,26,"response"],[1,1916,124,35,"json"],[1,1923,125,6],[1,1929,125,12],[1,1933,125,16,"Error"],[1,1939,125,22,"error"],[1,1941,125,28,"detail"],[1,1949,125,38],[1,1971,126,4],[1,1972,128,4],[1,1978,128,10,"data"],[1,1986,128,23,"response"],[1,1988,128,32,"json"],[1,2001,129,10,"setStorage"],[1,2003,129,21],[1,2011,129,30,"data"],[1,2013,129,35,"token"],[1,2026,130,10,"setStorage"],[1,2028,130,21],[1,2035,130,29,"JSON"],[1,2040,130,34,"stringify"],[1,2050,130,44,"data"],[1,2052,130,49,"user"],[1,2059,131,4,"set"],[1,2061,131,8],[1,2062,131,10,"user"],[1,2067,131,16,"data"],[1,2069,131,21,"user"],[1,2074,131,27,"token"],[1,2080,131,34,"data"],[1,2082,131,39,"token"],[1,2088,131,46,"isAuthenticated"],[1,2105,131,63],[1,2107,131,69,"isGuest"],[1,2116,131,78],[1,2121,134,2,"logout"],[1,2128,134,10,"async"],[1,2138,135,4],[1,2144,135,10,"token"],[1,2146,135,18,"get"],[1,2150,135,24,"token"],[1,2156,136,10,"wasGuest"],[1,2158,136,21,"get"],[1,2162,136,27,"isGuest"],[1,2170,147,4],[1,2173,139,4,"set"],[1,2175,139,8],[1,2176,139,10,"user"],[1,2181,139,16],[1,2186,139,22,"token"],[1,2192,139,29],[1,2197,139,35,"isAuthenticated"],[1,2214,139,52],[1,2216,139,59,"isGuest"],[1,2225,139,68],[1,2227,139,75,"isLoading"],[1,2238,139,86],[1,2248,142,10,"removeStorage"],[1,2250,142,24],[1,2265,143,10,"removeStorage"],[1,2267,143,24],[1,2281,144,10,"removeStorage"],[1,2283,144,24],[1,2294,147,8,"token"],[1,2298,147,18,"wasGuest"],[1,2300,148,6],[1,2304,149,8,"fetch"],[1,2310,149,14],[1,2313,149,17,"BACKEND_URL"],[1,2333,149,48],[1,2334,150,10,"method"],[1,2341,150,18],[1,2348,151,10,"headers"],[1,2356,151,19],[1,2357,151,21,"Authorization"],[1,2371,151,36],[1,2381,151,46,"token"],[1,2388,152,11,"catch"],[1,2394,152,17],[1,2401,153,6],[1,2402,153,8],[1,2408,153,15,"e"],[1,2411,154,8],[1,2414,159,2,"loadStoredAuth"],[1,2429,159,18,"async"],[1,2439,160,4],[1,2443,162,6],[1,2446,162,28],[1,2461,161,34,"getStorage"],[1,2463,161,45],[1,2474,164,8],[1,2486,163,8,"set"],[1,2488,163,12],[1,2489,163,14,"user"],[1,2494,163,20,"guestUser"],[1,2496,163,31,"isAuthenticated"],[1,2513,163,48],[1,2515,163,54,"isGuest"],[1,2524,163,63],[1,2526,163,69,"isLoading"],[1,2537,163,80],[1,2541,167,6],[1,2547,167,12,"token"],[1,2555,167,26,"getStorage"],[1,2557,167,37],[1,2566,168,12,"userStr"],[1,2574,168,28,"getStorage"],[1,2576,168,39],[1,2584,170,6],[1,2587,170,10,"token"],[1,2590,170,19,"userStr"],[1,2592,170,28],[1,2593,171,8],[1,2599,171,14,"user"],[1,2601,171,21,"JSON"],[1,2606,171,26,"parse"],[1,2612,171,32,"userStr"],[1,2615,172,8,"set"],[1,2617,172,12],[1,2618,172,14,"user"],[1,2625,172,20,"token"],[1,2633,172,27,"isAuthenticated"],[1,2650,172,44],[1,2652,172,50,"isLoading"],[1,2663,172,61],[1,2667,173,8,"get"],[1,2671,173,14,"refreshUser"],[1,2684,174,6],[1,2690,175,8,"set"],[1,2692,175,12],[1,2693,175,14,"isLoading"],[1,2704,175,25],[1,2707,177,4],[1,2708,177,6],[1,2714,177,13,"e"],[1,2717,178,6,"console"],[1,2725,178,14,"log"],[1,2729,178,18],[1,2751,178,41,"e"],[1,2754,179,6,"set"],[1,2756,179,10],[1,2757,179,12,"isLoading"],[1,2768,179,23],[1,2771,180,4],[1,2774,183,2,"updateUser"],[1,2785,183,15,"user"],[1,2789,184,4,"set"],[1,2791,184,8],[1,2792,184,10,"user"],[1,2801,185,4,"setStorage"],[1,2803,185,15],[1,2810,185,23,"JSON"],[1,2815,185,28,"stringify"],[1,2825,185,38,"user"],[1,2830,188,2,"refreshUser"],[1,2842,188,15,"async"],[1,2852,189,4],[1,2858,189,10,"token"],[1,2860,189,18,"get"],[1,2864,189,24,"token"],[1,2870,190,4],[1,2873,190,9,"token"],[1,2877,190,18,"get"],[1,2881,190,24,"isGuest"],[1,2889,192,4],[1,2893,193,6],[1,2899,193,12,"response"],[1,2907,193,29,"fetch"],[1,2913,193,35],[1,2916,193,38,"BACKEND_URL"],[1,2932,193,65],[1,2933,194,8,"headers"],[1,2941,194,17],[1,2942,194,19,"Authorization"],[1,2956,194,34],[1,2966,194,44,"token"],[1,2973,197,6],[1,2976,197,10,"response"],[1,2978,197,19,"ok"],[1,2981,197,23],[1,2982,198,8],[1,2988,198,14,"user"],[1,2996,198,27,"response"],[1,2998,198,36,"json"],[1,3005,199,8,"set"],[1,3007,199,12],[1,3008,199,14,"user"],[1,3023,200,14,"setStorage"],[1,3025,200,25],[1,3032,200,33,"JSON"],[1,3037,200,38,"stringify"],[1,3047,200,48,"user"],[1,3050,201,6],[1,3056,201,37],[1,3062,201,17,"response"],[1,3064,201,26,"status"],[1,3078,202,14,"get"],[1,3082,202,20,"logout"],[1,3090,204,4],[1,3091,204,6],[1,3097,204,13,"e"],[1,3100,205,6,"console"],[1,3108,205,14,"log"],[1,3112,205,18],[1,3137,205,44,"e"],[1,3139,206,4],[1,3142,209,2,"continueAsGuest"],[1,3158,209,19,"continueAsGuest"],[1,3163,210,4,"set"],[1,3165,210,8],[1,3166,210,10,"user"],[1,3171,210,16,"guestUser"],[1,3173,210,27,"isAuthenticated"],[1,3190,210,44],[1,3192,210,50,"isGuest"],[1,3201,210,59],[1,3203,210,65,"isLoading"],[1,3214,210,76],[1,3218,211,4,"setStorage"],[1,3220,211,15],[1,3230,211,26],[1,3239,214,2,"startTrial"],[1,3250,214,14,"async"],[1,3260,215,4],[1,3266,215,10,"token"],[1,3268,215,18,"get"],[1,3272,215,24,"token"],[1,3278,216,4],[1,3282,216,9,"token"],[1,3285,216,18,"get"],[1,3289,216,24,"isGuest"],[1,3297,216,33],[1,3304,218,4],[1,3310,218,10,"response"],[1,3318,218,27,"fetch"],[1,3324,218,33],[1,3327,218,36,"BACKEND_URL"],[1,3353,218,73],[1,3354,219,6,"method"],[1,3361,219,14],[1,3368,220,6,"headers"],[1,3376,220,15],[1,3377,220,17,"Authorization"],[1,3391,220,32],[1,3401,220,42,"token"],[1,3408,223,4],[1,3412,223,9,"response"],[1,3414,223,18,"ok"],[1,3417,223,22],[1,3418,224,6],[1,3424,224,12,"error"],[1,3432,224,26,"response"],[1,3434,224,35,"json"],[1,3441,225,6],[1,3447,225,12],[1,3451,225,16,"Error"],[1,3457,225,22,"error"],[1,3459,225,28,"detail"],[1,3467,225,38],[1,3491,226,4],[1,3492,228,4],[1,3498,228,10,"user"],[1,3506,228,23,"response"],[1,3508,228,32,"json"],[1,3515,229,4,"set"],[1,3517,229,8],[1,3518,229,10,"user"],[1,3533,230,10,"setStorage"],[1,3535,230,21],[1,3542,230,29,"JSON"],[1,3547,230,34,"stringify"],[1,3557,230,44,"user"],[1,3564,232,4],[1,3567]],"functionMap":{"names":["<global>","getStorage","setStorage","removeStorage","create$argument_0","login","register","googleLogin","logout","fetch._catch$argument_0","loadStoredAuth","updateUser","refreshUser","continueAsGuest","startTrial"],"mappings":"AAA;mBCsC;CDK;mBEE;CFM;sBGE;CHM;8CIa;SCO;GDgB;YEE;GFgB;eGE;GHgB;UIE;iBCkB,QD;GJK;kBME;GNsB;cOE;GPG;eQE;GRmB;mBSE;GTG;cUE;GViB;EJC"},"hasCjsExports":false},"type":"js/module"}]}