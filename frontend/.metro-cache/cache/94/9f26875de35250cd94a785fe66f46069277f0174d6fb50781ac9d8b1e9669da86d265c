{"dependencies":[{"name":"../core/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":76,"index":76}}],"key":"uYibmgiuaz/CrXy37RQIsJGcmz0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return PDFJavaScript;\n    }\n  });\n  var _coreIndexJs = require(_dependencyMap[0], \"../core/index.js\");\n  /**\n   * Represents JavaScript that has been embedded in a [[PDFDocument]].\n   */\n  class PDFJavaScript {\n    constructor(ref, doc, embedder) {\n      this.alreadyEmbedded = false;\n      this.ref = ref;\n      this.doc = doc;\n      this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all JavaScripts get embedded.\n     *\n     * Embed this JavaScript in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    async embed() {\n      if (!this.alreadyEmbedded) {\n        const {\n          catalog,\n          context\n        } = this.doc;\n        const ref = await this.embedder.embedIntoContext(this.doc.context, this.ref);\n        if (!catalog.has(_coreIndexJs.PDFName.of('Names'))) {\n          catalog.set(_coreIndexJs.PDFName.of('Names'), context.obj({}));\n        }\n        const Names = catalog.lookup(_coreIndexJs.PDFName.of('Names'), _coreIndexJs.PDFDict);\n        if (!Names.has(_coreIndexJs.PDFName.of('JavaScript'))) {\n          Names.set(_coreIndexJs.PDFName.of('JavaScript'), context.obj({}));\n        }\n        const Javascript = Names.lookup(_coreIndexJs.PDFName.of('JavaScript'), _coreIndexJs.PDFDict);\n        if (!Javascript.has(_coreIndexJs.PDFName.of('Names'))) {\n          Javascript.set(_coreIndexJs.PDFName.of('Names'), context.obj([]));\n        }\n        const JSNames = Javascript.lookup(_coreIndexJs.PDFName.of('Names'), _coreIndexJs.PDFArray);\n        JSNames.push(_coreIndexJs.PDFHexString.fromText(this.embedder.scriptName));\n        JSNames.push(ref);\n        this.alreadyEmbedded = true;\n      }\n    }\n  }\n  /**\n   * > **NOTE:** You probably don't want to call this method directly. Instead,\n   * > consider using the [[PDFDocument.addJavaScript]] method, which will\n   * create instances of [[PDFJavaScript]] for you.\n   *\n   * Create an instance of [[PDFJavaScript]] from an existing ref and script\n   *\n   * @param ref The unique reference for this script.\n   * @param doc The document to which the script will belong.\n   * @param embedder The embedder that will be used to embed the script.\n   */\n  PDFJavaScript.of = (ref, doc, embedder) => new PDFJavaScript(ref, doc, embedder);\n});","lineCount":70,"map":[[7,2,5,15,"Object"],[7,8,5,15],[7,9,5,15,"defineProperty"],[7,23,5,15],[7,24,5,15,"exports"],[7,31,5,15],[8,4,5,15,"enumerable"],[8,14,5,15],[9,4,5,15,"get"],[9,7,5,15],[9,18,5,15,"get"],[9,19,5,15],[10,6,5,15],[10,13,5,15,"PDFJavaScript"],[10,26,5,15],[11,4,5,15],[12,2,5,15],[13,2,1,0],[13,6,1,0,"_coreIndexJs"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,2,0],[15,0,3,0],[16,0,4,0],[17,2,5,15],[17,8,5,21,"PDFJavaScript"],[17,21,5,34],[17,22,5,35],[18,4,6,4,"constructor"],[18,15,6,15,"constructor"],[18,16,6,16,"ref"],[18,19,6,19],[18,21,6,21,"doc"],[18,24,6,24],[18,26,6,26,"embedder"],[18,34,6,34],[18,36,6,36],[19,6,7,8],[19,10,7,12],[19,11,7,13,"alreadyEmbedded"],[19,26,7,28],[19,29,7,31],[19,34,7,36],[20,6,8,8],[20,10,8,12],[20,11,8,13,"ref"],[20,14,8,16],[20,17,8,19,"ref"],[20,20,8,22],[21,6,9,8],[21,10,9,12],[21,11,9,13,"doc"],[21,14,9,16],[21,17,9,19,"doc"],[21,20,9,22],[22,6,10,8],[22,10,10,12],[22,11,10,13,"embedder"],[22,19,10,21],[22,22,10,24,"embedder"],[22,30,10,32],[23,4,11,4],[24,4,12,4],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,4,21,4],[33,10,21,10,"embed"],[33,15,21,15,"embed"],[33,16,21,15],[33,18,21,18],[34,6,22,8],[34,10,22,12],[34,11,22,13],[34,15,22,17],[34,16,22,18,"alreadyEmbedded"],[34,31,22,33],[34,33,22,35],[35,8,23,12],[35,14,23,18],[36,10,23,20,"catalog"],[36,17,23,27],[37,10,23,29,"context"],[38,8,23,37],[38,9,23,38],[38,12,23,41],[38,16,23,45],[38,17,23,46,"doc"],[38,20,23,49],[39,8,24,12],[39,14,24,18,"ref"],[39,17,24,21],[39,20,24,24],[39,26,24,30],[39,30,24,34],[39,31,24,35,"embedder"],[39,39,24,43],[39,40,24,44,"embedIntoContext"],[39,56,24,60],[39,57,24,61],[39,61,24,65],[39,62,24,66,"doc"],[39,65,24,69],[39,66,24,70,"context"],[39,73,24,77],[39,75,24,79],[39,79,24,83],[39,80,24,84,"ref"],[39,83,24,87],[39,84,24,88],[40,8,25,12],[40,12,25,16],[40,13,25,17,"catalog"],[40,20,25,24],[40,21,25,25,"has"],[40,24,25,28],[40,25,25,29,"PDFName"],[40,37,25,36],[40,38,25,36,"PDFName"],[40,45,25,36],[40,46,25,37,"of"],[40,48,25,39],[40,49,25,40],[40,56,25,47],[40,57,25,48],[40,58,25,49],[40,60,25,51],[41,10,26,16,"catalog"],[41,17,26,23],[41,18,26,24,"set"],[41,21,26,27],[41,22,26,28,"PDFName"],[41,34,26,35],[41,35,26,35,"PDFName"],[41,42,26,35],[41,43,26,36,"of"],[41,45,26,38],[41,46,26,39],[41,53,26,46],[41,54,26,47],[41,56,26,49,"context"],[41,63,26,56],[41,64,26,57,"obj"],[41,67,26,60],[41,68,26,61],[41,69,26,62],[41,70,26,63],[41,71,26,64],[41,72,26,65],[42,8,27,12],[43,8,28,12],[43,14,28,18,"Names"],[43,19,28,23],[43,22,28,26,"catalog"],[43,29,28,33],[43,30,28,34,"lookup"],[43,36,28,40],[43,37,28,41,"PDFName"],[43,49,28,48],[43,50,28,48,"PDFName"],[43,57,28,48],[43,58,28,49,"of"],[43,60,28,51],[43,61,28,52],[43,68,28,59],[43,69,28,60],[43,71,28,62,"PDFDict"],[43,83,28,69],[43,84,28,69,"PDFDict"],[43,91,28,69],[43,92,28,70],[44,8,29,12],[44,12,29,16],[44,13,29,17,"Names"],[44,18,29,22],[44,19,29,23,"has"],[44,22,29,26],[44,23,29,27,"PDFName"],[44,35,29,34],[44,36,29,34,"PDFName"],[44,43,29,34],[44,44,29,35,"of"],[44,46,29,37],[44,47,29,38],[44,59,29,50],[44,60,29,51],[44,61,29,52],[44,63,29,54],[45,10,30,16,"Names"],[45,15,30,21],[45,16,30,22,"set"],[45,19,30,25],[45,20,30,26,"PDFName"],[45,32,30,33],[45,33,30,33,"PDFName"],[45,40,30,33],[45,41,30,34,"of"],[45,43,30,36],[45,44,30,37],[45,56,30,49],[45,57,30,50],[45,59,30,52,"context"],[45,66,30,59],[45,67,30,60,"obj"],[45,70,30,63],[45,71,30,64],[45,72,30,65],[45,73,30,66],[45,74,30,67],[45,75,30,68],[46,8,31,12],[47,8,32,12],[47,14,32,18,"Javascript"],[47,24,32,28],[47,27,32,31,"Names"],[47,32,32,36],[47,33,32,37,"lookup"],[47,39,32,43],[47,40,32,44,"PDFName"],[47,52,32,51],[47,53,32,51,"PDFName"],[47,60,32,51],[47,61,32,52,"of"],[47,63,32,54],[47,64,32,55],[47,76,32,67],[47,77,32,68],[47,79,32,70,"PDFDict"],[47,91,32,77],[47,92,32,77,"PDFDict"],[47,99,32,77],[47,100,32,78],[48,8,33,12],[48,12,33,16],[48,13,33,17,"Javascript"],[48,23,33,27],[48,24,33,28,"has"],[48,27,33,31],[48,28,33,32,"PDFName"],[48,40,33,39],[48,41,33,39,"PDFName"],[48,48,33,39],[48,49,33,40,"of"],[48,51,33,42],[48,52,33,43],[48,59,33,50],[48,60,33,51],[48,61,33,52],[48,63,33,54],[49,10,34,16,"Javascript"],[49,20,34,26],[49,21,34,27,"set"],[49,24,34,30],[49,25,34,31,"PDFName"],[49,37,34,38],[49,38,34,38,"PDFName"],[49,45,34,38],[49,46,34,39,"of"],[49,48,34,41],[49,49,34,42],[49,56,34,49],[49,57,34,50],[49,59,34,52,"context"],[49,66,34,59],[49,67,34,60,"obj"],[49,70,34,63],[49,71,34,64],[49,73,34,66],[49,74,34,67],[49,75,34,68],[50,8,35,12],[51,8,36,12],[51,14,36,18,"JSNames"],[51,21,36,25],[51,24,36,28,"Javascript"],[51,34,36,38],[51,35,36,39,"lookup"],[51,41,36,45],[51,42,36,46,"PDFName"],[51,54,36,53],[51,55,36,53,"PDFName"],[51,62,36,53],[51,63,36,54,"of"],[51,65,36,56],[51,66,36,57],[51,73,36,64],[51,74,36,65],[51,76,36,67,"PDFArray"],[51,88,36,75],[51,89,36,75,"PDFArray"],[51,97,36,75],[51,98,36,76],[52,8,37,12,"JSNames"],[52,15,37,19],[52,16,37,20,"push"],[52,20,37,24],[52,21,37,25,"PDFHexString"],[52,33,37,37],[52,34,37,37,"PDFHexString"],[52,46,37,37],[52,47,37,38,"fromText"],[52,55,37,46],[52,56,37,47],[52,60,37,51],[52,61,37,52,"embedder"],[52,69,37,60],[52,70,37,61,"scriptName"],[52,80,37,71],[52,81,37,72],[52,82,37,73],[53,8,38,12,"JSNames"],[53,15,38,19],[53,16,38,20,"push"],[53,20,38,24],[53,21,38,25,"ref"],[53,24,38,28],[53,25,38,29],[54,8,39,12],[54,12,39,16],[54,13,39,17,"alreadyEmbedded"],[54,28,39,32],[54,31,39,35],[54,35,39,39],[55,6,40,8],[56,4,41,4],[57,2,42,0],[58,2,43,0],[59,0,44,0],[60,0,45,0],[61,0,46,0],[62,0,47,0],[63,0,48,0],[64,0,49,0],[65,0,50,0],[66,0,51,0],[67,0,52,0],[68,0,53,0],[69,2,54,0,"PDFJavaScript"],[69,15,54,13],[69,16,54,14,"of"],[69,18,54,16],[69,21,54,19],[69,22,54,20,"ref"],[69,25,54,23],[69,27,54,25,"doc"],[69,30,54,28],[69,32,54,30,"embedder"],[69,40,54,38],[69,45,54,43],[69,49,54,47,"PDFJavaScript"],[69,62,54,60],[69,63,54,61,"ref"],[69,66,54,64],[69,68,54,66,"doc"],[69,71,54,69],[69,73,54,71,"embedder"],[69,81,54,79],[69,82,54,80],[70,0,54,81],[70,3]],"functionMap":{"names":["<global>","PDFJavaScript","constructor","embed","of"],"mappings":"AAA;eCI;ICC;KDK;IEU;KFoB;CDC;mBIY,6DJ"},"hasCjsExports":false},"type":"js/module"}]}