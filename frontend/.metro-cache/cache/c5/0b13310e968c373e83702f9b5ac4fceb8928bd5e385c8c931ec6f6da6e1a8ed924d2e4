{"dependencies":[{"name":"../../utils/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":75,"index":75}}],"key":"AUCnYNcCot7PlCuuOg5nVchJREc=","exportNames":["*"],"imports":1}},{"name":"../../utils/unicode.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":76},"end":{"line":2,"column":98,"index":174}}],"key":"tvvOyJUMlW2Ik+effQcmAxzNhJM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createCmap\", {\n    enumerable: true,\n    get: function () {\n      return createCmap;\n    }\n  });\n  var _utilsIndexJs = require(_dependencyMap[0], \"../../utils/index.js\");\n  var _utilsUnicodeJs = require(_dependencyMap[1], \"../../utils/unicode.js\");\n  /** `glyphs` should be an array of unique glyphs */\n  const createCmap = (glyphs, glyphId) => {\n    const bfChars = new Array(glyphs.length);\n    for (let idx = 0, len = glyphs.length; idx < len; idx++) {\n      const glyph = glyphs[idx];\n      const id = cmapHexFormat(cmapHexString(glyphId(glyph)));\n      const unicode = cmapHexFormat(...glyph.codePoints.map(cmapCodePointFormat));\n      bfChars[idx] = [id, unicode];\n    }\n    return fillCmapTemplate(bfChars);\n  };\n  /* =============================== Templates ================================ */\n  const fillCmapTemplate = bfChars => `\\\n/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange\n${bfChars.length} beginbfchar\n${bfChars.map(([glyphId, codePoint]) => `${glyphId} ${codePoint}`).join('\\n')}\nendbfchar\nendcmap\nCMapName currentdict /CMap defineresource pop\nend\nend\\\n`;\n  /* =============================== Utilities ================================ */\n  const cmapHexFormat = (...values) => `<${values.join('')}>`;\n  const cmapHexString = value => (0, _utilsIndexJs.toHexStringOfMinLength)(value, 4);\n  const cmapCodePointFormat = codePoint => {\n    if ((0, _utilsUnicodeJs.isWithinBMP)(codePoint)) return cmapHexString(codePoint);\n    if ((0, _utilsUnicodeJs.hasSurrogates)(codePoint)) {\n      const hs = (0, _utilsUnicodeJs.highSurrogate)(codePoint);\n      const ls = (0, _utilsUnicodeJs.lowSurrogate)(codePoint);\n      return `${cmapHexString(hs)}${cmapHexString(ls)}`;\n    }\n    const hex = (0, _utilsIndexJs.toHexString)(codePoint);\n    const msg = `0x${hex} is not a valid UTF-8 or UTF-16 codepoint.`;\n    throw new Error(msg);\n  };\n});","lineCount":63,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"createCmap"],[10,23,4,0],[11,4,4,0],[12,2,4,0],[13,2,1,0],[13,6,1,0,"_utilsIndexJs"],[13,19,1,0],[13,22,1,0,"require"],[13,29,1,0],[13,30,1,0,"_dependencyMap"],[13,44,1,0],[14,2,2,0],[14,6,2,0,"_utilsUnicodeJs"],[14,21,2,0],[14,24,2,0,"require"],[14,31,2,0],[14,32,2,0,"_dependencyMap"],[14,46,2,0],[15,2,3,0],[16,2,4,7],[16,8,4,13,"createCmap"],[16,18,4,23],[16,21,4,26,"createCmap"],[16,22,4,27,"glyphs"],[16,28,4,33],[16,30,4,35,"glyphId"],[16,37,4,42],[16,42,4,47],[17,4,5,4],[17,10,5,10,"bfChars"],[17,17,5,17],[17,20,5,20],[17,24,5,24,"Array"],[17,29,5,29],[17,30,5,30,"glyphs"],[17,36,5,36],[17,37,5,37,"length"],[17,43,5,43],[17,44,5,44],[18,4,6,4],[18,9,6,9],[18,13,6,13,"idx"],[18,16,6,16],[18,19,6,19],[18,20,6,20],[18,22,6,22,"len"],[18,25,6,25],[18,28,6,28,"glyphs"],[18,34,6,34],[18,35,6,35,"length"],[18,41,6,41],[18,43,6,43,"idx"],[18,46,6,46],[18,49,6,49,"len"],[18,52,6,52],[18,54,6,54,"idx"],[18,57,6,57],[18,59,6,59],[18,61,6,61],[19,6,7,8],[19,12,7,14,"glyph"],[19,17,7,19],[19,20,7,22,"glyphs"],[19,26,7,28],[19,27,7,29,"idx"],[19,30,7,32],[19,31,7,33],[20,6,8,8],[20,12,8,14,"id"],[20,14,8,16],[20,17,8,19,"cmapHexFormat"],[20,30,8,32],[20,31,8,33,"cmapHexString"],[20,44,8,46],[20,45,8,47,"glyphId"],[20,52,8,54],[20,53,8,55,"glyph"],[20,58,8,60],[20,59,8,61],[20,60,8,62],[20,61,8,63],[21,6,9,8],[21,12,9,14,"unicode"],[21,19,9,21],[21,22,9,24,"cmapHexFormat"],[21,35,9,37],[21,36,9,38],[21,39,9,41,"glyph"],[21,44,9,46],[21,45,9,47,"codePoints"],[21,55,9,57],[21,56,9,58,"map"],[21,59,9,61],[21,60,9,62,"cmapCodePointFormat"],[21,79,9,81],[21,80,9,82],[21,81,9,83],[22,6,10,8,"bfChars"],[22,13,10,15],[22,14,10,16,"idx"],[22,17,10,19],[22,18,10,20],[22,21,10,23],[22,22,10,24,"id"],[22,24,10,26],[22,26,10,28,"unicode"],[22,33,10,35],[22,34,10,36],[23,4,11,4],[24,4,12,4],[24,11,12,11,"fillCmapTemplate"],[24,27,12,27],[24,28,12,28,"bfChars"],[24,35,12,35],[24,36,12,36],[25,2,13,0],[25,3,13,1],[26,2,14,0],[27,2,15,0],[27,8,15,6,"fillCmapTemplate"],[27,24,15,22],[27,27,15,26,"bfChars"],[27,34,15,33],[27,38,15,38],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[41,2,29,2,"bfChars"],[41,9,29,9],[41,10,29,10,"length"],[41,16,29,16],[42,0,30,0],[42,2,30,2,"bfChars"],[42,9,30,9],[42,10,30,10,"map"],[42,13,30,13],[42,14,30,14],[42,15,30,15],[42,16,30,16,"glyphId"],[42,23,30,23],[42,25,30,25,"codePoint"],[42,34,30,34],[42,35,30,35],[42,40,30,40],[42,43,30,43,"glyphId"],[42,50,30,50],[42,54,30,54,"codePoint"],[42,63,30,63],[42,65,30,65],[42,66,30,66],[42,67,30,67,"join"],[42,71,30,71],[42,72,30,72],[42,76,30,76],[42,77,30,77],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[48,1,36,1],[49,2,37,0],[50,2,38,0],[50,8,38,6,"cmapHexFormat"],[50,21,38,19],[50,24,38,22,"cmapHexFormat"],[50,25,38,23],[50,28,38,26,"values"],[50,34,38,32],[50,39,38,37],[50,43,38,41,"values"],[50,49,38,47],[50,50,38,48,"join"],[50,54,38,52],[50,55,38,53],[50,57,38,55],[50,58,38,56],[50,61,38,59],[51,2,39,0],[51,8,39,6,"cmapHexString"],[51,21,39,19],[51,24,39,23,"value"],[51,29,39,28],[51,33,39,33],[51,37,39,33,"toHexStringOfMinLength"],[51,50,39,55],[51,51,39,55,"toHexStringOfMinLength"],[51,73,39,55],[51,75,39,56,"value"],[51,80,39,61],[51,82,39,63],[51,83,39,64],[51,84,39,65],[52,2,40,0],[52,8,40,6,"cmapCodePointFormat"],[52,27,40,25],[52,30,40,29,"codePoint"],[52,39,40,38],[52,43,40,43],[53,4,41,4],[53,8,41,8],[53,12,41,8,"isWithinBMP"],[53,27,41,19],[53,28,41,19,"isWithinBMP"],[53,39,41,19],[53,41,41,20,"codePoint"],[53,50,41,29],[53,51,41,30],[53,53,42,8],[53,60,42,15,"cmapHexString"],[53,73,42,28],[53,74,42,29,"codePoint"],[53,83,42,38],[53,84,42,39],[54,4,43,4],[54,8,43,8],[54,12,43,8,"hasSurrogates"],[54,27,43,21],[54,28,43,21,"hasSurrogates"],[54,41,43,21],[54,43,43,22,"codePoint"],[54,52,43,31],[54,53,43,32],[54,55,43,34],[55,6,44,8],[55,12,44,14,"hs"],[55,14,44,16],[55,17,44,19],[55,21,44,19,"highSurrogate"],[55,36,44,32],[55,37,44,32,"highSurrogate"],[55,50,44,32],[55,52,44,33,"codePoint"],[55,61,44,42],[55,62,44,43],[56,6,45,8],[56,12,45,14,"ls"],[56,14,45,16],[56,17,45,19],[56,21,45,19,"lowSurrogate"],[56,36,45,31],[56,37,45,31,"lowSurrogate"],[56,49,45,31],[56,51,45,32,"codePoint"],[56,60,45,41],[56,61,45,42],[57,6,46,8],[57,13,46,15],[57,16,46,18,"cmapHexString"],[57,29,46,31],[57,30,46,32,"hs"],[57,32,46,34],[57,33,46,35],[57,36,46,38,"cmapHexString"],[57,49,46,51],[57,50,46,52,"ls"],[57,52,46,54],[57,53,46,55],[57,55,46,57],[58,4,47,4],[59,4,48,4],[59,10,48,10,"hex"],[59,13,48,13],[59,16,48,16],[59,20,48,16,"toHexString"],[59,33,48,27],[59,34,48,27,"toHexString"],[59,45,48,27],[59,47,48,28,"codePoint"],[59,56,48,37],[59,57,48,38],[60,4,49,4],[60,10,49,10,"msg"],[60,13,49,13],[60,16,49,16],[60,21,49,21,"hex"],[60,24,49,24],[60,68,49,68],[61,4,50,4],[61,10,50,10],[61,14,50,14,"Error"],[61,19,50,19],[61,20,50,20,"msg"],[61,23,50,23],[61,24,50,24],[62,2,51,0],[62,3,51,1],[63,0,51,2],[63,3]],"functionMap":{"names":["<global>","createCmap","fillCmapTemplate","bfChars.map$argument_0","cmapHexFormat","cmapHexString","cmapCodePointFormat"],"mappings":"AAA;0BCG;CDS;yBEE;cCe,mDD;CFM;sBIE,qCJ;sBKC,2CL;4BMC;CNW"},"hasCjsExports":false},"type":"js/module"}]}