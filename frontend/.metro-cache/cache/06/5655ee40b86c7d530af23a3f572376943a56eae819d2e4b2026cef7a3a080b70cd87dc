{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  // prettier-ignore\n  var MARKERS = [0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc8, 0xffc9, 0xffca, 0xffcb, 0xffcc, 0xffcd, 0xffce, 0xffcf];\n  var ColorSpace;\n  (function (ColorSpace) {\n    ColorSpace[\"DeviceGray\"] = \"DeviceGray\";\n    ColorSpace[\"DeviceRGB\"] = \"DeviceRGB\";\n    ColorSpace[\"DeviceCMYK\"] = \"DeviceCMYK\";\n  })(ColorSpace || (ColorSpace = {}));\n  var ChannelToColorSpace = {\n    1: ColorSpace.DeviceGray,\n    3: ColorSpace.DeviceRGB,\n    4: ColorSpace.DeviceCMYK\n  };\n  /**\n   * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n   * this class borrows from:\n   *   https://github.com/foliojs/pdfkit/blob/a6af76467ce06bd6a2af4aa7271ccac9ff152a7d/lib/image/jpeg.js\n   */\n  var JpegEmbedder = /*#__PURE__*/function () {\n    function JpegEmbedder(imageData, bitsPerComponent, width, height, colorSpace) {\n      (0, _classCallCheck.default)(this, JpegEmbedder);\n      this.imageData = imageData;\n      this.bitsPerComponent = bitsPerComponent;\n      this.width = width;\n      this.height = height;\n      this.colorSpace = colorSpace;\n    }\n    return (0, _createClass.default)(JpegEmbedder, [{\n      key: \"embedIntoContext\",\n      value: function () {\n        var _embedIntoContext = (0, _asyncToGenerator.default)(function* (context, ref) {\n          var xObject = context.stream(this.imageData, {\n            Type: 'XObject',\n            Subtype: 'Image',\n            BitsPerComponent: this.bitsPerComponent,\n            Width: this.width,\n            Height: this.height,\n            ColorSpace: this.colorSpace,\n            Filter: 'DCTDecode',\n            // CMYK JPEG streams in PDF are typically stored complemented,\n            // with 1 as 'off' and 0 as 'on' (PDF 32000-1:2008, 8.6.4.4).\n            //\n            // Standalone CMYK JPEG (usually exported by Photoshop) are\n            // stored inverse, with 0 as 'off' and 1 as 'on', like RGB.\n            //\n            // Applying a swap here as a hedge that most bytes passing\n            // through this method will benefit from it.\n            Decode: this.colorSpace === ColorSpace.DeviceCMYK ? [1, 0, 1, 0, 1, 0, 1, 0] : undefined\n          });\n          if (ref) {\n            context.assign(ref, xObject);\n            return ref;\n          } else {\n            return context.register(xObject);\n          }\n        });\n        function embedIntoContext(_x, _x2) {\n          return _embedIntoContext.apply(this, arguments);\n        }\n        return embedIntoContext;\n      }()\n    }], [{\n      key: \"for\",\n      value: function () {\n        var _for2 = (0, _asyncToGenerator.default)(function* (imageData) {\n          var dataView = new DataView(imageData.buffer);\n          var soi = dataView.getUint16(0);\n          if (soi !== 0xffd8) throw new Error('SOI not found in JPEG');\n          var pos = 2;\n          var marker;\n          while (pos < dataView.byteLength) {\n            marker = dataView.getUint16(pos);\n            pos += 2;\n            if (MARKERS.includes(marker)) break;\n            pos += dataView.getUint16(pos);\n          }\n          if (!MARKERS.includes(marker)) throw new Error('Invalid JPEG');\n          pos += 2;\n          var bitsPerComponent = dataView.getUint8(pos++);\n          var height = dataView.getUint16(pos);\n          pos += 2;\n          var width = dataView.getUint16(pos);\n          pos += 2;\n          var channelByte = dataView.getUint8(pos++);\n          var channelName = ChannelToColorSpace[channelByte];\n          if (!channelName) throw new Error('Unknown JPEG channel.');\n          var colorSpace = channelName;\n          return new JpegEmbedder(imageData, bitsPerComponent, width, height, colorSpace);\n        });\n        function _for(_x3) {\n          return _for2.apply(this, arguments);\n        }\n        return _for;\n      }()\n    }]);\n  }();\n  var _default = JpegEmbedder;\n});","lineCount":121,"map":[[12,2,92,0,"Object"],[12,8,92,0],[12,9,92,0,"defineProperty"],[12,23,92,0],[12,24,92,0,"exports"],[12,31,92,0],[13,4,92,0,"enumerable"],[13,14,92,0],[14,4,92,0,"get"],[14,7,92,0],[14,18,92,0,"get"],[14,19,92,0],[15,6,92,0],[15,13,92,0,"_default"],[15,21,92,0],[16,4,92,0],[17,2,92,0],[18,2,92,28],[18,6,92,28,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,92,28],[18,45,92,28,"require"],[18,52,92,28],[18,53,92,28,"_dependencyMap"],[18,67,92,28],[19,2,92,28],[19,6,92,28,"_asyncToGenerator"],[19,23,92,28],[19,26,92,28,"_interopDefault"],[19,41,92,28],[19,42,92,28,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,92,28],[20,2,92,28],[20,6,92,28,"_babelRuntimeHelpersClassCallCheck"],[20,40,92,28],[20,43,92,28,"require"],[20,50,92,28],[20,51,92,28,"_dependencyMap"],[20,65,92,28],[21,2,92,28],[21,6,92,28,"_classCallCheck"],[21,21,92,28],[21,24,92,28,"_interopDefault"],[21,39,92,28],[21,40,92,28,"_babelRuntimeHelpersClassCallCheck"],[21,74,92,28],[22,2,92,28],[22,6,92,28,"_babelRuntimeHelpersCreateClass"],[22,37,92,28],[22,40,92,28,"require"],[22,47,92,28],[22,48,92,28,"_dependencyMap"],[22,62,92,28],[23,2,92,28],[23,6,92,28,"_createClass"],[23,18,92,28],[23,21,92,28,"_interopDefault"],[23,36,92,28],[23,37,92,28,"_babelRuntimeHelpersCreateClass"],[23,68,92,28],[24,2,1,0],[25,2,2,0],[25,6,2,6,"MARKERS"],[25,13,2,13],[25,16,2,16],[25,17,3,4],[25,23,3,10],[25,25,3,12],[25,31,3,18],[25,33,3,20],[25,39,3,26],[25,41,4,4],[25,47,4,10],[25,49,4,12],[25,55,4,18],[25,57,4,20],[25,63,4,26],[25,65,5,4],[25,71,5,10],[25,73,5,12],[25,79,5,18],[25,81,5,20],[25,87,5,26],[25,89,6,4],[25,95,6,10],[25,97,6,12],[25,103,6,18],[25,105,6,20],[25,111,6,26],[25,113,7,4],[25,119,7,10],[25,121,7,12],[25,127,7,18],[25,129,7,20],[25,135,7,26],[25,136,8,1],[26,2,9,0],[26,6,9,4,"ColorSpace"],[26,16,9,14],[27,2,10,0],[27,3,10,1],[27,13,10,11,"ColorSpace"],[27,23,10,21],[27,25,10,23],[28,4,11,4,"ColorSpace"],[28,14,11,14],[28,15,11,15],[28,27,11,27],[28,28,11,28],[28,31,11,31],[28,43,11,43],[29,4,12,4,"ColorSpace"],[29,14,12,14],[29,15,12,15],[29,26,12,26],[29,27,12,27],[29,30,12,30],[29,41,12,41],[30,4,13,4,"ColorSpace"],[30,14,13,14],[30,15,13,15],[30,27,13,27],[30,28,13,28],[30,31,13,31],[30,43,13,43],[31,2,14,0],[31,3,14,1],[31,5,14,3,"ColorSpace"],[31,15,14,13],[31,20,14,18,"ColorSpace"],[31,30,14,28],[31,33,14,31],[31,34,14,32],[31,35,14,33],[31,36,14,34],[31,37,14,35],[32,2,15,0],[32,6,15,6,"ChannelToColorSpace"],[32,25,15,25],[32,28,15,28],[33,4,16,4],[33,5,16,5],[33,7,16,7,"ColorSpace"],[33,17,16,17],[33,18,16,18,"DeviceGray"],[33,28,16,28],[34,4,17,4],[34,5,17,5],[34,7,17,7,"ColorSpace"],[34,17,17,17],[34,18,17,18,"DeviceRGB"],[34,27,17,27],[35,4,18,4],[35,5,18,5],[35,7,18,7,"ColorSpace"],[35,17,18,17],[35,18,18,18,"DeviceCMYK"],[36,2,19,0],[36,3,19,1],[37,2,20,0],[38,0,21,0],[39,0,22,0],[40,0,23,0],[41,0,24,0],[42,2,20,0],[42,6,25,6,"JpegEmbedder"],[42,18,25,18],[43,4,55,4],[43,13,55,4,"JpegEmbedder"],[43,26,55,16,"imageData"],[43,35,55,25],[43,37,55,27,"bitsPerComponent"],[43,53,55,43],[43,55,55,45,"width"],[43,60,55,50],[43,62,55,52,"height"],[43,68,55,58],[43,70,55,60,"colorSpace"],[43,80,55,70],[43,82,55,72],[44,6,55,72],[44,10,55,72,"_classCallCheck"],[44,25,55,72],[44,26,55,72,"default"],[44,33,55,72],[44,41,55,72,"JpegEmbedder"],[44,53,55,72],[45,6,56,8],[45,10,56,12],[45,11,56,13,"imageData"],[45,20,56,22],[45,23,56,25,"imageData"],[45,32,56,34],[46,6,57,8],[46,10,57,12],[46,11,57,13,"bitsPerComponent"],[46,27,57,29],[46,30,57,32,"bitsPerComponent"],[46,46,57,48],[47,6,58,8],[47,10,58,12],[47,11,58,13,"width"],[47,16,58,18],[47,19,58,21,"width"],[47,24,58,26],[48,6,59,8],[48,10,59,12],[48,11,59,13,"height"],[48,17,59,19],[48,20,59,22,"height"],[48,26,59,28],[49,6,60,8],[49,10,60,12],[49,11,60,13,"colorSpace"],[49,21,60,23],[49,24,60,26,"colorSpace"],[49,34,60,36],[50,4,61,4],[51,4,61,5],[51,15,61,5,"_createClass"],[51,27,61,5],[51,28,61,5,"default"],[51,35,61,5],[51,37,61,5,"JpegEmbedder"],[51,49,61,5],[52,6,61,5,"key"],[52,9,61,5],[53,6,61,5,"value"],[53,11,61,5],[54,8,61,5],[54,12,61,5,"_embedIntoContext"],[54,29,61,5],[54,36,61,5,"_asyncToGenerator"],[54,53,61,5],[54,54,61,5,"default"],[54,61,61,5],[54,63,62,4],[54,74,62,27,"context"],[54,81,62,34],[54,83,62,36,"ref"],[54,86,62,39],[54,88,62,41],[55,10,63,8],[55,14,63,14,"xObject"],[55,21,63,21],[55,24,63,24,"context"],[55,31,63,31],[55,32,63,32,"stream"],[55,38,63,38],[55,39,63,39],[55,43,63,43],[55,44,63,44,"imageData"],[55,53,63,53],[55,55,63,55],[56,12,64,12,"Type"],[56,16,64,16],[56,18,64,18],[56,27,64,27],[57,12,65,12,"Subtype"],[57,19,65,19],[57,21,65,21],[57,28,65,28],[58,12,66,12,"BitsPerComponent"],[58,28,66,28],[58,30,66,30],[58,34,66,34],[58,35,66,35,"bitsPerComponent"],[58,51,66,51],[59,12,67,12,"Width"],[59,17,67,17],[59,19,67,19],[59,23,67,23],[59,24,67,24,"width"],[59,29,67,29],[60,12,68,12,"Height"],[60,18,68,18],[60,20,68,20],[60,24,68,24],[60,25,68,25,"height"],[60,31,68,31],[61,12,69,12,"ColorSpace"],[61,22,69,22],[61,24,69,24],[61,28,69,28],[61,29,69,29,"colorSpace"],[61,39,69,39],[62,12,70,12,"Filter"],[62,18,70,18],[62,20,70,20],[62,31,70,31],[63,12,71,12],[64,12,72,12],[65,12,73,12],[66,12,74,12],[67,12,75,12],[68,12,76,12],[69,12,77,12],[70,12,78,12],[71,12,79,12,"Decode"],[71,18,79,18],[71,20,79,20],[71,24,79,24],[71,25,79,25,"colorSpace"],[71,35,79,35],[71,40,79,40,"ColorSpace"],[71,50,79,50],[71,51,79,51,"DeviceCMYK"],[71,61,79,61],[71,64,80,18],[71,65,80,19],[71,66,80,20],[71,68,80,22],[71,69,80,23],[71,71,80,25],[71,72,80,26],[71,74,80,28],[71,75,80,29],[71,77,80,31],[71,78,80,32],[71,80,80,34],[71,81,80,35],[71,83,80,37],[71,84,80,38],[71,86,80,40],[71,87,80,41],[71,88,80,42],[71,91,81,18,"undefined"],[72,10,82,8],[72,11,82,9],[72,12,82,10],[73,10,83,8],[73,14,83,12,"ref"],[73,17,83,15],[73,19,83,17],[74,12,84,12,"context"],[74,19,84,19],[74,20,84,20,"assign"],[74,26,84,26],[74,27,84,27,"ref"],[74,30,84,30],[74,32,84,32,"xObject"],[74,39,84,39],[74,40,84,40],[75,12,85,12],[75,19,85,19,"ref"],[75,22,85,22],[76,10,86,8],[76,11,86,9],[76,17,87,13],[77,12,88,12],[77,19,88,19,"context"],[77,26,88,26],[77,27,88,27,"register"],[77,35,88,35],[77,36,88,36,"xObject"],[77,43,88,43],[77,44,88,44],[78,10,89,8],[79,8,90,4],[79,9,90,5],[80,8,90,5],[80,17,62,10,"embedIntoContext"],[80,33,62,26,"embedIntoContext"],[80,34,62,26,"_x"],[80,36,62,26],[80,38,62,26,"_x2"],[80,41,62,26],[81,10,62,26],[81,17,62,26,"_embedIntoContext"],[81,34,62,26],[81,35,62,26,"apply"],[81,40,62,26],[81,47,62,26,"arguments"],[81,56,62,26],[82,8,62,26],[83,8,62,26],[83,15,62,10,"embedIntoContext"],[83,31,62,26],[84,6,62,26],[85,4,62,26],[86,6,62,26,"key"],[86,9,62,26],[87,6,62,26,"value"],[87,11,62,26],[88,8,62,26],[88,12,62,26,"_for2"],[88,17,62,26],[88,24,62,26,"_asyncToGenerator"],[88,41,62,26],[88,42,62,26,"default"],[88,49,62,26],[88,51,26,4],[88,62,26,21,"imageData"],[88,71,26,30],[88,73,26,32],[89,10,27,8],[89,14,27,14,"dataView"],[89,22,27,22],[89,25,27,25],[89,29,27,29,"DataView"],[89,37,27,37],[89,38,27,38,"imageData"],[89,47,27,47],[89,48,27,48,"buffer"],[89,54,27,54],[89,55,27,55],[90,10,28,8],[90,14,28,14,"soi"],[90,17,28,17],[90,20,28,20,"dataView"],[90,28,28,28],[90,29,28,29,"getUint16"],[90,38,28,38],[90,39,28,39],[90,40,28,40],[90,41,28,41],[91,10,29,8],[91,14,29,12,"soi"],[91,17,29,15],[91,22,29,20],[91,28,29,26],[91,30,30,12],[91,36,30,18],[91,40,30,22,"Error"],[91,45,30,27],[91,46,30,28],[91,69,30,51],[91,70,30,52],[92,10,31,8],[92,14,31,12,"pos"],[92,17,31,15],[92,20,31,18],[92,21,31,19],[93,10,32,8],[93,14,32,12,"marker"],[93,20,32,18],[94,10,33,8],[94,17,33,15,"pos"],[94,20,33,18],[94,23,33,21,"dataView"],[94,31,33,29],[94,32,33,30,"byteLength"],[94,42,33,40],[94,44,33,42],[95,12,34,12,"marker"],[95,18,34,18],[95,21,34,21,"dataView"],[95,29,34,29],[95,30,34,30,"getUint16"],[95,39,34,39],[95,40,34,40,"pos"],[95,43,34,43],[95,44,34,44],[96,12,35,12,"pos"],[96,15,35,15],[96,19,35,19],[96,20,35,20],[97,12,36,12],[97,16,36,16,"MARKERS"],[97,23,36,23],[97,24,36,24,"includes"],[97,32,36,32],[97,33,36,33,"marker"],[97,39,36,39],[97,40,36,40],[97,42,37,16],[98,12,38,12,"pos"],[98,15,38,15],[98,19,38,19,"dataView"],[98,27,38,27],[98,28,38,28,"getUint16"],[98,37,38,37],[98,38,38,38,"pos"],[98,41,38,41],[98,42,38,42],[99,10,39,8],[100,10,40,8],[100,14,40,12],[100,15,40,13,"MARKERS"],[100,22,40,20],[100,23,40,21,"includes"],[100,31,40,29],[100,32,40,30,"marker"],[100,38,40,36],[100,39,40,37],[100,41,41,12],[100,47,41,18],[100,51,41,22,"Error"],[100,56,41,27],[100,57,41,28],[100,71,41,42],[100,72,41,43],[101,10,42,8,"pos"],[101,13,42,11],[101,17,42,15],[101,18,42,16],[102,10,43,8],[102,14,43,14,"bitsPerComponent"],[102,30,43,30],[102,33,43,33,"dataView"],[102,41,43,41],[102,42,43,42,"getUint8"],[102,50,43,50],[102,51,43,51,"pos"],[102,54,43,54],[102,56,43,56],[102,57,43,57],[103,10,44,8],[103,14,44,14,"height"],[103,20,44,20],[103,23,44,23,"dataView"],[103,31,44,31],[103,32,44,32,"getUint16"],[103,41,44,41],[103,42,44,42,"pos"],[103,45,44,45],[103,46,44,46],[104,10,45,8,"pos"],[104,13,45,11],[104,17,45,15],[104,18,45,16],[105,10,46,8],[105,14,46,14,"width"],[105,19,46,19],[105,22,46,22,"dataView"],[105,30,46,30],[105,31,46,31,"getUint16"],[105,40,46,40],[105,41,46,41,"pos"],[105,44,46,44],[105,45,46,45],[106,10,47,8,"pos"],[106,13,47,11],[106,17,47,15],[106,18,47,16],[107,10,48,8],[107,14,48,14,"channelByte"],[107,25,48,25],[107,28,48,28,"dataView"],[107,36,48,36],[107,37,48,37,"getUint8"],[107,45,48,45],[107,46,48,46,"pos"],[107,49,48,49],[107,51,48,51],[107,52,48,52],[108,10,49,8],[108,14,49,14,"channelName"],[108,25,49,25],[108,28,49,28,"ChannelToColorSpace"],[108,47,49,47],[108,48,49,48,"channelByte"],[108,59,49,59],[108,60,49,60],[109,10,50,8],[109,14,50,12],[109,15,50,13,"channelName"],[109,26,50,24],[109,28,51,12],[109,34,51,18],[109,38,51,22,"Error"],[109,43,51,27],[109,44,51,28],[109,67,51,51],[109,68,51,52],[110,10,52,8],[110,14,52,14,"colorSpace"],[110,24,52,24],[110,27,52,27,"channelName"],[110,38,52,38],[111,10,53,8],[111,17,53,15],[111,21,53,19,"JpegEmbedder"],[111,33,53,31],[111,34,53,32,"imageData"],[111,43,53,41],[111,45,53,43,"bitsPerComponent"],[111,61,53,59],[111,63,53,61,"width"],[111,68,53,66],[111,70,53,68,"height"],[111,76,53,74],[111,78,53,76,"colorSpace"],[111,88,53,86],[111,89,53,87],[112,8,54,4],[112,9,54,5],[113,8,54,5],[113,17,26,17,"for"],[113,21,26,20,"for"],[113,22,26,20,"_x3"],[113,25,26,20],[114,10,26,20],[114,17,26,20,"_for2"],[114,22,26,20],[114,23,26,20,"apply"],[114,28,26,20],[114,35,26,20,"arguments"],[114,44,26,20],[115,8,26,20],[116,8,26,20],[116,15,26,17,"for"],[116,19,26,20],[117,6,26,20],[118,4,26,20],[119,2,26,20],[120,2,92,0],[120,6,92,0,"_default"],[120,14,92,0],[120,17,92,15,"JpegEmbedder"],[120,29,92,27],[121,0,92,28],[121,3]],"functionMap":{"names":["<global>","<anonymous>","JpegEmbedder","_for","constructor","embedIntoContext"],"mappings":"AAA;CCS;CDI;AEW;ICC;KD4B;IEC;KFM;IGC;KH4B;CFC"},"hasCjsExports":false},"type":"js/module"}]}