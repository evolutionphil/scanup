{"dependencies":[{"name":"../../utils/png.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RQvVyKYik7yPfK0gj/dxNKd1B5k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _utilsPngJs = require(_dependencyMap[0], \"../../utils/png.js\");\n  /**\n   * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n   * this class borrows from:\n   *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/png.coffee\n   */\n  class PngEmbedder {\n    static async for(imageData) {\n      const png = _utilsPngJs.PNG.load(imageData);\n      return new PngEmbedder(png);\n    }\n    constructor(png) {\n      this.image = png;\n      this.bitsPerComponent = png.bitsPerComponent;\n      this.width = png.width;\n      this.height = png.height;\n      this.colorSpace = 'DeviceRGB';\n    }\n    async embedIntoContext(context, ref) {\n      const SMask = this.embedAlphaChannel(context);\n      const xObject = context.flateStream(this.image.rgbChannel, {\n        Type: 'XObject',\n        Subtype: 'Image',\n        BitsPerComponent: this.image.bitsPerComponent,\n        Width: this.image.width,\n        Height: this.image.height,\n        ColorSpace: this.colorSpace,\n        SMask\n      });\n      if (ref) {\n        context.assign(ref, xObject);\n        return ref;\n      } else {\n        return context.register(xObject);\n      }\n    }\n    embedAlphaChannel(context) {\n      if (!this.image.alphaChannel) return undefined;\n      const xObject = context.flateStream(this.image.alphaChannel, {\n        Type: 'XObject',\n        Subtype: 'Image',\n        Height: this.image.height,\n        Width: this.image.width,\n        BitsPerComponent: this.image.bitsPerComponent,\n        ColorSpace: 'DeviceGray',\n        Decode: [0, 1]\n      });\n      return context.register(xObject);\n    }\n  }\n  var _default = PngEmbedder;\n});","lineCount":64,"map":[[7,2,53,0,"Object"],[7,8,53,0],[7,9,53,0,"defineProperty"],[7,23,53,0],[7,24,53,0,"exports"],[7,31,53,0],[8,4,53,0,"enumerable"],[8,14,53,0],[9,4,53,0,"get"],[9,7,53,0],[9,18,53,0,"get"],[9,19,53,0],[10,6,53,0],[10,13,53,0,"_default"],[10,21,53,0],[11,4,53,0],[12,2,53,0],[13,2,1,0],[13,6,1,0,"_utilsPngJs"],[13,17,1,0],[13,20,1,0,"require"],[13,27,1,0],[13,28,1,0,"_dependencyMap"],[13,42,1,0],[14,2,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,2,7,0],[19,8,7,6,"PngEmbedder"],[19,19,7,17],[19,20,7,18],[20,4,8,4],[20,17,8,17,"for"],[20,20,8,20,"for"],[20,21,8,21,"imageData"],[20,30,8,30],[20,32,8,32],[21,6,9,8],[21,12,9,14,"png"],[21,15,9,17],[21,18,9,20,"PNG"],[21,29,9,23],[21,30,9,23,"PNG"],[21,33,9,23],[21,34,9,24,"load"],[21,38,9,28],[21,39,9,29,"imageData"],[21,48,9,38],[21,49,9,39],[22,6,10,8],[22,13,10,15],[22,17,10,19,"PngEmbedder"],[22,28,10,30],[22,29,10,31,"png"],[22,32,10,34],[22,33,10,35],[23,4,11,4],[24,4,12,4,"constructor"],[24,15,12,15,"constructor"],[24,16,12,16,"png"],[24,19,12,19],[24,21,12,21],[25,6,13,8],[25,10,13,12],[25,11,13,13,"image"],[25,16,13,18],[25,19,13,21,"png"],[25,22,13,24],[26,6,14,8],[26,10,14,12],[26,11,14,13,"bitsPerComponent"],[26,27,14,29],[26,30,14,32,"png"],[26,33,14,35],[26,34,14,36,"bitsPerComponent"],[26,50,14,52],[27,6,15,8],[27,10,15,12],[27,11,15,13,"width"],[27,16,15,18],[27,19,15,21,"png"],[27,22,15,24],[27,23,15,25,"width"],[27,28,15,30],[28,6,16,8],[28,10,16,12],[28,11,16,13,"height"],[28,17,16,19],[28,20,16,22,"png"],[28,23,16,25],[28,24,16,26,"height"],[28,30,16,32],[29,6,17,8],[29,10,17,12],[29,11,17,13,"colorSpace"],[29,21,17,23],[29,24,17,26],[29,35,17,37],[30,4,18,4],[31,4,19,4],[31,10,19,10,"embedIntoContext"],[31,26,19,26,"embedIntoContext"],[31,27,19,27,"context"],[31,34,19,34],[31,36,19,36,"ref"],[31,39,19,39],[31,41,19,41],[32,6,20,8],[32,12,20,14,"SMask"],[32,17,20,19],[32,20,20,22],[32,24,20,26],[32,25,20,27,"embedAlphaChannel"],[32,42,20,44],[32,43,20,45,"context"],[32,50,20,52],[32,51,20,53],[33,6,21,8],[33,12,21,14,"xObject"],[33,19,21,21],[33,22,21,24,"context"],[33,29,21,31],[33,30,21,32,"flateStream"],[33,41,21,43],[33,42,21,44],[33,46,21,48],[33,47,21,49,"image"],[33,52,21,54],[33,53,21,55,"rgbChannel"],[33,63,21,65],[33,65,21,67],[34,8,22,12,"Type"],[34,12,22,16],[34,14,22,18],[34,23,22,27],[35,8,23,12,"Subtype"],[35,15,23,19],[35,17,23,21],[35,24,23,28],[36,8,24,12,"BitsPerComponent"],[36,24,24,28],[36,26,24,30],[36,30,24,34],[36,31,24,35,"image"],[36,36,24,40],[36,37,24,41,"bitsPerComponent"],[36,53,24,57],[37,8,25,12,"Width"],[37,13,25,17],[37,15,25,19],[37,19,25,23],[37,20,25,24,"image"],[37,25,25,29],[37,26,25,30,"width"],[37,31,25,35],[38,8,26,12,"Height"],[38,14,26,18],[38,16,26,20],[38,20,26,24],[38,21,26,25,"image"],[38,26,26,30],[38,27,26,31,"height"],[38,33,26,37],[39,8,27,12,"ColorSpace"],[39,18,27,22],[39,20,27,24],[39,24,27,28],[39,25,27,29,"colorSpace"],[39,35,27,39],[40,8,28,12,"SMask"],[41,6,29,8],[41,7,29,9],[41,8,29,10],[42,6,30,8],[42,10,30,12,"ref"],[42,13,30,15],[42,15,30,17],[43,8,31,12,"context"],[43,15,31,19],[43,16,31,20,"assign"],[43,22,31,26],[43,23,31,27,"ref"],[43,26,31,30],[43,28,31,32,"xObject"],[43,35,31,39],[43,36,31,40],[44,8,32,12],[44,15,32,19,"ref"],[44,18,32,22],[45,6,33,8],[45,7,33,9],[45,13,34,13],[46,8,35,12],[46,15,35,19,"context"],[46,22,35,26],[46,23,35,27,"register"],[46,31,35,35],[46,32,35,36,"xObject"],[46,39,35,43],[46,40,35,44],[47,6,36,8],[48,4,37,4],[49,4,38,4,"embedAlphaChannel"],[49,21,38,21,"embedAlphaChannel"],[49,22,38,22,"context"],[49,29,38,29],[49,31,38,31],[50,6,39,8],[50,10,39,12],[50,11,39,13],[50,15,39,17],[50,16,39,18,"image"],[50,21,39,23],[50,22,39,24,"alphaChannel"],[50,34,39,36],[50,36,40,12],[50,43,40,19,"undefined"],[50,52,40,28],[51,6,41,8],[51,12,41,14,"xObject"],[51,19,41,21],[51,22,41,24,"context"],[51,29,41,31],[51,30,41,32,"flateStream"],[51,41,41,43],[51,42,41,44],[51,46,41,48],[51,47,41,49,"image"],[51,52,41,54],[51,53,41,55,"alphaChannel"],[51,65,41,67],[51,67,41,69],[52,8,42,12,"Type"],[52,12,42,16],[52,14,42,18],[52,23,42,27],[53,8,43,12,"Subtype"],[53,15,43,19],[53,17,43,21],[53,24,43,28],[54,8,44,12,"Height"],[54,14,44,18],[54,16,44,20],[54,20,44,24],[54,21,44,25,"image"],[54,26,44,30],[54,27,44,31,"height"],[54,33,44,37],[55,8,45,12,"Width"],[55,13,45,17],[55,15,45,19],[55,19,45,23],[55,20,45,24,"image"],[55,25,45,29],[55,26,45,30,"width"],[55,31,45,35],[56,8,46,12,"BitsPerComponent"],[56,24,46,28],[56,26,46,30],[56,30,46,34],[56,31,46,35,"image"],[56,36,46,40],[56,37,46,41,"bitsPerComponent"],[56,53,46,57],[57,8,47,12,"ColorSpace"],[57,18,47,22],[57,20,47,24],[57,32,47,36],[58,8,48,12,"Decode"],[58,14,48,18],[58,16,48,20],[58,17,48,21],[58,18,48,22],[58,20,48,24],[58,21,48,25],[59,6,49,8],[59,7,49,9],[59,8,49,10],[60,6,50,8],[60,13,50,15,"context"],[60,20,50,22],[60,21,50,23,"register"],[60,29,50,31],[60,30,50,32,"xObject"],[60,37,50,39],[60,38,50,40],[61,4,51,4],[62,2,52,0],[63,2,53,0],[63,6,53,0,"_default"],[63,14,53,0],[63,17,53,15,"PngEmbedder"],[63,28,53,26],[64,0,53,27],[64,3]],"functionMap":{"names":["<global>","PngEmbedder","_for","constructor","embedIntoContext","embedAlphaChannel"],"mappings":"AAA;ACM;ICC;KDG;IEC;KFM;IGC;KHkB;IIC;KJa;CDC"},"hasCjsExports":false},"type":"js/module"}]}