{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":101},"end":{"line":7,"column":57,"index":158}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/offlineQueue","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":159},"end":{"line":8,"column":90,"index":249}}],"key":"IhHqWUUJvv2yi8MrRQE9iVq2rtM=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":250},"end":{"line":9,"column":54,"index":304}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  /**\n   * useOfflineQueue Hook\n   * \n   * React hook for using the offline queue service in components\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.useOfflineQueue = useOfflineQueue;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesOfflineQueue = require(_dependencyMap[1], \"../services/offlineQueue\");\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[2], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  function useOfflineQueue() {\n    _s();\n    const [pendingCount, setPendingCount] = (0, _react.useState)(0);\n    const [isOnline, setIsOnline] = (0, _react.useState)(true);\n    const [pendingDocIds, setPendingDocIds] = (0, _react.useState)([]);\n\n    // Listen for queue changes\n    (0, _react.useEffect)(() => {\n      const updateState = () => {\n        setPendingCount(_servicesOfflineQueue.offlineQueue.getPendingCount());\n        setPendingDocIds(_servicesOfflineQueue.offlineQueue.getPendingDocumentIds());\n      };\n\n      // Initial state\n      updateState();\n\n      // Subscribe to changes\n      const unsubscribe = _servicesOfflineQueue.offlineQueue.subscribe(updateState);\n      return () => {\n        unsubscribe();\n      };\n    }, []);\n\n    // Listen for network changes\n    (0, _react.useEffect)(() => {\n      const unsubscribe = NetInfo.default.addEventListener(state => {\n        setIsOnline(state.isConnected === true && state.isInternetReachable === true);\n      });\n\n      // Initial check\n      NetInfo.default.fetch().then(state => {\n        setIsOnline(state.isConnected === true && state.isInternetReachable === true);\n      });\n      return () => {\n        unsubscribe();\n      };\n    }, []);\n\n    // Add signature operation\n    const queueSignature = (0, _react.useCallback)(async (documentId, pageIndex, imageBase64, signatureBase64, position, scale, token) => {\n      const operationId = await _servicesOfflineQueue.offlineQueue.addOperation('apply_signature', documentId, pageIndex, {\n        imageBase64,\n        signatureBase64,\n        position,\n        scale,\n        token\n      });\n\n      // Add visual overlay for immediate preview\n      await _servicesOfflineQueue.offlineQueue.addOverlay(documentId, pageIndex, 'signature', {\n        signatureBase64,\n        position,\n        scale\n      }, operationId);\n      return operationId;\n    }, []);\n\n    // Add annotation operation\n    const queueAnnotation = (0, _react.useCallback)(async (documentId, pageIndex, imageBase64, annotations, token) => {\n      const operationId = await _servicesOfflineQueue.offlineQueue.addOperation('apply_annotation', documentId, pageIndex, {\n        imageBase64,\n        annotations,\n        token\n      });\n\n      // Add visual overlay for immediate preview\n      await _servicesOfflineQueue.offlineQueue.addOverlay(documentId, pageIndex, 'annotation', {\n        annotations\n      }, operationId);\n      return operationId;\n    }, []);\n\n    // Add filter operation\n    const queueFilter = (0, _react.useCallback)(async (documentId, pageIndex, imageBase64, filterType, adjustments, token) => {\n      return _servicesOfflineQueue.offlineQueue.addOperation('apply_filter', documentId, pageIndex, {\n        imageBase64,\n        filterType,\n        adjustments,\n        token\n      });\n    }, []);\n\n    // Get overlays for a specific document page\n    const getPageOverlays = (0, _react.useCallback)((documentId, pageIndex) => {\n      return _servicesOfflineQueue.offlineQueue.getOverlaysForPage(documentId, pageIndex);\n    }, []);\n\n    // Check if document has pending operations\n    const hasPending = (0, _react.useCallback)(documentId => {\n      return _servicesOfflineQueue.offlineQueue.hasPendingOperations(documentId);\n    }, []);\n\n    // Force process queue\n    const processQueue = (0, _react.useCallback)(async () => {\n      await _servicesOfflineQueue.offlineQueue.processQueue();\n    }, []);\n    return {\n      pendingCount,\n      pendingDocIds,\n      isOnline,\n      queueSignature,\n      queueAnnotation,\n      queueFilter,\n      getPageOverlays,\n      hasPending,\n      processQueue\n    };\n  }\n  _s(useOfflineQueue, \"8OywGeIAcLf5NbtVk85I1s1fYQE=\");\n  var _default = useOfflineQueue;\n});","lineCount":139,"map":[[5,2,1,0],[6,0,2,0],[7,0,3,0],[8,0,4,0],[9,0,5,0],[10,2,1,0,"Object"],[10,8,1,0],[10,9,1,0,"defineProperty"],[10,23,1,0],[10,24,1,0,"exports"],[10,31,1,0],[11,4,1,0,"value"],[11,9,1,0],[12,2,1,0],[13,2,1,0],[13,11,1,0,"_interopDefault"],[13,27,1,0,"e"],[13,28,1,0],[14,4,1,0],[14,11,1,0,"e"],[14,12,1,0],[14,16,1,0,"e"],[14,17,1,0],[14,18,1,0,"__esModule"],[14,28,1,0],[14,31,1,0,"e"],[14,32,1,0],[15,6,1,0,"default"],[15,13,1,0],[15,15,1,0,"e"],[16,4,1,0],[17,2,1,0],[18,2,172,0,"Object"],[18,8,172,0],[18,9,172,0,"defineProperty"],[18,23,172,0],[18,24,172,0,"exports"],[18,31,172,0],[19,4,172,0,"enumerable"],[19,14,172,0],[20,4,172,0,"get"],[20,7,172,0],[20,18,172,0,"get"],[20,19,172,0],[21,6,172,0],[21,13,172,0,"_default"],[21,21,172,0],[22,4,172,0],[23,2,172,0],[24,2,11,0,"exports"],[24,9,11,0],[24,10,11,0,"useOfflineQueue"],[24,25,11,0],[24,28,11,0,"useOfflineQueue"],[24,43,11,0],[25,2,7,0],[25,6,7,0,"_react"],[25,12,7,0],[25,15,7,0,"require"],[25,22,7,0],[25,23,7,0,"_dependencyMap"],[25,37,7,0],[26,2,8,0],[26,6,8,0,"_servicesOfflineQueue"],[26,27,8,0],[26,30,8,0,"require"],[26,37,8,0],[26,38,8,0,"_dependencyMap"],[26,52,8,0],[27,2,9,0],[27,6,9,0,"_reactNativeCommunityNetinfo"],[27,34,9,0],[27,37,9,0,"require"],[27,44,9,0],[27,45,9,0,"_dependencyMap"],[27,59,9,0],[28,2,9,0],[28,6,9,0,"NetInfo"],[28,13,9,0],[28,16,9,0,"_interopDefault"],[28,31,9,0],[28,32,9,0,"_reactNativeCommunityNetinfo"],[28,60,9,0],[29,2,11,7],[29,11,11,16,"useOfflineQueue"],[29,26,11,31,"useOfflineQueue"],[29,27,11,31],[29,29,11,34],[30,4,11,34,"_s"],[30,6,11,34],[31,4,12,2],[31,10,12,8],[31,11,12,9,"pendingCount"],[31,23,12,21],[31,25,12,23,"setPendingCount"],[31,40,12,38],[31,41,12,39],[31,44,12,42],[31,48,12,42,"useState"],[31,54,12,50],[31,55,12,50,"useState"],[31,63,12,50],[31,65,12,51],[31,66,12,52],[31,67,12,53],[32,4,13,2],[32,10,13,8],[32,11,13,9,"isOnline"],[32,19,13,17],[32,21,13,19,"setIsOnline"],[32,32,13,30],[32,33,13,31],[32,36,13,34],[32,40,13,34,"useState"],[32,46,13,42],[32,47,13,42,"useState"],[32,55,13,42],[32,57,13,43],[32,61,13,47],[32,62,13,48],[33,4,14,2],[33,10,14,8],[33,11,14,9,"pendingDocIds"],[33,24,14,22],[33,26,14,24,"setPendingDocIds"],[33,42,14,40],[33,43,14,41],[33,46,14,44],[33,50,14,44,"useState"],[33,56,14,52],[33,57,14,52,"useState"],[33,65,14,52],[33,67,14,63],[33,69,14,65],[33,70,14,66],[35,4,16,2],[36,4,17,2],[36,8,17,2,"useEffect"],[36,14,17,11],[36,15,17,11,"useEffect"],[36,24,17,11],[36,26,17,12],[36,32,17,18],[37,6,18,4],[37,12,18,10,"updateState"],[37,23,18,21],[37,26,18,24,"updateState"],[37,27,18,24],[37,32,18,30],[38,8,19,6,"setPendingCount"],[38,23,19,21],[38,24,19,22,"offlineQueue"],[38,45,19,34],[38,46,19,34,"offlineQueue"],[38,58,19,34],[38,59,19,35,"getPendingCount"],[38,74,19,50],[38,75,19,51],[38,76,19,52],[38,77,19,53],[39,8,20,6,"setPendingDocIds"],[39,24,20,22],[39,25,20,23,"offlineQueue"],[39,46,20,35],[39,47,20,35,"offlineQueue"],[39,59,20,35],[39,60,20,36,"getPendingDocumentIds"],[39,81,20,57],[39,82,20,58],[39,83,20,59],[39,84,20,60],[40,6,21,4],[40,7,21,5],[42,6,23,4],[43,6,24,4,"updateState"],[43,17,24,15],[43,18,24,16],[43,19,24,17],[45,6,26,4],[46,6,27,4],[46,12,27,10,"unsubscribe"],[46,23,27,21],[46,26,27,24,"offlineQueue"],[46,47,27,36],[46,48,27,36,"offlineQueue"],[46,60,27,36],[46,61,27,37,"subscribe"],[46,70,27,46],[46,71,27,47,"updateState"],[46,82,27,58],[46,83,27,59],[47,6,29,4],[47,13,29,11],[47,19,29,17],[48,8,30,6,"unsubscribe"],[48,19,30,17],[48,20,30,18],[48,21,30,19],[49,6,31,4],[49,7,31,5],[50,4,32,2],[50,5,32,3],[50,7,32,5],[50,9,32,7],[50,10,32,8],[52,4,34,2],[53,4,35,2],[53,8,35,2,"useEffect"],[53,14,35,11],[53,15,35,11,"useEffect"],[53,24,35,11],[53,26,35,12],[53,32,35,18],[54,6,36,4],[54,12,36,10,"unsubscribe"],[54,23,36,21],[54,26,36,24,"NetInfo"],[54,33,36,31],[54,34,36,31,"default"],[54,41,36,31],[54,42,36,32,"addEventListener"],[54,58,36,48],[54,59,36,49,"state"],[54,64,36,54],[54,68,36,58],[55,8,37,6,"setIsOnline"],[55,19,37,17],[55,20,37,18,"state"],[55,25,37,23],[55,26,37,24,"isConnected"],[55,37,37,35],[55,42,37,40],[55,46,37,44],[55,50,37,48,"state"],[55,55,37,53],[55,56,37,54,"isInternetReachable"],[55,75,37,73],[55,80,37,78],[55,84,37,82],[55,85,37,83],[56,6,38,4],[56,7,38,5],[56,8,38,6],[58,6,40,4],[59,6,41,4,"NetInfo"],[59,13,41,11],[59,14,41,11,"default"],[59,21,41,11],[59,22,41,12,"fetch"],[59,27,41,17],[59,28,41,18],[59,29,41,19],[59,30,41,20,"then"],[59,34,41,24],[59,35,41,25,"state"],[59,40,41,30],[59,44,41,34],[60,8,42,6,"setIsOnline"],[60,19,42,17],[60,20,42,18,"state"],[60,25,42,23],[60,26,42,24,"isConnected"],[60,37,42,35],[60,42,42,40],[60,46,42,44],[60,50,42,48,"state"],[60,55,42,53],[60,56,42,54,"isInternetReachable"],[60,75,42,73],[60,80,42,78],[60,84,42,82],[60,85,42,83],[61,6,43,4],[61,7,43,5],[61,8,43,6],[62,6,45,4],[62,13,45,11],[62,19,45,17],[63,8,46,6,"unsubscribe"],[63,19,46,17],[63,20,46,18],[63,21,46,19],[64,6,47,4],[64,7,47,5],[65,4,48,2],[65,5,48,3],[65,7,48,5],[65,9,48,7],[65,10,48,8],[67,4,50,2],[68,4,51,2],[68,10,51,8,"queueSignature"],[68,24,51,22],[68,27,51,25],[68,31,51,25,"useCallback"],[68,37,51,36],[68,38,51,36,"useCallback"],[68,49,51,36],[68,51,51,37],[68,58,52,4,"documentId"],[68,68,52,22],[68,70,53,4,"pageIndex"],[68,79,53,21],[68,81,54,4,"imageBase64"],[68,92,54,23],[68,94,55,4,"signatureBase64"],[68,109,55,27],[68,111,56,4,"position"],[68,119,56,38],[68,121,57,4,"scale"],[68,126,57,17],[68,128,58,4,"token"],[68,133,58,24],[68,138,59,24],[69,6,60,4],[69,12,60,10,"operationId"],[69,23,60,21],[69,26,60,24],[69,32,60,30,"offlineQueue"],[69,53,60,42],[69,54,60,42,"offlineQueue"],[69,66,60,42],[69,67,60,43,"addOperation"],[69,79,60,55],[69,80,61,6],[69,97,61,23],[69,99,62,6,"documentId"],[69,109,62,16],[69,111,63,6,"pageIndex"],[69,120,63,15],[69,122,64,6],[70,8,65,8,"imageBase64"],[70,19,65,19],[71,8,66,8,"signatureBase64"],[71,23,66,23],[72,8,67,8,"position"],[72,16,67,16],[73,8,68,8,"scale"],[73,13,68,13],[74,8,69,8,"token"],[75,6,70,6],[75,7,71,4],[75,8,71,5],[77,6,73,4],[78,6,74,4],[78,12,74,10,"offlineQueue"],[78,33,74,22],[78,34,74,22,"offlineQueue"],[78,46,74,22],[78,47,74,23,"addOverlay"],[78,57,74,33],[78,58,75,6,"documentId"],[78,68,75,16],[78,70,76,6,"pageIndex"],[78,79,76,15],[78,81,77,6],[78,92,77,17],[78,94,78,6],[79,8,79,8,"signatureBase64"],[79,23,79,23],[80,8,80,8,"position"],[80,16,80,16],[81,8,81,8,"scale"],[82,6,82,6],[82,7,82,7],[82,9,83,6,"operationId"],[82,20,84,4],[82,21,84,5],[83,6,86,4],[83,13,86,11,"operationId"],[83,24,86,22],[84,4,87,2],[84,5,87,3],[84,7,87,5],[84,9,87,7],[84,10,87,8],[86,4,89,2],[87,4,90,2],[87,10,90,8,"queueAnnotation"],[87,25,90,23],[87,28,90,26],[87,32,90,26,"useCallback"],[87,38,90,37],[87,39,90,37,"useCallback"],[87,50,90,37],[87,52,90,38],[87,59,91,4,"documentId"],[87,69,91,22],[87,71,92,4,"pageIndex"],[87,80,92,21],[87,82,93,4,"imageBase64"],[87,93,93,23],[87,95,94,4,"annotations"],[87,106,94,22],[87,108,95,4,"token"],[87,113,95,24],[87,118,96,24],[88,6,97,4],[88,12,97,10,"operationId"],[88,23,97,21],[88,26,97,24],[88,32,97,30,"offlineQueue"],[88,53,97,42],[88,54,97,42,"offlineQueue"],[88,66,97,42],[88,67,97,43,"addOperation"],[88,79,97,55],[88,80,98,6],[88,98,98,24],[88,100,99,6,"documentId"],[88,110,99,16],[88,112,100,6,"pageIndex"],[88,121,100,15],[88,123,101,6],[89,8,102,8,"imageBase64"],[89,19,102,19],[90,8,103,8,"annotations"],[90,19,103,19],[91,8,104,8,"token"],[92,6,105,6],[92,7,106,4],[92,8,106,5],[94,6,108,4],[95,6,109,4],[95,12,109,10,"offlineQueue"],[95,33,109,22],[95,34,109,22,"offlineQueue"],[95,46,109,22],[95,47,109,23,"addOverlay"],[95,57,109,33],[95,58,110,6,"documentId"],[95,68,110,16],[95,70,111,6,"pageIndex"],[95,79,111,15],[95,81,112,6],[95,93,112,18],[95,95,113,6],[96,8,114,8,"annotations"],[97,6,115,6],[97,7,115,7],[97,9,116,6,"operationId"],[97,20,117,4],[97,21,117,5],[98,6,119,4],[98,13,119,11,"operationId"],[98,24,119,22],[99,4,120,2],[99,5,120,3],[99,7,120,5],[99,9,120,7],[99,10,120,8],[101,4,122,2],[102,4,123,2],[102,10,123,8,"queueFilter"],[102,21,123,19],[102,24,123,22],[102,28,123,22,"useCallback"],[102,34,123,33],[102,35,123,33,"useCallback"],[102,46,123,33],[102,48,123,34],[102,55,124,4,"documentId"],[102,65,124,22],[102,67,125,4,"pageIndex"],[102,76,125,21],[102,78,126,4,"imageBase64"],[102,89,126,23],[102,91,127,4,"filterType"],[102,101,127,22],[102,103,128,4,"adjustments"],[102,114,128,77],[102,116,129,4,"token"],[102,121,129,24],[102,126,130,24],[103,6,131,4],[103,13,131,11,"offlineQueue"],[103,34,131,23],[103,35,131,23,"offlineQueue"],[103,47,131,23],[103,48,131,24,"addOperation"],[103,60,131,36],[103,61,132,6],[103,75,132,20],[103,77,133,6,"documentId"],[103,87,133,16],[103,89,134,6,"pageIndex"],[103,98,134,15],[103,100,135,6],[104,8,136,8,"imageBase64"],[104,19,136,19],[105,8,137,8,"filterType"],[105,18,137,18],[106,8,138,8,"adjustments"],[106,19,138,19],[107,8,139,8,"token"],[108,6,140,6],[108,7,141,4],[108,8,141,5],[109,4,142,2],[109,5,142,3],[109,7,142,5],[109,9,142,7],[109,10,142,8],[111,4,144,2],[112,4,145,2],[112,10,145,8,"getPageOverlays"],[112,25,145,23],[112,28,145,26],[112,32,145,26,"useCallback"],[112,38,145,37],[112,39,145,37,"useCallback"],[112,50,145,37],[112,52,145,38],[112,53,145,39,"documentId"],[112,63,145,57],[112,65,145,59,"pageIndex"],[112,74,145,76],[112,79,145,99],[113,6,146,4],[113,13,146,11,"offlineQueue"],[113,34,146,23],[113,35,146,23,"offlineQueue"],[113,47,146,23],[113,48,146,24,"getOverlaysForPage"],[113,66,146,42],[113,67,146,43,"documentId"],[113,77,146,53],[113,79,146,55,"pageIndex"],[113,88,146,64],[113,89,146,65],[114,4,147,2],[114,5,147,3],[114,7,147,5],[114,9,147,7],[114,10,147,8],[116,4,149,2],[117,4,150,2],[117,10,150,8,"hasPending"],[117,20,150,18],[117,23,150,21],[117,27,150,21,"useCallback"],[117,33,150,32],[117,34,150,32,"useCallback"],[117,45,150,32],[117,47,150,34,"documentId"],[117,57,150,52],[117,61,150,66],[118,6,151,4],[118,13,151,11,"offlineQueue"],[118,34,151,23],[118,35,151,23,"offlineQueue"],[118,47,151,23],[118,48,151,24,"hasPendingOperations"],[118,68,151,44],[118,69,151,45,"documentId"],[118,79,151,55],[118,80,151,56],[119,4,152,2],[119,5,152,3],[119,7,152,5],[119,9,152,7],[119,10,152,8],[121,4,154,2],[122,4,155,2],[122,10,155,8,"processQueue"],[122,22,155,20],[122,25,155,23],[122,29,155,23,"useCallback"],[122,35,155,34],[122,36,155,34,"useCallback"],[122,47,155,34],[122,49,155,35],[122,61,155,47],[123,6,156,4],[123,12,156,10,"offlineQueue"],[123,33,156,22],[123,34,156,22,"offlineQueue"],[123,46,156,22],[123,47,156,23,"processQueue"],[123,59,156,35],[123,60,156,36],[123,61,156,37],[124,4,157,2],[124,5,157,3],[124,7,157,5],[124,9,157,7],[124,10,157,8],[125,4,159,2],[125,11,159,9],[126,6,160,4,"pendingCount"],[126,18,160,16],[127,6,161,4,"pendingDocIds"],[127,19,161,17],[128,6,162,4,"isOnline"],[128,14,162,12],[129,6,163,4,"queueSignature"],[129,20,163,18],[130,6,164,4,"queueAnnotation"],[130,21,164,19],[131,6,165,4,"queueFilter"],[131,17,165,15],[132,6,166,4,"getPageOverlays"],[132,21,166,19],[133,6,167,4,"hasPending"],[133,16,167,14],[134,6,168,4,"processQueue"],[135,4,169,2],[135,5,169,3],[136,2,170,0],[137,2,170,1,"_s"],[137,4,170,1],[137,5,11,16,"useOfflineQueue"],[137,20,11,31],[138,2,172,0],[138,6,172,0,"_default"],[138,14,172,0],[138,17,172,15,"useOfflineQueue"],[138,32,172,30],[139,0,172,31],[139,3]],"functionMap":{"names":["<global>","useOfflineQueue","useEffect$argument_0","updateState","<anonymous>","NetInfo.addEventListener$argument_0","NetInfo.fetch.then$argument_0","queueSignature","queueAnnotation","queueFilter","getPageOverlays","hasPending","processQueue"],"mappings":"AAA;OCU;YCM;wBCC;KDG;WEQ;KFE;GDC;YCG;iDGC;KHE;yBIG;KJE;WEE;KFE;GDC;qCMG;GNoC;sCOG;GP8B;kCQG;GRmB;sCSG;GTE;iCUG;GVE;mCWG;GXE;CDa"},"hasCjsExports":false},"type":"js/module"}]}