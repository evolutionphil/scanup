{"dependencies":[{"name":"@pdf-lib/upng","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"AoLTFvSb/zHYeydn/NqQkbTKgE8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"PngType\", {\n    enumerable: true,\n    get: function () {\n      return PngType;\n    }\n  });\n  Object.defineProperty(exports, \"PNG\", {\n    enumerable: true,\n    get: function () {\n      return PNG;\n    }\n  });\n  var _pdfLibUpng = require(_dependencyMap[0], \"@pdf-lib/upng\");\n  var UPNG = _interopDefault(_pdfLibUpng);\n  const getImageType = ctype => {\n    if (ctype === 0) return PngType.Greyscale;\n    if (ctype === 2) return PngType.Truecolour;\n    if (ctype === 3) return PngType.IndexedColour;\n    if (ctype === 4) return PngType.GreyscaleWithAlpha;\n    if (ctype === 6) return PngType.TruecolourWithAlpha;\n    throw new Error(`Unknown color type: ${ctype}`);\n  };\n  const splitAlphaChannel = rgbaChannel => {\n    const pixelCount = Math.floor(rgbaChannel.length / 4);\n    const rgbChannel = new Uint8Array(pixelCount * 3);\n    const alphaChannel = new Uint8Array(pixelCount * 1);\n    let rgbaOffset = 0;\n    let rgbOffset = 0;\n    let alphaOffset = 0;\n    while (rgbaOffset < rgbaChannel.length) {\n      rgbChannel[rgbOffset++] = rgbaChannel[rgbaOffset++];\n      rgbChannel[rgbOffset++] = rgbaChannel[rgbaOffset++];\n      rgbChannel[rgbOffset++] = rgbaChannel[rgbaOffset++];\n      alphaChannel[alphaOffset++] = rgbaChannel[rgbaOffset++];\n    }\n    return {\n      rgbChannel,\n      alphaChannel\n    };\n  };\n  var PngType;\n  (function (PngType) {\n    PngType[\"Greyscale\"] = \"Greyscale\";\n    PngType[\"Truecolour\"] = \"Truecolour\";\n    PngType[\"IndexedColour\"] = \"IndexedColour\";\n    PngType[\"GreyscaleWithAlpha\"] = \"GreyscaleWithAlpha\";\n    PngType[\"TruecolourWithAlpha\"] = \"TruecolourWithAlpha\";\n  })(PngType || (PngType = {}));\n  class PNG {\n    constructor(pngData) {\n      const upng = UPNG.default.decode(pngData);\n      const frames = UPNG.default.toRGBA8(upng);\n      if (frames.length > 1) throw new Error(`Animated PNGs are not supported`);\n      const frame = new Uint8Array(frames[0]);\n      const {\n        rgbChannel,\n        alphaChannel\n      } = splitAlphaChannel(frame);\n      this.rgbChannel = rgbChannel;\n      const hasAlphaValues = alphaChannel.some(a => a < 255);\n      if (hasAlphaValues) this.alphaChannel = alphaChannel;\n      this.type = getImageType(upng.ctype);\n      this.width = upng.width;\n      this.height = upng.height;\n      this.bitsPerComponent = 8;\n    }\n  }\n  PNG.load = pngData => new PNG(pngData);\n});","lineCount":80,"map":[[12,2,30,0,"Object"],[12,8,30,0],[12,9,30,0,"defineProperty"],[12,23,30,0],[12,24,30,0,"exports"],[12,31,30,0],[13,4,30,0,"enumerable"],[13,14,30,0],[14,4,30,0,"get"],[14,7,30,0],[14,18,30,0,"get"],[14,19,30,0],[15,6,30,0],[15,13,30,0,"PngType"],[15,20,30,0],[16,4,30,0],[17,2,30,0],[18,2,38,0,"Object"],[18,8,38,0],[18,9,38,0,"defineProperty"],[18,23,38,0],[18,24,38,0,"exports"],[18,31,38,0],[19,4,38,0,"enumerable"],[19,14,38,0],[20,4,38,0,"get"],[20,7,38,0],[20,18,38,0,"get"],[20,19,38,0],[21,6,38,0],[21,13,38,0,"PNG"],[21,16,38,0],[22,4,38,0],[23,2,38,0],[24,2,1,0],[24,6,1,0,"_pdfLibUpng"],[24,17,1,0],[24,20,1,0,"require"],[24,27,1,0],[24,28,1,0,"_dependencyMap"],[24,42,1,0],[25,2,1,0],[25,6,1,0,"UPNG"],[25,10,1,0],[25,13,1,0,"_interopDefault"],[25,28,1,0],[25,29,1,0,"_pdfLibUpng"],[25,40,1,0],[26,2,2,0],[26,8,2,6,"getImageType"],[26,20,2,18],[26,23,2,22,"ctype"],[26,28,2,27],[26,32,2,32],[27,4,3,4],[27,8,3,8,"ctype"],[27,13,3,13],[27,18,3,18],[27,19,3,19],[27,21,4,8],[27,28,4,15,"PngType"],[27,35,4,22],[27,36,4,23,"Greyscale"],[27,45,4,32],[28,4,5,4],[28,8,5,8,"ctype"],[28,13,5,13],[28,18,5,18],[28,19,5,19],[28,21,6,8],[28,28,6,15,"PngType"],[28,35,6,22],[28,36,6,23,"Truecolour"],[28,46,6,33],[29,4,7,4],[29,8,7,8,"ctype"],[29,13,7,13],[29,18,7,18],[29,19,7,19],[29,21,8,8],[29,28,8,15,"PngType"],[29,35,8,22],[29,36,8,23,"IndexedColour"],[29,49,8,36],[30,4,9,4],[30,8,9,8,"ctype"],[30,13,9,13],[30,18,9,18],[30,19,9,19],[30,21,10,8],[30,28,10,15,"PngType"],[30,35,10,22],[30,36,10,23,"GreyscaleWithAlpha"],[30,54,10,41],[31,4,11,4],[31,8,11,8,"ctype"],[31,13,11,13],[31,18,11,18],[31,19,11,19],[31,21,12,8],[31,28,12,15,"PngType"],[31,35,12,22],[31,36,12,23,"TruecolourWithAlpha"],[31,55,12,42],[32,4,13,4],[32,10,13,10],[32,14,13,14,"Error"],[32,19,13,19],[32,20,13,20],[32,43,13,43,"ctype"],[32,48,13,48],[32,50,13,50],[32,51,13,51],[33,2,14,0],[33,3,14,1],[34,2,15,0],[34,8,15,6,"splitAlphaChannel"],[34,25,15,23],[34,28,15,27,"rgbaChannel"],[34,39,15,38],[34,43,15,43],[35,4,16,4],[35,10,16,10,"pixelCount"],[35,20,16,20],[35,23,16,23,"Math"],[35,27,16,27],[35,28,16,28,"floor"],[35,33,16,33],[35,34,16,34,"rgbaChannel"],[35,45,16,45],[35,46,16,46,"length"],[35,52,16,52],[35,55,16,55],[35,56,16,56],[35,57,16,57],[36,4,17,4],[36,10,17,10,"rgbChannel"],[36,20,17,20],[36,23,17,23],[36,27,17,27,"Uint8Array"],[36,37,17,37],[36,38,17,38,"pixelCount"],[36,48,17,48],[36,51,17,51],[36,52,17,52],[36,53,17,53],[37,4,18,4],[37,10,18,10,"alphaChannel"],[37,22,18,22],[37,25,18,25],[37,29,18,29,"Uint8Array"],[37,39,18,39],[37,40,18,40,"pixelCount"],[37,50,18,50],[37,53,18,53],[37,54,18,54],[37,55,18,55],[38,4,19,4],[38,8,19,8,"rgbaOffset"],[38,18,19,18],[38,21,19,21],[38,22,19,22],[39,4,20,4],[39,8,20,8,"rgbOffset"],[39,17,20,17],[39,20,20,20],[39,21,20,21],[40,4,21,4],[40,8,21,8,"alphaOffset"],[40,19,21,19],[40,22,21,22],[40,23,21,23],[41,4,22,4],[41,11,22,11,"rgbaOffset"],[41,21,22,21],[41,24,22,24,"rgbaChannel"],[41,35,22,35],[41,36,22,36,"length"],[41,42,22,42],[41,44,22,44],[42,6,23,8,"rgbChannel"],[42,16,23,18],[42,17,23,19,"rgbOffset"],[42,26,23,28],[42,28,23,30],[42,29,23,31],[42,32,23,34,"rgbaChannel"],[42,43,23,45],[42,44,23,46,"rgbaOffset"],[42,54,23,56],[42,56,23,58],[42,57,23,59],[43,6,24,8,"rgbChannel"],[43,16,24,18],[43,17,24,19,"rgbOffset"],[43,26,24,28],[43,28,24,30],[43,29,24,31],[43,32,24,34,"rgbaChannel"],[43,43,24,45],[43,44,24,46,"rgbaOffset"],[43,54,24,56],[43,56,24,58],[43,57,24,59],[44,6,25,8,"rgbChannel"],[44,16,25,18],[44,17,25,19,"rgbOffset"],[44,26,25,28],[44,28,25,30],[44,29,25,31],[44,32,25,34,"rgbaChannel"],[44,43,25,45],[44,44,25,46,"rgbaOffset"],[44,54,25,56],[44,56,25,58],[44,57,25,59],[45,6,26,8,"alphaChannel"],[45,18,26,20],[45,19,26,21,"alphaOffset"],[45,30,26,32],[45,32,26,34],[45,33,26,35],[45,36,26,38,"rgbaChannel"],[45,47,26,49],[45,48,26,50,"rgbaOffset"],[45,58,26,60],[45,60,26,62],[45,61,26,63],[46,4,27,4],[47,4,28,4],[47,11,28,11],[48,6,28,13,"rgbChannel"],[48,16,28,23],[49,6,28,25,"alphaChannel"],[50,4,28,38],[50,5,28,39],[51,2,29,0],[51,3,29,1],[52,2,30,7],[52,6,30,11,"PngType"],[52,13,30,18],[53,2,31,0],[53,3,31,1],[53,13,31,11,"PngType"],[53,20,31,18],[53,22,31,20],[54,4,32,4,"PngType"],[54,11,32,11],[54,12,32,12],[54,23,32,23],[54,24,32,24],[54,27,32,27],[54,38,32,38],[55,4,33,4,"PngType"],[55,11,33,11],[55,12,33,12],[55,24,33,24],[55,25,33,25],[55,28,33,28],[55,40,33,40],[56,4,34,4,"PngType"],[56,11,34,11],[56,12,34,12],[56,27,34,27],[56,28,34,28],[56,31,34,31],[56,46,34,46],[57,4,35,4,"PngType"],[57,11,35,11],[57,12,35,12],[57,32,35,32],[57,33,35,33],[57,36,35,36],[57,56,35,56],[58,4,36,4,"PngType"],[58,11,36,11],[58,12,36,12],[58,33,36,33],[58,34,36,34],[58,37,36,37],[58,58,36,58],[59,2,37,0],[59,3,37,1],[59,5,37,3,"PngType"],[59,12,37,10],[59,17,37,15,"PngType"],[59,24,37,22],[59,27,37,25],[59,28,37,26],[59,29,37,27],[59,30,37,28],[59,31,37,29],[60,2,38,7],[60,8,38,13,"PNG"],[60,11,38,16],[60,12,38,17],[61,4,39,4,"constructor"],[61,15,39,15,"constructor"],[61,16,39,16,"pngData"],[61,23,39,23],[61,25,39,25],[62,6,40,8],[62,12,40,14,"upng"],[62,16,40,18],[62,19,40,21,"UPNG"],[62,23,40,25],[62,24,40,25,"default"],[62,31,40,25],[62,32,40,26,"decode"],[62,38,40,32],[62,39,40,33,"pngData"],[62,46,40,40],[62,47,40,41],[63,6,41,8],[63,12,41,14,"frames"],[63,18,41,20],[63,21,41,23,"UPNG"],[63,25,41,27],[63,26,41,27,"default"],[63,33,41,27],[63,34,41,28,"toRGBA8"],[63,41,41,35],[63,42,41,36,"upng"],[63,46,41,40],[63,47,41,41],[64,6,42,8],[64,10,42,12,"frames"],[64,16,42,18],[64,17,42,19,"length"],[64,23,42,25],[64,26,42,28],[64,27,42,29],[64,29,43,12],[64,35,43,18],[64,39,43,22,"Error"],[64,44,43,27],[64,45,43,28],[64,78,43,61],[64,79,43,62],[65,6,44,8],[65,12,44,14,"frame"],[65,17,44,19],[65,20,44,22],[65,24,44,26,"Uint8Array"],[65,34,44,36],[65,35,44,37,"frames"],[65,41,44,43],[65,42,44,44],[65,43,44,45],[65,44,44,46],[65,45,44,47],[66,6,45,8],[66,12,45,14],[67,8,45,16,"rgbChannel"],[67,18,45,26],[68,8,45,28,"alphaChannel"],[69,6,45,41],[69,7,45,42],[69,10,45,45,"splitAlphaChannel"],[69,27,45,62],[69,28,45,63,"frame"],[69,33,45,68],[69,34,45,69],[70,6,46,8],[70,10,46,12],[70,11,46,13,"rgbChannel"],[70,21,46,23],[70,24,46,26,"rgbChannel"],[70,34,46,36],[71,6,47,8],[71,12,47,14,"hasAlphaValues"],[71,26,47,28],[71,29,47,31,"alphaChannel"],[71,41,47,43],[71,42,47,44,"some"],[71,46,47,48],[71,47,47,50,"a"],[71,48,47,51],[71,52,47,56,"a"],[71,53,47,57],[71,56,47,60],[71,59,47,63],[71,60,47,64],[72,6,48,8],[72,10,48,12,"hasAlphaValues"],[72,24,48,26],[72,26,49,12],[72,30,49,16],[72,31,49,17,"alphaChannel"],[72,43,49,29],[72,46,49,32,"alphaChannel"],[72,58,49,44],[73,6,50,8],[73,10,50,12],[73,11,50,13,"type"],[73,15,50,17],[73,18,50,20,"getImageType"],[73,30,50,32],[73,31,50,33,"upng"],[73,35,50,37],[73,36,50,38,"ctype"],[73,41,50,43],[73,42,50,44],[74,6,51,8],[74,10,51,12],[74,11,51,13,"width"],[74,16,51,18],[74,19,51,21,"upng"],[74,23,51,25],[74,24,51,26,"width"],[74,29,51,31],[75,6,52,8],[75,10,52,12],[75,11,52,13,"height"],[75,17,52,19],[75,20,52,22,"upng"],[75,24,52,26],[75,25,52,27,"height"],[75,31,52,33],[76,6,53,8],[76,10,53,12],[76,11,53,13,"bitsPerComponent"],[76,27,53,29],[76,30,53,32],[76,31,53,33],[77,4,54,4],[78,2,55,0],[79,2,56,0,"PNG"],[79,5,56,3],[79,6,56,4,"load"],[79,10,56,8],[79,13,56,12,"pngData"],[79,20,56,19],[79,24,56,24],[79,28,56,28,"PNG"],[79,31,56,31],[79,32,56,32,"pngData"],[79,39,56,39],[79,40,56,40],[80,0,56,41],[80,3]],"functionMap":{"names":["<global>","getImageType","splitAlphaChannel","<anonymous>","PNG","PNG#constructor","alphaChannel.some$argument_0","PNG.load"],"mappings":"AAA;qBCC;CDY;0BEC;CFc;CGE;CHM;OIC;ICC;iDCQ,cD;KDO;CJC;WOC,6BP"},"hasCjsExports":false},"type":"js/module"}]}