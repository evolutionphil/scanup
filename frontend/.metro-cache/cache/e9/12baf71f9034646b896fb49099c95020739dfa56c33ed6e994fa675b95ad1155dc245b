{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"./PDFDocument.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"rL88CHLSvTrm6q277pIG25+D/8c=","exportNames":["*"],"imports":1}},{"name":"../core/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":44},"end":{"line":2,"column":69,"index":113}}],"key":"uYibmgiuaz/CrXy37RQIsJGcmz0=","exportNames":["*"],"imports":1}},{"name":"../utils/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":114},"end":{"line":3,"column":45,"index":159}}],"key":"yx9DX+1vet++JoKlU5V/nikNahM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return PDFImage;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _PDFDocumentJs = require(_dependencyMap[3], \"./PDFDocument.js\");\n  var PDFDocument = _interopDefault(_PDFDocumentJs);\n  var _coreIndexJs = require(_dependencyMap[4], \"../core/index.js\");\n  var _utilsIndexJs = require(_dependencyMap[5], \"../utils/index.js\");\n  /**\n   * Represents an image that has been embedded in a [[PDFDocument]].\n   */\n  var PDFImage = /*#__PURE__*/function () {\n    function PDFImage(ref, doc, embedder) {\n      (0, _classCallCheck.default)(this, PDFImage);\n      (0, _utilsIndexJs.assertIs)(ref, 'ref', [[_coreIndexJs.PDFRef, 'PDFRef']]);\n      (0, _utilsIndexJs.assertIs)(doc, 'doc', [[PDFDocument.default, 'PDFDocument']]);\n      (0, _utilsIndexJs.assertIs)(embedder, 'embedder', [[_coreIndexJs.JpegEmbedder, 'JpegEmbedder'], [_coreIndexJs.PngEmbedder, 'PngEmbedder']]);\n      this.ref = ref;\n      this.doc = doc;\n      this.width = embedder.width;\n      this.height = embedder.height;\n      this.embedder = embedder;\n    }\n    /**\n     * Compute the width and height of this image after being scaled by the\n     * given `factor`. For example:\n     * ```js\n     * image.width  // => 500\n     * image.height // => 250\n     *\n     * const scaled = image.scale(0.5)\n     * scaled.width  // => 250\n     * scaled.height // => 125\n     * ```\n     * This operation is often useful before drawing an image with\n     * [[PDFPage.drawImage]] to compute the `width` and `height` options.\n     * @param factor The factor by which this image should be scaled.\n     * @returns The width and height of the image after being scaled.\n     */\n    return (0, _createClass.default)(PDFImage, [{\n      key: \"scale\",\n      value: function scale(factor) {\n        (0, _utilsIndexJs.assertIs)(factor, 'factor', ['number']);\n        return {\n          width: this.width * factor,\n          height: this.height * factor\n        };\n      }\n      /**\n       * Get the width and height of this image after scaling it as large as\n       * possible while maintaining its aspect ratio and not exceeding the\n       * specified `width` and `height`. For example:\n       * ```\n       * image.width  // => 500\n       * image.height // => 250\n       *\n       * const scaled = image.scaleToFit(750, 1000)\n       * scaled.width  // => 750\n       * scaled.height // => 375\n       * ```\n       * The `width` and `height` parameters can also be thought of as the width\n       * and height of a box that the scaled image must fit within.\n       * @param width The bounding box's width.\n       * @param height The bounding box's height.\n       * @returns The width and height of the image after being scaled.\n       */\n    }, {\n      key: \"scaleToFit\",\n      value: function scaleToFit(width, height) {\n        (0, _utilsIndexJs.assertIs)(width, 'width', ['number']);\n        (0, _utilsIndexJs.assertIs)(height, 'height', ['number']);\n        var imgWidthScale = width / this.width;\n        var imgHeightScale = height / this.height;\n        var scale = Math.min(imgWidthScale, imgHeightScale);\n        return this.scale(scale);\n      }\n      /**\n       * Get the width and height of this image. For example:\n       * ```js\n       * const { width, height } = image.size()\n       * ```\n       * @returns The width and height of the image.\n       */\n    }, {\n      key: \"size\",\n      value: function size() {\n        return this.scale(1);\n      }\n      /**\n       * > **NOTE:** You probably don't need to call this method directly. The\n       * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n       * > automatically ensure all images get embedded.\n       *\n       * Embed this image in its document.\n       *\n       * @returns Resolves when the embedding is complete.\n       */\n    }, {\n      key: \"embed\",\n      value: (function () {\n        var _embed = (0, _asyncToGenerator.default)(function* () {\n          if (!this.embedder) return;\n          // The image should only be embedded once. If there's a pending embed\n          // operation then wait on it. Otherwise we need to start the embed.\n          if (!this.embedTask) {\n            var doc = this.doc,\n              ref = this.ref;\n            this.embedTask = this.embedder.embedIntoContext(doc.context, ref);\n          }\n          yield this.embedTask;\n          // We clear `this.embedder` so that the indirectly referenced image data\n          // can be garbage collected, thus avoiding a memory leak.\n          // See https://github.com/Hopding/pdf-lib/pull/1032/files.\n          this.embedder = undefined;\n        });\n        function embed() {\n          return _embed.apply(this, arguments);\n        }\n        return embed;\n      }())\n    }]);\n  }();\n  /**\n   * > **NOTE:** You probably don't want to call this method directly. Instead,\n   * > consider using the [[PDFDocument.embedPng]] and [[PDFDocument.embedJpg]]\n   * > methods, which will create instances of [[PDFImage]] for you.\n   *\n   * Create an instance of [[PDFImage]] from an existing ref and embedder\n   *\n   * @param ref The unique reference for this image.\n   * @param doc The document to which the image will belong.\n   * @param embedder The embedder that will be used to embed the image.\n   */\n  PDFImage.of = (ref, doc, embedder) => new PDFImage(ref, doc, embedder);\n});","lineCount":154,"map":[[15,13,7,21,"PDFImage"],[15,21,7,29],[16,4,7,29],[17,2,7,29],[18,2,7,29],[18,6,7,29,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,7,29],[18,45,7,29,"require"],[18,52,7,29],[18,53,7,29,"_dependencyMap"],[18,67,7,29],[19,2,7,29],[19,6,7,29,"_asyncToGenerator"],[19,23,7,29],[19,26,7,29,"_interopDefault"],[19,41,7,29],[19,42,7,29,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,7,29],[20,2,7,29],[20,6,7,29,"_babelRuntimeHelpersClassCallCheck"],[20,40,7,29],[20,43,7,29,"require"],[20,50,7,29],[20,51,7,29,"_dependencyMap"],[20,65,7,29],[21,2,7,29],[21,6,7,29,"_classCallCheck"],[21,21,7,29],[21,24,7,29,"_interopDefault"],[21,39,7,29],[21,40,7,29,"_babelRuntimeHelpersClassCallCheck"],[21,74,7,29],[22,2,7,29],[22,6,7,29,"_babelRuntimeHelpersCreateClass"],[22,37,7,29],[22,40,7,29,"require"],[22,47,7,29],[22,48,7,29,"_dependencyMap"],[22,62,7,29],[23,2,7,29],[23,6,7,29,"_createClass"],[23,18,7,29],[23,21,7,29,"_interopDefault"],[23,36,7,29],[23,37,7,29,"_babelRuntimeHelpersCreateClass"],[23,68,7,29],[24,2,1,0],[24,6,1,0,"_PDFDocumentJs"],[24,20,1,0],[24,23,1,0,"require"],[24,30,1,0],[24,31,1,0,"_dependencyMap"],[24,45,1,0],[25,2,1,0],[25,6,1,0,"PDFDocument"],[25,17,1,0],[25,20,1,0,"_interopDefault"],[25,35,1,0],[25,36,1,0,"_PDFDocumentJs"],[25,50,1,0],[26,2,2,0],[26,6,2,0,"_coreIndexJs"],[26,18,2,0],[26,21,2,0,"require"],[26,28,2,0],[26,29,2,0,"_dependencyMap"],[26,43,2,0],[27,2,3,0],[27,6,3,0,"_utilsIndexJs"],[27,19,3,0],[27,22,3,0,"require"],[27,29,3,0],[27,30,3,0,"_dependencyMap"],[27,44,3,0],[28,2,4,0],[29,0,5,0],[30,0,6,0],[31,2,4,0],[31,6,7,21,"PDFImage"],[31,14,7,29],[32,4,8,4],[32,13,8,4,"PDFImage"],[32,22,8,16,"ref"],[32,25,8,19],[32,27,8,21,"doc"],[32,30,8,24],[32,32,8,26,"embedder"],[32,40,8,34],[32,42,8,36],[33,6,8,36],[33,10,8,36,"_classCallCheck"],[33,25,8,36],[33,26,8,36,"default"],[33,33,8,36],[33,41,8,36,"PDFImage"],[33,49,8,36],[34,6,9,8],[34,10,9,8,"assertIs"],[34,23,9,16],[34,24,9,16,"assertIs"],[34,32,9,16],[34,34,9,17,"ref"],[34,37,9,20],[34,39,9,22],[34,44,9,27],[34,46,9,29],[34,47,9,30],[34,48,9,31,"PDFRef"],[34,60,9,37],[34,61,9,37,"PDFRef"],[34,67,9,37],[34,69,9,39],[34,77,9,47],[34,78,9,48],[34,79,9,49],[34,80,9,50],[35,6,10,8],[35,10,10,8,"assertIs"],[35,23,10,16],[35,24,10,16,"assertIs"],[35,32,10,16],[35,34,10,17,"doc"],[35,37,10,20],[35,39,10,22],[35,44,10,27],[35,46,10,29],[35,47,10,30],[35,48,10,31,"PDFDocument"],[35,59,10,42],[35,60,10,42,"default"],[35,67,10,42],[35,69,10,44],[35,82,10,57],[35,83,10,58],[35,84,10,59],[35,85,10,60],[36,6,11,8],[36,10,11,8,"assertIs"],[36,23,11,16],[36,24,11,16,"assertIs"],[36,32,11,16],[36,34,11,17,"embedder"],[36,42,11,25],[36,44,11,27],[36,54,11,37],[36,56,11,39],[36,57,12,12],[36,58,12,13,"JpegEmbedder"],[36,70,12,25],[36,71,12,25,"JpegEmbedder"],[36,83,12,25],[36,85,12,27],[36,99,12,41],[36,100,12,42],[36,102,13,12],[36,103,13,13,"PngEmbedder"],[36,115,13,24],[36,116,13,24,"PngEmbedder"],[36,127,13,24],[36,129,13,26],[36,142,13,39],[36,143,13,40],[36,144,14,9],[36,145,14,10],[37,6,15,8],[37,10,15,12],[37,11,15,13,"ref"],[37,14,15,16],[37,17,15,19,"ref"],[37,20,15,22],[38,6,16,8],[38,10,16,12],[38,11,16,13,"doc"],[38,14,16,16],[38,17,16,19,"doc"],[38,20,16,22],[39,6,17,8],[39,10,17,12],[39,11,17,13,"width"],[39,16,17,18],[39,19,17,21,"embedder"],[39,27,17,29],[39,28,17,30,"width"],[39,33,17,35],[40,6,18,8],[40,10,18,12],[40,11,18,13,"height"],[40,17,18,19],[40,20,18,22,"embedder"],[40,28,18,30],[40,29,18,31,"height"],[40,35,18,37],[41,6,19,8],[41,10,19,12],[41,11,19,13,"embedder"],[41,19,19,21],[41,22,19,24,"embedder"],[41,30,19,32],[42,4,20,4],[43,4,21,4],[44,0,22,0],[45,0,23,0],[46,0,24,0],[47,0,25,0],[48,0,26,0],[49,0,27,0],[50,0,28,0],[51,0,29,0],[52,0,30,0],[53,0,31,0],[54,0,32,0],[55,0,33,0],[56,0,34,0],[57,0,35,0],[58,0,36,0],[59,4,21,4],[59,15,21,4,"_createClass"],[59,27,21,4],[59,28,21,4,"default"],[59,35,21,4],[59,37,21,4,"PDFImage"],[59,45,21,4],[60,6,21,4,"key"],[60,9,21,4],[61,6,21,4,"value"],[61,11,21,4],[61,13,37,4],[61,22,37,4,"scale"],[61,27,37,9,"scale"],[61,28,37,10,"factor"],[61,34,37,16],[61,36,37,18],[62,8,38,8],[62,12,38,8,"assertIs"],[62,25,38,16],[62,26,38,16,"assertIs"],[62,34,38,16],[62,36,38,17,"factor"],[62,42,38,23],[62,44,38,25],[62,52,38,33],[62,54,38,35],[62,55,38,36],[62,63,38,44],[62,64,38,45],[62,65,38,46],[63,8,39,8],[63,15,39,15],[64,10,39,17,"width"],[64,15,39,22],[64,17,39,24],[64,21,39,28],[64,22,39,29,"width"],[64,27,39,34],[64,30,39,37,"factor"],[64,36,39,43],[65,10,39,45,"height"],[65,16,39,51],[65,18,39,53],[65,22,39,57],[65,23,39,58,"height"],[65,29,39,64],[65,32,39,67,"factor"],[66,8,39,74],[66,9,39,75],[67,6,40,4],[68,6,41,4],[69,0,42,0],[70,0,43,0],[71,0,44,0],[72,0,45,0],[73,0,46,0],[74,0,47,0],[75,0,48,0],[76,0,49,0],[77,0,50,0],[78,0,51,0],[79,0,52,0],[80,0,53,0],[81,0,54,0],[82,0,55,0],[83,0,56,0],[84,0,57,0],[85,0,58,0],[86,4,41,4],[87,6,41,4,"key"],[87,9,41,4],[88,6,41,4,"value"],[88,11,41,4],[88,13,59,4],[88,22,59,4,"scaleToFit"],[88,32,59,14,"scaleToFit"],[88,33,59,15,"width"],[88,38,59,20],[88,40,59,22,"height"],[88,46,59,28],[88,48,59,30],[89,8,60,8],[89,12,60,8,"assertIs"],[89,25,60,16],[89,26,60,16,"assertIs"],[89,34,60,16],[89,36,60,17,"width"],[89,41,60,22],[89,43,60,24],[89,50,60,31],[89,52,60,33],[89,53,60,34],[89,61,60,42],[89,62,60,43],[89,63,60,44],[90,8,61,8],[90,12,61,8,"assertIs"],[90,25,61,16],[90,26,61,16,"assertIs"],[90,34,61,16],[90,36,61,17,"height"],[90,42,61,23],[90,44,61,25],[90,52,61,33],[90,54,61,35],[90,55,61,36],[90,63,61,44],[90,64,61,45],[90,65,61,46],[91,8,62,8],[91,12,62,14,"imgWidthScale"],[91,25,62,27],[91,28,62,30,"width"],[91,33,62,35],[91,36,62,38],[91,40,62,42],[91,41,62,43,"width"],[91,46,62,48],[92,8,63,8],[92,12,63,14,"imgHeightScale"],[92,26,63,28],[92,29,63,31,"height"],[92,35,63,37],[92,38,63,40],[92,42,63,44],[92,43,63,45,"height"],[92,49,63,51],[93,8,64,8],[93,12,64,14,"scale"],[93,17,64,19],[93,20,64,22,"Math"],[93,24,64,26],[93,25,64,27,"min"],[93,28,64,30],[93,29,64,31,"imgWidthScale"],[93,42,64,44],[93,44,64,46,"imgHeightScale"],[93,58,64,60],[93,59,64,61],[94,8,65,8],[94,15,65,15],[94,19,65,19],[94,20,65,20,"scale"],[94,25,65,25],[94,26,65,26,"scale"],[94,31,65,31],[94,32,65,32],[95,6,66,4],[96,6,67,4],[97,0,68,0],[98,0,69,0],[99,0,70,0],[100,0,71,0],[101,0,72,0],[102,0,73,0],[103,4,67,4],[104,6,67,4,"key"],[104,9,67,4],[105,6,67,4,"value"],[105,11,67,4],[105,13,74,4],[105,22,74,4,"size"],[105,26,74,8,"size"],[105,27,74,8],[105,29,74,11],[106,8,75,8],[106,15,75,15],[106,19,75,19],[106,20,75,20,"scale"],[106,25,75,25],[106,26,75,26],[106,27,75,27],[106,28,75,28],[107,6,76,4],[108,6,77,4],[109,0,78,0],[110,0,79,0],[111,0,80,0],[112,0,81,0],[113,0,82,0],[114,0,83,0],[115,0,84,0],[116,0,85,0],[117,4,77,4],[118,6,77,4,"key"],[118,9,77,4],[119,6,77,4,"value"],[119,11,77,4],[120,8,77,4],[120,12,77,4,"_embed"],[120,18,77,4],[120,25,77,4,"_asyncToGenerator"],[120,42,77,4],[120,43,77,4,"default"],[120,50,77,4],[120,52,86,4],[120,65,86,18],[121,10,87,8],[121,14,87,12],[121,15,87,13],[121,19,87,17],[121,20,87,18,"embedder"],[121,28,87,26],[121,30,88,12],[122,10,89,8],[123,10,90,8],[124,10,91,8],[124,14,91,12],[124,15,91,13],[124,19,91,17],[124,20,91,18,"embedTask"],[124,29,91,27],[124,31,91,29],[125,12,92,12],[125,16,92,20,"doc"],[125,19,92,23],[125,22,92,33],[125,26,92,37],[125,27,92,20,"doc"],[125,30,92,23],[126,14,92,25,"ref"],[126,17,92,28],[126,20,92,33],[126,24,92,37],[126,25,92,25,"ref"],[126,28,92,28],[127,12,93,12],[127,16,93,16],[127,17,93,17,"embedTask"],[127,26,93,26],[127,29,93,29],[127,33,93,33],[127,34,93,34,"embedder"],[127,42,93,42],[127,43,93,43,"embedIntoContext"],[127,59,93,59],[127,60,93,60,"doc"],[127,63,93,63],[127,64,93,64,"context"],[127,71,93,71],[127,73,93,73,"ref"],[127,76,93,76],[127,77,93,77],[128,10,94,8],[129,10,95,8],[129,16,95,14],[129,20,95,18],[129,21,95,19,"embedTask"],[129,30,95,28],[130,10,96,8],[131,10,97,8],[132,10,98,8],[133,10,99,8],[133,14,99,12],[133,15,99,13,"embedder"],[133,23,99,21],[133,26,99,24,"undefined"],[133,35,99,33],[134,8,100,4],[134,9,100,5],[135,8,100,5],[135,17,86,10,"embed"],[135,22,86,15,"embed"],[135,23,86,15],[136,10,86,15],[136,17,86,15,"_embed"],[136,23,86,15],[136,24,86,15,"apply"],[136,29,86,15],[136,36,86,15,"arguments"],[136,45,86,15],[137,8,86,15],[138,8,86,15],[138,15,86,10,"embed"],[138,20,86,15],[139,6,86,15],[140,4,86,15],[141,2,86,15],[142,2,102,0],[143,0,103,0],[144,0,104,0],[145,0,105,0],[146,0,106,0],[147,0,107,0],[148,0,108,0],[149,0,109,0],[150,0,110,0],[151,0,111,0],[152,0,112,0],[153,2,113,0,"PDFImage"],[153,10,113,8],[153,11,113,9,"of"],[153,13,113,11],[153,16,113,14],[153,17,113,15,"ref"],[153,20,113,18],[153,22,113,20,"doc"],[153,25,113,23],[153,27,113,25,"embedder"],[153,35,113,33],[153,40,113,38],[153,44,113,42,"PDFImage"],[153,52,113,50],[153,53,113,51,"ref"],[153,56,113,54],[153,58,113,56,"doc"],[153,61,113,59],[153,63,113,61,"embedder"],[153,71,113,69],[153,72,113,70],[154,0,113,71],[154,3]],"functionMap":{"names":["<global>","PDFImage","constructor","scale","scaleToFit","size","embed","of"],"mappings":"AAA;eCM;ICC;KDY;IEiB;KFG;IGmB;KHO;IIQ;KJE;IKU;KLc;CDC;cOY,wDP"},"hasCjsExports":false},"type":"js/module"}]}