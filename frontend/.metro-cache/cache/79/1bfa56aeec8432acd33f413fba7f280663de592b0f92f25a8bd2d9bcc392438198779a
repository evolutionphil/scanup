{"dependencies":[{"name":"../errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"hqwpWRawU/ruYp+nBkn/8IqEHoU=","exportNames":["*"],"imports":1}},{"name":"../objects/PDFName.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":44,"index":89}}],"key":"n98wTd1MATuKrvcBEI04SWaKgtU=","exportNames":["*"],"imports":1}},{"name":"../objects/PDFNumber.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":90},"end":{"line":3,"column":48,"index":138}}],"key":"+oWVcRhlrMLCTcVWzoq+cIYZJ6o=","exportNames":["*"],"imports":1}},{"name":"../objects/PDFRef.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":139},"end":{"line":4,"column":42,"index":181}}],"key":"Tnv39FmiJFKBWD7HbkkkhnvY+tY=","exportNames":["*"],"imports":1}},{"name":"./ByteStream.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":182},"end":{"line":5,"column":41,"index":223}}],"key":"x4AcHcNr162Ap/Z7p1QgPUEe+3c=","exportNames":["*"],"imports":1}},{"name":"./PDFObjectParser.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":224},"end":{"line":6,"column":51,"index":275}}],"key":"Hg28SNt+zVv5tN3xzuVMJFPQTyQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":276},"end":{"line":7,"column":51,"index":327}}],"key":"AUCnYNcCot7PlCuuOg5nVchJREc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _errorsJs = require(_dependencyMap[0], \"../errors.js\");\n  var _objectsPDFNameJs = require(_dependencyMap[1], \"../objects/PDFName.js\");\n  var PDFName = _interopDefault(_objectsPDFNameJs);\n  var _objectsPDFNumberJs = require(_dependencyMap[2], \"../objects/PDFNumber.js\");\n  var PDFNumber = _interopDefault(_objectsPDFNumberJs);\n  var _objectsPDFRefJs = require(_dependencyMap[3], \"../objects/PDFRef.js\");\n  var PDFRef = _interopDefault(_objectsPDFRefJs);\n  var _ByteStreamJs = require(_dependencyMap[4], \"./ByteStream.js\");\n  var ByteStream = _interopDefault(_ByteStreamJs);\n  var _PDFObjectParserJs = require(_dependencyMap[5], \"./PDFObjectParser.js\");\n  var PDFObjectParser = _interopDefault(_PDFObjectParserJs);\n  var _utilsIndexJs = require(_dependencyMap[6], \"../../utils/index.js\");\n  class PDFObjectStreamParser extends PDFObjectParser.default {\n    constructor(rawStream, shouldWaitForTick) {\n      super(ByteStream.default.fromPDFRawStream(rawStream), rawStream.dict.context);\n      const {\n        dict\n      } = rawStream;\n      this.alreadyParsed = false;\n      this.shouldWaitForTick = shouldWaitForTick || (() => false);\n      this.firstOffset = dict.lookup(PDFName.default.of('First'), PDFNumber.default).asNumber();\n      this.objectCount = dict.lookup(PDFName.default.of('N'), PDFNumber.default).asNumber();\n    }\n    async parseIntoContext() {\n      if (this.alreadyParsed) {\n        throw new _errorsJs.ReparseError('PDFObjectStreamParser', 'parseIntoContext');\n      }\n      this.alreadyParsed = true;\n      const offsetsAndObjectNumbers = this.parseOffsetsAndObjectNumbers();\n      for (let idx = 0, len = offsetsAndObjectNumbers.length; idx < len; idx++) {\n        const {\n          objectNumber,\n          offset\n        } = offsetsAndObjectNumbers[idx];\n        this.bytes.moveTo(this.firstOffset + offset);\n        const ref = PDFRef.default.of(objectNumber, 0);\n        const object = this.parseObject(ref);\n        this.context.assign(ref, object);\n        if (this.shouldWaitForTick()) await (0, _utilsIndexJs.waitForTick)();\n      }\n    }\n    parseOffsetsAndObjectNumbers() {\n      const offsetsAndObjectNumbers = [];\n      for (let idx = 0, len = this.objectCount; idx < len; idx++) {\n        this.skipWhitespaceAndComments();\n        const objectNumber = this.parseRawInt();\n        this.skipWhitespaceAndComments();\n        const offset = this.parseRawInt();\n        offsetsAndObjectNumbers.push({\n          objectNumber,\n          offset\n        });\n      }\n      return offsetsAndObjectNumbers;\n    }\n  }\n  PDFObjectStreamParser.forStream = (rawStream, shouldWaitForTick) => new PDFObjectStreamParser(rawStream, shouldWaitForTick);\n  var _default = PDFObjectStreamParser;\n});","lineCount":76,"map":[[12,2,46,0,"Object"],[12,8,46,0],[12,9,46,0,"defineProperty"],[12,23,46,0],[12,24,46,0,"exports"],[12,31,46,0],[13,4,46,0,"enumerable"],[13,14,46,0],[14,4,46,0,"get"],[14,7,46,0],[14,18,46,0,"get"],[14,19,46,0],[15,6,46,0],[15,13,46,0,"_default"],[15,21,46,0],[16,4,46,0],[17,2,46,0],[18,2,1,0],[18,6,1,0,"_errorsJs"],[18,15,1,0],[18,18,1,0,"require"],[18,25,1,0],[18,26,1,0,"_dependencyMap"],[18,40,1,0],[19,2,2,0],[19,6,2,0,"_objectsPDFNameJs"],[19,23,2,0],[19,26,2,0,"require"],[19,33,2,0],[19,34,2,0,"_dependencyMap"],[19,48,2,0],[20,2,2,0],[20,6,2,0,"PDFName"],[20,13,2,0],[20,16,2,0,"_interopDefault"],[20,31,2,0],[20,32,2,0,"_objectsPDFNameJs"],[20,49,2,0],[21,2,3,0],[21,6,3,0,"_objectsPDFNumberJs"],[21,25,3,0],[21,28,3,0,"require"],[21,35,3,0],[21,36,3,0,"_dependencyMap"],[21,50,3,0],[22,2,3,0],[22,6,3,0,"PDFNumber"],[22,15,3,0],[22,18,3,0,"_interopDefault"],[22,33,3,0],[22,34,3,0,"_objectsPDFNumberJs"],[22,53,3,0],[23,2,4,0],[23,6,4,0,"_objectsPDFRefJs"],[23,22,4,0],[23,25,4,0,"require"],[23,32,4,0],[23,33,4,0,"_dependencyMap"],[23,47,4,0],[24,2,4,0],[24,6,4,0,"PDFRef"],[24,12,4,0],[24,15,4,0,"_interopDefault"],[24,30,4,0],[24,31,4,0,"_objectsPDFRefJs"],[24,47,4,0],[25,2,5,0],[25,6,5,0,"_ByteStreamJs"],[25,19,5,0],[25,22,5,0,"require"],[25,29,5,0],[25,30,5,0,"_dependencyMap"],[25,44,5,0],[26,2,5,0],[26,6,5,0,"ByteStream"],[26,16,5,0],[26,19,5,0,"_interopDefault"],[26,34,5,0],[26,35,5,0,"_ByteStreamJs"],[26,48,5,0],[27,2,6,0],[27,6,6,0,"_PDFObjectParserJs"],[27,24,6,0],[27,27,6,0,"require"],[27,34,6,0],[27,35,6,0,"_dependencyMap"],[27,49,6,0],[28,2,6,0],[28,6,6,0,"PDFObjectParser"],[28,21,6,0],[28,24,6,0,"_interopDefault"],[28,39,6,0],[28,40,6,0,"_PDFObjectParserJs"],[28,58,6,0],[29,2,7,0],[29,6,7,0,"_utilsIndexJs"],[29,19,7,0],[29,22,7,0,"require"],[29,29,7,0],[29,30,7,0,"_dependencyMap"],[29,44,7,0],[30,2,8,0],[30,8,8,6,"PDFObjectStreamParser"],[30,29,8,27],[30,38,8,36,"PDFObjectParser"],[30,53,8,51],[30,54,8,51,"default"],[30,61,8,51],[30,62,8,52],[31,4,9,4,"constructor"],[31,15,9,15,"constructor"],[31,16,9,16,"rawStream"],[31,25,9,25],[31,27,9,27,"shouldWaitForTick"],[31,44,9,44],[31,46,9,46],[32,6,10,8],[32,11,10,13],[32,12,10,14,"ByteStream"],[32,22,10,24],[32,23,10,24,"default"],[32,30,10,24],[32,31,10,25,"fromPDFRawStream"],[32,47,10,41],[32,48,10,42,"rawStream"],[32,57,10,51],[32,58,10,52],[32,60,10,54,"rawStream"],[32,69,10,63],[32,70,10,64,"dict"],[32,74,10,68],[32,75,10,69,"context"],[32,82,10,76],[32,83,10,77],[33,6,11,8],[33,12,11,14],[34,8,11,16,"dict"],[35,6,11,21],[35,7,11,22],[35,10,11,25,"rawStream"],[35,19,11,34],[36,6,12,8],[36,10,12,12],[36,11,12,13,"alreadyParsed"],[36,24,12,26],[36,27,12,29],[36,32,12,34],[37,6,13,8],[37,10,13,12],[37,11,13,13,"shouldWaitForTick"],[37,28,13,30],[37,31,13,33,"shouldWaitForTick"],[37,48,13,50],[37,53,13,55],[37,59,13,61],[37,64,13,66],[37,65,13,67],[38,6,14,8],[38,10,14,12],[38,11,14,13,"firstOffset"],[38,22,14,24],[38,25,14,27,"dict"],[38,29,14,31],[38,30,14,32,"lookup"],[38,36,14,38],[38,37,14,39,"PDFName"],[38,44,14,46],[38,45,14,46,"default"],[38,52,14,46],[38,53,14,47,"of"],[38,55,14,49],[38,56,14,50],[38,63,14,57],[38,64,14,58],[38,66,14,60,"PDFNumber"],[38,75,14,69],[38,76,14,69,"default"],[38,83,14,69],[38,84,14,70],[38,85,14,71,"asNumber"],[38,93,14,79],[38,94,14,80],[38,95,14,81],[39,6,15,8],[39,10,15,12],[39,11,15,13,"objectCount"],[39,22,15,24],[39,25,15,27,"dict"],[39,29,15,31],[39,30,15,32,"lookup"],[39,36,15,38],[39,37,15,39,"PDFName"],[39,44,15,46],[39,45,15,46,"default"],[39,52,15,46],[39,53,15,47,"of"],[39,55,15,49],[39,56,15,50],[39,59,15,53],[39,60,15,54],[39,62,15,56,"PDFNumber"],[39,71,15,65],[39,72,15,65,"default"],[39,79,15,65],[39,80,15,66],[39,81,15,67,"asNumber"],[39,89,15,75],[39,90,15,76],[39,91,15,77],[40,4,16,4],[41,4,17,4],[41,10,17,10,"parseIntoContext"],[41,26,17,26,"parseIntoContext"],[41,27,17,26],[41,29,17,29],[42,6,18,8],[42,10,18,12],[42,14,18,16],[42,15,18,17,"alreadyParsed"],[42,28,18,30],[42,30,18,32],[43,8,19,12],[43,14,19,18],[43,18,19,22,"ReparseError"],[43,27,19,34],[43,28,19,34,"ReparseError"],[43,40,19,34],[43,41,19,35],[43,64,19,58],[43,66,19,60],[43,84,19,78],[43,85,19,79],[44,6,20,8],[45,6,21,8],[45,10,21,12],[45,11,21,13,"alreadyParsed"],[45,24,21,26],[45,27,21,29],[45,31,21,33],[46,6,22,8],[46,12,22,14,"offsetsAndObjectNumbers"],[46,35,22,37],[46,38,22,40],[46,42,22,44],[46,43,22,45,"parseOffsetsAndObjectNumbers"],[46,71,22,73],[46,72,22,74],[46,73,22,75],[47,6,23,8],[47,11,23,13],[47,15,23,17,"idx"],[47,18,23,20],[47,21,23,23],[47,22,23,24],[47,24,23,26,"len"],[47,27,23,29],[47,30,23,32,"offsetsAndObjectNumbers"],[47,53,23,55],[47,54,23,56,"length"],[47,60,23,62],[47,62,23,64,"idx"],[47,65,23,67],[47,68,23,70,"len"],[47,71,23,73],[47,73,23,75,"idx"],[47,76,23,78],[47,78,23,80],[47,80,23,82],[48,8,24,12],[48,14,24,18],[49,10,24,20,"objectNumber"],[49,22,24,32],[50,10,24,34,"offset"],[51,8,24,41],[51,9,24,42],[51,12,24,45,"offsetsAndObjectNumbers"],[51,35,24,68],[51,36,24,69,"idx"],[51,39,24,72],[51,40,24,73],[52,8,25,12],[52,12,25,16],[52,13,25,17,"bytes"],[52,18,25,22],[52,19,25,23,"moveTo"],[52,25,25,29],[52,26,25,30],[52,30,25,34],[52,31,25,35,"firstOffset"],[52,42,25,46],[52,45,25,49,"offset"],[52,51,25,55],[52,52,25,56],[53,8,26,12],[53,14,26,18,"ref"],[53,17,26,21],[53,20,26,24,"PDFRef"],[53,26,26,30],[53,27,26,30,"default"],[53,34,26,30],[53,35,26,31,"of"],[53,37,26,33],[53,38,26,34,"objectNumber"],[53,50,26,46],[53,52,26,48],[53,53,26,49],[53,54,26,50],[54,8,27,12],[54,14,27,18,"object"],[54,20,27,24],[54,23,27,27],[54,27,27,31],[54,28,27,32,"parseObject"],[54,39,27,43],[54,40,27,44,"ref"],[54,43,27,47],[54,44,27,48],[55,8,28,12],[55,12,28,16],[55,13,28,17,"context"],[55,20,28,24],[55,21,28,25,"assign"],[55,27,28,31],[55,28,28,32,"ref"],[55,31,28,35],[55,33,28,37,"object"],[55,39,28,43],[55,40,28,44],[56,8,29,12],[56,12,29,16],[56,16,29,20],[56,17,29,21,"shouldWaitForTick"],[56,34,29,38],[56,35,29,39],[56,36,29,40],[56,38,30,16],[56,44,30,22],[56,48,30,22,"waitForTick"],[56,61,30,33],[56,62,30,33,"waitForTick"],[56,73,30,33],[56,75,30,34],[56,76,30,35],[57,6,31,8],[58,4,32,4],[59,4,33,4,"parseOffsetsAndObjectNumbers"],[59,32,33,32,"parseOffsetsAndObjectNumbers"],[59,33,33,32],[59,35,33,35],[60,6,34,8],[60,12,34,14,"offsetsAndObjectNumbers"],[60,35,34,37],[60,38,34,40],[60,40,34,42],[61,6,35,8],[61,11,35,13],[61,15,35,17,"idx"],[61,18,35,20],[61,21,35,23],[61,22,35,24],[61,24,35,26,"len"],[61,27,35,29],[61,30,35,32],[61,34,35,36],[61,35,35,37,"objectCount"],[61,46,35,48],[61,48,35,50,"idx"],[61,51,35,53],[61,54,35,56,"len"],[61,57,35,59],[61,59,35,61,"idx"],[61,62,35,64],[61,64,35,66],[61,66,35,68],[62,8,36,12],[62,12,36,16],[62,13,36,17,"skipWhitespaceAndComments"],[62,38,36,42],[62,39,36,43],[62,40,36,44],[63,8,37,12],[63,14,37,18,"objectNumber"],[63,26,37,30],[63,29,37,33],[63,33,37,37],[63,34,37,38,"parseRawInt"],[63,45,37,49],[63,46,37,50],[63,47,37,51],[64,8,38,12],[64,12,38,16],[64,13,38,17,"skipWhitespaceAndComments"],[64,38,38,42],[64,39,38,43],[64,40,38,44],[65,8,39,12],[65,14,39,18,"offset"],[65,20,39,24],[65,23,39,27],[65,27,39,31],[65,28,39,32,"parseRawInt"],[65,39,39,43],[65,40,39,44],[65,41,39,45],[66,8,40,12,"offsetsAndObjectNumbers"],[66,31,40,35],[66,32,40,36,"push"],[66,36,40,40],[66,37,40,41],[67,10,40,43,"objectNumber"],[67,22,40,55],[68,10,40,57,"offset"],[69,8,40,64],[69,9,40,65],[69,10,40,66],[70,6,41,8],[71,6,42,8],[71,13,42,15,"offsetsAndObjectNumbers"],[71,36,42,38],[72,4,43,4],[73,2,44,0],[74,2,45,0,"PDFObjectStreamParser"],[74,23,45,21],[74,24,45,22,"forStream"],[74,33,45,31],[74,36,45,34],[74,37,45,35,"rawStream"],[74,46,45,44],[74,48,45,46,"shouldWaitForTick"],[74,65,45,63],[74,70,45,68],[74,74,45,72,"PDFObjectStreamParser"],[74,95,45,93],[74,96,45,94,"rawStream"],[74,105,45,103],[74,107,45,105,"shouldWaitForTick"],[74,124,45,122],[74,125,45,123],[75,2,46,0],[75,6,46,0,"_default"],[75,14,46,0],[75,17,46,15,"PDFObjectStreamParser"],[75,38,46,36],[76,0,46,37],[76,3]],"functionMap":{"names":["<global>","PDFObjectStreamParser","constructor","<anonymous>","parseIntoContext","parseOffsetsAndObjectNumbers","forStream"],"mappings":"AAA;ACO;ICC;uDCI,WD;KDG;IGC;KHe;IIC;KJU;CDC;kCMC,yFN"},"hasCjsExports":false},"type":"js/module"}]}