{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"../../utils/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":75,"index":75}}],"key":"AUCnYNcCot7PlCuuOg5nVchJREc=","exportNames":["*"],"imports":1}},{"name":"../../utils/unicode.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":76},"end":{"line":2,"column":98,"index":174}}],"key":"tvvOyJUMlW2Ik+effQcmAxzNhJM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"createCmap\", {\n    enumerable: true,\n    get: function () {\n      return createCmap;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _utilsIndexJs = require(_dependencyMap[1], \"../../utils/index.js\");\n  var _utilsUnicodeJs = require(_dependencyMap[2], \"../../utils/unicode.js\");\n  /** `glyphs` should be an array of unique glyphs */\n  var createCmap = (glyphs, glyphId) => {\n    var bfChars = new Array(glyphs.length);\n    for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n      var glyph = glyphs[idx];\n      var id = cmapHexFormat(cmapHexString(glyphId(glyph)));\n      var unicode = cmapHexFormat(...glyph.codePoints.map(cmapCodePointFormat));\n      bfChars[idx] = [id, unicode];\n    }\n    return fillCmapTemplate(bfChars);\n  };\n  /* =============================== Templates ================================ */\n  var fillCmapTemplate = bfChars => `\\\n/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange\n${bfChars.length} beginbfchar\n${bfChars.map(_ref => {\n    var _ref2 = (0, _slicedToArray.default)(_ref, 2),\n      glyphId = _ref2[0],\n      codePoint = _ref2[1];\n    return `${glyphId} ${codePoint}`;\n  }).join('\\n')}\nendbfchar\nendcmap\nCMapName currentdict /CMap defineresource pop\nend\nend\\\n`;\n  /* =============================== Utilities ================================ */\n  var cmapHexFormat = function () {\n    for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n      values[_key] = arguments[_key];\n    }\n    return `<${values.join('')}>`;\n  };\n  var cmapHexString = value => (0, _utilsIndexJs.toHexStringOfMinLength)(value, 4);\n  var cmapCodePointFormat = codePoint => {\n    if ((0, _utilsUnicodeJs.isWithinBMP)(codePoint)) return cmapHexString(codePoint);\n    if ((0, _utilsUnicodeJs.hasSurrogates)(codePoint)) {\n      var hs = (0, _utilsUnicodeJs.highSurrogate)(codePoint);\n      var ls = (0, _utilsUnicodeJs.lowSurrogate)(codePoint);\n      return `${cmapHexString(hs)}${cmapHexString(ls)}`;\n    }\n    var hex = (0, _utilsIndexJs.toHexString)(codePoint);\n    var msg = `0x${hex} is not a valid UTF-8 or UTF-16 codepoint.`;\n    throw new Error(msg);\n  };\n});","lineCount":80,"map":[[12,2,4,0,"Object"],[12,8,4,0],[12,9,4,0,"defineProperty"],[12,23,4,0],[12,24,4,0,"exports"],[12,31,4,0],[13,4,4,0,"enumerable"],[13,14,4,0],[14,4,4,0,"get"],[14,7,4,0],[14,18,4,0,"get"],[14,19,4,0],[15,6,4,0],[15,13,4,0,"createCmap"],[15,23,4,0],[16,4,4,0],[17,2,4,0],[18,2,13,2],[18,6,13,2,"_babelRuntimeHelpersSlicedToArray"],[18,39,13,2],[18,42,13,2,"require"],[18,49,13,2],[18,50,13,2,"_dependencyMap"],[18,64,13,2],[19,2,13,2],[19,6,13,2,"_slicedToArray"],[19,20,13,2],[19,23,13,2,"_interopDefault"],[19,38,13,2],[19,39,13,2,"_babelRuntimeHelpersSlicedToArray"],[19,72,13,2],[20,2,1,0],[20,6,1,0,"_utilsIndexJs"],[20,19,1,0],[20,22,1,0,"require"],[20,29,1,0],[20,30,1,0,"_dependencyMap"],[20,44,1,0],[21,2,2,0],[21,6,2,0,"_utilsUnicodeJs"],[21,21,2,0],[21,24,2,0,"require"],[21,31,2,0],[21,32,2,0,"_dependencyMap"],[21,46,2,0],[22,2,3,0],[23,2,4,7],[23,6,4,13,"createCmap"],[23,16,4,23],[23,19,4,26,"createCmap"],[23,20,4,27,"glyphs"],[23,26,4,33],[23,28,4,35,"glyphId"],[23,35,4,42],[23,40,4,47],[24,4,5,4],[24,8,5,10,"bfChars"],[24,15,5,17],[24,18,5,20],[24,22,5,24,"Array"],[24,27,5,29],[24,28,5,30,"glyphs"],[24,34,5,36],[24,35,5,37,"length"],[24,41,5,43],[24,42,5,44],[25,4,6,4],[25,9,6,9],[25,13,6,13,"idx"],[25,16,6,16],[25,19,6,19],[25,20,6,20],[25,22,6,22,"len"],[25,25,6,25],[25,28,6,28,"glyphs"],[25,34,6,34],[25,35,6,35,"length"],[25,41,6,41],[25,43,6,43,"idx"],[25,46,6,46],[25,49,6,49,"len"],[25,52,6,52],[25,54,6,54,"idx"],[25,57,6,57],[25,59,6,59],[25,61,6,61],[26,6,7,8],[26,10,7,14,"glyph"],[26,15,7,19],[26,18,7,22,"glyphs"],[26,24,7,28],[26,25,7,29,"idx"],[26,28,7,32],[26,29,7,33],[27,6,8,8],[27,10,8,14,"id"],[27,12,8,16],[27,15,8,19,"cmapHexFormat"],[27,28,8,32],[27,29,8,33,"cmapHexString"],[27,42,8,46],[27,43,8,47,"glyphId"],[27,50,8,54],[27,51,8,55,"glyph"],[27,56,8,60],[27,57,8,61],[27,58,8,62],[27,59,8,63],[28,6,9,8],[28,10,9,14,"unicode"],[28,17,9,21],[28,20,9,24,"cmapHexFormat"],[28,33,9,37],[28,34,9,38],[28,37,9,41,"glyph"],[28,42,9,46],[28,43,9,47,"codePoints"],[28,53,9,57],[28,54,9,58,"map"],[28,57,9,61],[28,58,9,62,"cmapCodePointFormat"],[28,77,9,81],[28,78,9,82],[28,79,9,83],[29,6,10,8,"bfChars"],[29,13,10,15],[29,14,10,16,"idx"],[29,17,10,19],[29,18,10,20],[29,21,10,23],[29,22,10,24,"id"],[29,24,10,26],[29,26,10,28,"unicode"],[29,33,10,35],[29,34,10,36],[30,4,11,4],[31,4,12,4],[31,11,12,11,"fillCmapTemplate"],[31,27,12,27],[31,28,12,28,"bfChars"],[31,35,12,35],[31,36,12,36],[32,2,13,0],[32,3,13,1],[33,2,14,0],[34,2,15,0],[34,6,15,6,"fillCmapTemplate"],[34,22,15,22],[34,25,15,26,"bfChars"],[34,32,15,33],[34,36,15,38],[35,0,16,0],[36,0,17,0],[37,0,18,0],[38,0,19,0],[39,0,20,0],[40,0,21,0],[41,0,22,0],[42,0,23,0],[43,0,24,0],[44,0,25,0],[45,0,26,0],[46,0,27,0],[47,0,28,0],[48,0,29,0],[48,2,29,2,"bfChars"],[48,9,29,9],[48,10,29,10,"length"],[48,16,29,16],[49,0,30,0],[49,2,30,2,"bfChars"],[49,9,30,9],[49,10,30,10,"map"],[49,13,30,13],[49,14,30,14,"_ref"],[49,18,30,14],[50,4,30,14],[50,8,30,14,"_ref2"],[50,13,30,14],[50,20,30,14,"_slicedToArray"],[50,34,30,14],[50,35,30,14,"default"],[50,42,30,14],[50,44,30,14,"_ref"],[50,48,30,14],[51,6,30,16,"glyphId"],[51,13,30,23],[51,16,30,23,"_ref2"],[51,21,30,23],[52,6,30,25,"codePoint"],[52,15,30,34],[52,18,30,34,"_ref2"],[52,23,30,34],[53,4,30,34],[53,11,30,40],[53,14,30,43,"glyphId"],[53,21,30,50],[53,25,30,54,"codePoint"],[53,34,30,63],[53,36,30,65],[54,2,30,65],[54,4,30,66],[54,5,30,67,"join"],[54,9,30,71],[54,10,30,72],[54,14,30,76],[54,15,30,77],[55,0,31,0],[56,0,32,0],[57,0,33,0],[58,0,34,0],[59,0,35,0],[60,0,36,0],[60,1,36,1],[61,2,37,0],[62,2,38,0],[62,6,38,6,"cmapHexFormat"],[62,19,38,19],[62,22,38,22],[62,31,38,22,"cmapHexFormat"],[62,32,38,22],[63,4,38,22],[63,13,38,22,"_len"],[63,17,38,22],[63,20,38,22,"arguments"],[63,29,38,22],[63,30,38,22,"length"],[63,36,38,22],[63,38,38,26,"values"],[63,44,38,32],[63,51,38,32,"Array"],[63,56,38,32],[63,57,38,32,"_len"],[63,61,38,32],[63,64,38,32,"_key"],[63,68,38,32],[63,74,38,32,"_key"],[63,78,38,32],[63,81,38,32,"_len"],[63,85,38,32],[63,87,38,32,"_key"],[63,91,38,32],[64,6,38,26,"values"],[64,12,38,32],[64,13,38,32,"_key"],[64,17,38,32],[64,21,38,32,"arguments"],[64,30,38,32],[64,31,38,32,"_key"],[64,35,38,32],[65,4,38,32],[66,4,38,32],[66,11,38,37],[66,15,38,41,"values"],[66,21,38,47],[66,22,38,48,"join"],[66,26,38,52],[66,27,38,53],[66,29,38,55],[66,30,38,56],[66,33,38,59],[67,2,38,59],[68,2,39,0],[68,6,39,6,"cmapHexString"],[68,19,39,19],[68,22,39,23,"value"],[68,27,39,28],[68,31,39,33],[68,35,39,33,"toHexStringOfMinLength"],[68,48,39,55],[68,49,39,55,"toHexStringOfMinLength"],[68,71,39,55],[68,73,39,56,"value"],[68,78,39,61],[68,80,39,63],[68,81,39,64],[68,82,39,65],[69,2,40,0],[69,6,40,6,"cmapCodePointFormat"],[69,25,40,25],[69,28,40,29,"codePoint"],[69,37,40,38],[69,41,40,43],[70,4,41,4],[70,8,41,8],[70,12,41,8,"isWithinBMP"],[70,27,41,19],[70,28,41,19,"isWithinBMP"],[70,39,41,19],[70,41,41,20,"codePoint"],[70,50,41,29],[70,51,41,30],[70,53,42,8],[70,60,42,15,"cmapHexString"],[70,73,42,28],[70,74,42,29,"codePoint"],[70,83,42,38],[70,84,42,39],[71,4,43,4],[71,8,43,8],[71,12,43,8,"hasSurrogates"],[71,27,43,21],[71,28,43,21,"hasSurrogates"],[71,41,43,21],[71,43,43,22,"codePoint"],[71,52,43,31],[71,53,43,32],[71,55,43,34],[72,6,44,8],[72,10,44,14,"hs"],[72,12,44,16],[72,15,44,19],[72,19,44,19,"highSurrogate"],[72,34,44,32],[72,35,44,32,"highSurrogate"],[72,48,44,32],[72,50,44,33,"codePoint"],[72,59,44,42],[72,60,44,43],[73,6,45,8],[73,10,45,14,"ls"],[73,12,45,16],[73,15,45,19],[73,19,45,19,"lowSurrogate"],[73,34,45,31],[73,35,45,31,"lowSurrogate"],[73,47,45,31],[73,49,45,32,"codePoint"],[73,58,45,41],[73,59,45,42],[74,6,46,8],[74,13,46,15],[74,16,46,18,"cmapHexString"],[74,29,46,31],[74,30,46,32,"hs"],[74,32,46,34],[74,33,46,35],[74,36,46,38,"cmapHexString"],[74,49,46,51],[74,50,46,52,"ls"],[74,52,46,54],[74,53,46,55],[74,55,46,57],[75,4,47,4],[76,4,48,4],[76,8,48,10,"hex"],[76,11,48,13],[76,14,48,16],[76,18,48,16,"toHexString"],[76,31,48,27],[76,32,48,27,"toHexString"],[76,43,48,27],[76,45,48,28,"codePoint"],[76,54,48,37],[76,55,48,38],[77,4,49,4],[77,8,49,10,"msg"],[77,11,49,13],[77,14,49,16],[77,19,49,21,"hex"],[77,22,49,24],[77,66,49,68],[78,4,50,4],[78,10,50,10],[78,14,50,14,"Error"],[78,19,50,19],[78,20,50,20,"msg"],[78,23,50,23],[78,24,50,24],[79,2,51,0],[79,3,51,1],[80,0,51,2],[80,3]],"functionMap":{"names":["<global>","createCmap","fillCmapTemplate","bfChars.map$argument_0","cmapHexFormat","cmapHexString","cmapCodePointFormat"],"mappings":"AAA;0BCG;CDS;yBEE;cCe,mDD;CFM;sBIE,qCJ;sBKC,2CL;4BMC;CNW"},"hasCjsExports":false},"type":"js/module"}]}