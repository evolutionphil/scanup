{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../../utils/png.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RQvVyKYik7yPfK0gj/dxNKd1B5k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _utilsPngJs = require(_dependencyMap[3], \"../../utils/png.js\");\n  /**\n   * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n   * this class borrows from:\n   *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/png.coffee\n   */\n  var PngEmbedder = /*#__PURE__*/function () {\n    function PngEmbedder(png) {\n      (0, _classCallCheck.default)(this, PngEmbedder);\n      this.image = png;\n      this.bitsPerComponent = png.bitsPerComponent;\n      this.width = png.width;\n      this.height = png.height;\n      this.colorSpace = 'DeviceRGB';\n    }\n    return (0, _createClass.default)(PngEmbedder, [{\n      key: \"embedIntoContext\",\n      value: function () {\n        var _embedIntoContext = (0, _asyncToGenerator.default)(function* (context, ref) {\n          var SMask = this.embedAlphaChannel(context);\n          var xObject = context.flateStream(this.image.rgbChannel, {\n            Type: 'XObject',\n            Subtype: 'Image',\n            BitsPerComponent: this.image.bitsPerComponent,\n            Width: this.image.width,\n            Height: this.image.height,\n            ColorSpace: this.colorSpace,\n            SMask\n          });\n          if (ref) {\n            context.assign(ref, xObject);\n            return ref;\n          } else {\n            return context.register(xObject);\n          }\n        });\n        function embedIntoContext(_x, _x2) {\n          return _embedIntoContext.apply(this, arguments);\n        }\n        return embedIntoContext;\n      }()\n    }, {\n      key: \"embedAlphaChannel\",\n      value: function embedAlphaChannel(context) {\n        if (!this.image.alphaChannel) return undefined;\n        var xObject = context.flateStream(this.image.alphaChannel, {\n          Type: 'XObject',\n          Subtype: 'Image',\n          Height: this.image.height,\n          Width: this.image.width,\n          BitsPerComponent: this.image.bitsPerComponent,\n          ColorSpace: 'DeviceGray',\n          Decode: [0, 1]\n        });\n        return context.register(xObject);\n      }\n    }], [{\n      key: \"for\",\n      value: function () {\n        var _for2 = (0, _asyncToGenerator.default)(function* (imageData) {\n          var png = _utilsPngJs.PNG.load(imageData);\n          return new PngEmbedder(png);\n        });\n        function _for(_x3) {\n          return _for2.apply(this, arguments);\n        }\n        return _for;\n      }()\n    }]);\n  }();\n  var _default = PngEmbedder;\n});","lineCount":95,"map":[[12,2,53,0,"Object"],[12,8,53,0],[12,9,53,0,"defineProperty"],[12,23,53,0],[12,24,53,0,"exports"],[12,31,53,0],[13,4,53,0,"enumerable"],[13,14,53,0],[14,4,53,0,"get"],[14,7,53,0],[14,18,53,0,"get"],[14,19,53,0],[15,6,53,0],[15,13,53,0,"_default"],[15,21,53,0],[16,4,53,0],[17,2,53,0],[18,2,53,27],[18,6,53,27,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,53,27],[18,45,53,27,"require"],[18,52,53,27],[18,53,53,27,"_dependencyMap"],[18,67,53,27],[19,2,53,27],[19,6,53,27,"_asyncToGenerator"],[19,23,53,27],[19,26,53,27,"_interopDefault"],[19,41,53,27],[19,42,53,27,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,53,27],[20,2,53,27],[20,6,53,27,"_babelRuntimeHelpersClassCallCheck"],[20,40,53,27],[20,43,53,27,"require"],[20,50,53,27],[20,51,53,27,"_dependencyMap"],[20,65,53,27],[21,2,53,27],[21,6,53,27,"_classCallCheck"],[21,21,53,27],[21,24,53,27,"_interopDefault"],[21,39,53,27],[21,40,53,27,"_babelRuntimeHelpersClassCallCheck"],[21,74,53,27],[22,2,53,27],[22,6,53,27,"_babelRuntimeHelpersCreateClass"],[22,37,53,27],[22,40,53,27,"require"],[22,47,53,27],[22,48,53,27,"_dependencyMap"],[22,62,53,27],[23,2,53,27],[23,6,53,27,"_createClass"],[23,18,53,27],[23,21,53,27,"_interopDefault"],[23,36,53,27],[23,37,53,27,"_babelRuntimeHelpersCreateClass"],[23,68,53,27],[24,2,1,0],[24,6,1,0,"_utilsPngJs"],[24,17,1,0],[24,20,1,0,"require"],[24,27,1,0],[24,28,1,0,"_dependencyMap"],[24,42,1,0],[25,2,2,0],[26,0,3,0],[27,0,4,0],[28,0,5,0],[29,0,6,0],[30,2,2,0],[30,6,7,6,"PngEmbedder"],[30,17,7,17],[31,4,12,4],[31,13,12,4,"PngEmbedder"],[31,25,12,16,"png"],[31,28,12,19],[31,30,12,21],[32,6,12,21],[32,10,12,21,"_classCallCheck"],[32,25,12,21],[32,26,12,21,"default"],[32,33,12,21],[32,41,12,21,"PngEmbedder"],[32,52,12,21],[33,6,13,8],[33,10,13,12],[33,11,13,13,"image"],[33,16,13,18],[33,19,13,21,"png"],[33,22,13,24],[34,6,14,8],[34,10,14,12],[34,11,14,13,"bitsPerComponent"],[34,27,14,29],[34,30,14,32,"png"],[34,33,14,35],[34,34,14,36,"bitsPerComponent"],[34,50,14,52],[35,6,15,8],[35,10,15,12],[35,11,15,13,"width"],[35,16,15,18],[35,19,15,21,"png"],[35,22,15,24],[35,23,15,25,"width"],[35,28,15,30],[36,6,16,8],[36,10,16,12],[36,11,16,13,"height"],[36,17,16,19],[36,20,16,22,"png"],[36,23,16,25],[36,24,16,26,"height"],[36,30,16,32],[37,6,17,8],[37,10,17,12],[37,11,17,13,"colorSpace"],[37,21,17,23],[37,24,17,26],[37,35,17,37],[38,4,18,4],[39,4,18,5],[39,15,18,5,"_createClass"],[39,27,18,5],[39,28,18,5,"default"],[39,35,18,5],[39,37,18,5,"PngEmbedder"],[39,48,18,5],[40,6,18,5,"key"],[40,9,18,5],[41,6,18,5,"value"],[41,11,18,5],[42,8,18,5],[42,12,18,5,"_embedIntoContext"],[42,29,18,5],[42,36,18,5,"_asyncToGenerator"],[42,53,18,5],[42,54,18,5,"default"],[42,61,18,5],[42,63,19,4],[42,74,19,27,"context"],[42,81,19,34],[42,83,19,36,"ref"],[42,86,19,39],[42,88,19,41],[43,10,20,8],[43,14,20,14,"SMask"],[43,19,20,19],[43,22,20,22],[43,26,20,26],[43,27,20,27,"embedAlphaChannel"],[43,44,20,44],[43,45,20,45,"context"],[43,52,20,52],[43,53,20,53],[44,10,21,8],[44,14,21,14,"xObject"],[44,21,21,21],[44,24,21,24,"context"],[44,31,21,31],[44,32,21,32,"flateStream"],[44,43,21,43],[44,44,21,44],[44,48,21,48],[44,49,21,49,"image"],[44,54,21,54],[44,55,21,55,"rgbChannel"],[44,65,21,65],[44,67,21,67],[45,12,22,12,"Type"],[45,16,22,16],[45,18,22,18],[45,27,22,27],[46,12,23,12,"Subtype"],[46,19,23,19],[46,21,23,21],[46,28,23,28],[47,12,24,12,"BitsPerComponent"],[47,28,24,28],[47,30,24,30],[47,34,24,34],[47,35,24,35,"image"],[47,40,24,40],[47,41,24,41,"bitsPerComponent"],[47,57,24,57],[48,12,25,12,"Width"],[48,17,25,17],[48,19,25,19],[48,23,25,23],[48,24,25,24,"image"],[48,29,25,29],[48,30,25,30,"width"],[48,35,25,35],[49,12,26,12,"Height"],[49,18,26,18],[49,20,26,20],[49,24,26,24],[49,25,26,25,"image"],[49,30,26,30],[49,31,26,31,"height"],[49,37,26,37],[50,12,27,12,"ColorSpace"],[50,22,27,22],[50,24,27,24],[50,28,27,28],[50,29,27,29,"colorSpace"],[50,39,27,39],[51,12,28,12,"SMask"],[52,10,29,8],[52,11,29,9],[52,12,29,10],[53,10,30,8],[53,14,30,12,"ref"],[53,17,30,15],[53,19,30,17],[54,12,31,12,"context"],[54,19,31,19],[54,20,31,20,"assign"],[54,26,31,26],[54,27,31,27,"ref"],[54,30,31,30],[54,32,31,32,"xObject"],[54,39,31,39],[54,40,31,40],[55,12,32,12],[55,19,32,19,"ref"],[55,22,32,22],[56,10,33,8],[56,11,33,9],[56,17,34,13],[57,12,35,12],[57,19,35,19,"context"],[57,26,35,26],[57,27,35,27,"register"],[57,35,35,35],[57,36,35,36,"xObject"],[57,43,35,43],[57,44,35,44],[58,10,36,8],[59,8,37,4],[59,9,37,5],[60,8,37,5],[60,17,19,10,"embedIntoContext"],[60,33,19,26,"embedIntoContext"],[60,34,19,26,"_x"],[60,36,19,26],[60,38,19,26,"_x2"],[60,41,19,26],[61,10,19,26],[61,17,19,26,"_embedIntoContext"],[61,34,19,26],[61,35,19,26,"apply"],[61,40,19,26],[61,47,19,26,"arguments"],[61,56,19,26],[62,8,19,26],[63,8,19,26],[63,15,19,10,"embedIntoContext"],[63,31,19,26],[64,6,19,26],[65,4,19,26],[66,6,19,26,"key"],[66,9,19,26],[67,6,19,26,"value"],[67,11,19,26],[67,13,38,4],[67,22,38,4,"embedAlphaChannel"],[67,39,38,21,"embedAlphaChannel"],[67,40,38,22,"context"],[67,47,38,29],[67,49,38,31],[68,8,39,8],[68,12,39,12],[68,13,39,13],[68,17,39,17],[68,18,39,18,"image"],[68,23,39,23],[68,24,39,24,"alphaChannel"],[68,36,39,36],[68,38,40,12],[68,45,40,19,"undefined"],[68,54,40,28],[69,8,41,8],[69,12,41,14,"xObject"],[69,19,41,21],[69,22,41,24,"context"],[69,29,41,31],[69,30,41,32,"flateStream"],[69,41,41,43],[69,42,41,44],[69,46,41,48],[69,47,41,49,"image"],[69,52,41,54],[69,53,41,55,"alphaChannel"],[69,65,41,67],[69,67,41,69],[70,10,42,12,"Type"],[70,14,42,16],[70,16,42,18],[70,25,42,27],[71,10,43,12,"Subtype"],[71,17,43,19],[71,19,43,21],[71,26,43,28],[72,10,44,12,"Height"],[72,16,44,18],[72,18,44,20],[72,22,44,24],[72,23,44,25,"image"],[72,28,44,30],[72,29,44,31,"height"],[72,35,44,37],[73,10,45,12,"Width"],[73,15,45,17],[73,17,45,19],[73,21,45,23],[73,22,45,24,"image"],[73,27,45,29],[73,28,45,30,"width"],[73,33,45,35],[74,10,46,12,"BitsPerComponent"],[74,26,46,28],[74,28,46,30],[74,32,46,34],[74,33,46,35,"image"],[74,38,46,40],[74,39,46,41,"bitsPerComponent"],[74,55,46,57],[75,10,47,12,"ColorSpace"],[75,20,47,22],[75,22,47,24],[75,34,47,36],[76,10,48,12,"Decode"],[76,16,48,18],[76,18,48,20],[76,19,48,21],[76,20,48,22],[76,22,48,24],[76,23,48,25],[77,8,49,8],[77,9,49,9],[77,10,49,10],[78,8,50,8],[78,15,50,15,"context"],[78,22,50,22],[78,23,50,23,"register"],[78,31,50,31],[78,32,50,32,"xObject"],[78,39,50,39],[78,40,50,40],[79,6,51,4],[80,4,51,5],[81,6,51,5,"key"],[81,9,51,5],[82,6,51,5,"value"],[82,11,51,5],[83,8,51,5],[83,12,51,5,"_for2"],[83,17,51,5],[83,24,51,5,"_asyncToGenerator"],[83,41,51,5],[83,42,51,5,"default"],[83,49,51,5],[83,51,8,4],[83,62,8,21,"imageData"],[83,71,8,30],[83,73,8,32],[84,10,9,8],[84,14,9,14,"png"],[84,17,9,17],[84,20,9,20,"PNG"],[84,31,9,23],[84,32,9,23,"PNG"],[84,35,9,23],[84,36,9,24,"load"],[84,40,9,28],[84,41,9,29,"imageData"],[84,50,9,38],[84,51,9,39],[85,10,10,8],[85,17,10,15],[85,21,10,19,"PngEmbedder"],[85,32,10,30],[85,33,10,31,"png"],[85,36,10,34],[85,37,10,35],[86,8,11,4],[86,9,11,5],[87,8,11,5],[87,17,8,17,"for"],[87,21,8,20,"for"],[87,22,8,20,"_x3"],[87,25,8,20],[88,10,8,20],[88,17,8,20,"_for2"],[88,22,8,20],[88,23,8,20,"apply"],[88,28,8,20],[88,35,8,20,"arguments"],[88,44,8,20],[89,8,8,20],[90,8,8,20],[90,15,8,17,"for"],[90,19,8,20],[91,6,8,20],[92,4,8,20],[93,2,8,20],[94,2,53,0],[94,6,53,0,"_default"],[94,14,53,0],[94,17,53,15,"PngEmbedder"],[94,28,53,26],[95,0,53,27],[95,3]],"functionMap":{"names":["<global>","PngEmbedder","_for","constructor","embedIntoContext","embedAlphaChannel"],"mappings":"AAA;ACM;ICC;KDG;IEC;KFM;IGC;KHkB;IIC;KJa;CDC"},"hasCjsExports":false},"type":"js/module"}]}