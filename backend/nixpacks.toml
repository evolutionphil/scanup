# Railway/Nixpacks configuration for ScanUp Backend
# This tells Nixpacks to use Python provider which auto-installs pip

[phases.setup]
# Add tesseract for OCR support
nixPkgs = ["tesseract5", "zlib", "libjpeg", "libpng"]

[phases.install]
# These commands run after the default Python setup (which includes pip in virtualenv)
cmds = ["pip install -r requirements.txt"]

[start]
cmd = "uvicorn server:app --host 0.0.0.0 --port ${PORT:-8001}"

[variables]
# Tesseract data path
TESSDATA_PREFIX = "/nix/store"
